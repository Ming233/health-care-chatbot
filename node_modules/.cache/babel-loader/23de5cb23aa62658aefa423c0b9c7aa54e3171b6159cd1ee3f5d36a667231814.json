{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar Enums = require(\"./enums\");\nvar Shared = require(\"./shared\");\nvar Utils = require(\"./utils\");\nvar HostConfig = require(\"./host-config\");\nvar TextFormatters = require(\"./text-formatters\");\nfunction invokeSetCollection(action, collection) {\n  if (action) {\n    // Closest emulation of \"internal\" in TypeScript.\n    action[\"setCollection\"](collection);\n  }\n}\nfunction isActionAllowed(action, forbiddenActionTypes) {\n  if (forbiddenActionTypes) {\n    for (var i = 0; i < forbiddenActionTypes.length; i++) {\n      if (action.getJsonTypeName() === forbiddenActionTypes[i]) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\nvar InstanceCreationErrorType;\n(function (InstanceCreationErrorType) {\n  InstanceCreationErrorType[InstanceCreationErrorType[\"UnknownType\"] = 0] = \"UnknownType\";\n  InstanceCreationErrorType[InstanceCreationErrorType[\"ForbiddenType\"] = 1] = \"ForbiddenType\";\n})(InstanceCreationErrorType || (InstanceCreationErrorType = {}));\nfunction createCardObjectInstance(parent, json, forbiddenTypeNames, allowFallback, createInstanceCallback, createValidationErrorCallback, errors) {\n  var result = null;\n  if (json && typeof json === \"object\") {\n    var tryToFallback = false;\n    var typeName = Utils.getStringValue(json[\"type\"]);\n    if (forbiddenTypeNames && forbiddenTypeNames.indexOf(typeName) >= 0) {\n      raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.ForbiddenType), errors);\n    } else {\n      result = createInstanceCallback(typeName);\n      if (!result) {\n        tryToFallback = allowFallback;\n        raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.UnknownType), errors);\n      } else {\n        result.setParent(parent);\n        result.parse(json, errors);\n        tryToFallback = result.shouldFallback() && allowFallback;\n      }\n      if (tryToFallback) {\n        var fallback = json[\"fallback\"];\n        if (!fallback) {\n          parent.setShouldFallback(true);\n        }\n        if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\n          result = null;\n        } else if (typeof fallback === \"object\") {\n          result = createCardObjectInstance(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, createValidationErrorCallback, errors);\n        }\n      }\n    }\n  }\n  return result;\n}\nfunction createActionInstance(parent, json, forbiddenActionTypes, allowFallback, errors) {\n  return createCardObjectInstance(parent, json, forbiddenActionTypes, allowFallback, function (typeName) {\n    return AdaptiveCard.actionTypeRegistry.createInstance(typeName);\n  }, function (typeName, errorType) {\n    if (errorType == InstanceCreationErrorType.UnknownType) {\n      return {\n        error: Enums.ValidationError.UnknownActionType,\n        message: \"Unknown action type: \" + typeName + \". Fallback will be used if present.\"\n      };\n    } else {\n      return {\n        error: Enums.ValidationError.ActionTypeNotAllowed,\n        message: \"Action type \" + typeName + \" is not allowed in this context.\"\n      };\n    }\n  }, errors);\n}\nexports.createActionInstance = createActionInstance;\nfunction createElementInstance(parent, json, allowFallback, errors) {\n  return createCardObjectInstance(parent, json, [],\n  // Forbidden types not supported for elements for now\n  allowFallback, function (typeName) {\n    return AdaptiveCard.elementTypeRegistry.createInstance(typeName);\n  }, function (typeName, errorType) {\n    if (errorType == InstanceCreationErrorType.UnknownType) {\n      return {\n        error: Enums.ValidationError.UnknownElementType,\n        message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\n      };\n    } else {\n      return {\n        error: Enums.ValidationError.ElementTypeNotAllowed,\n        message: \"Element type \" + typeName + \" is not allowed in this context.\"\n      };\n    }\n  }, errors);\n}\nexports.createElementInstance = createElementInstance;\nvar SerializableObject = /** @class */function () {\n  function SerializableObject() {\n    this._rawProperties = {};\n  }\n  SerializableObject.prototype.parse = function (json, errors) {\n    this._rawProperties = AdaptiveCard.enableFullJsonRoundTrip ? json : {};\n  };\n  SerializableObject.prototype.toJSON = function () {\n    var result;\n    if (AdaptiveCard.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === \"object\") {\n      result = this._rawProperties;\n    } else {\n      result = {};\n    }\n    return result;\n  };\n  SerializableObject.prototype.setCustomProperty = function (name, value) {\n    var shouldDeleteProperty = typeof value === \"string\" && Utils.isNullOrEmpty(value) || value === undefined || value === null;\n    if (shouldDeleteProperty) {\n      delete this._rawProperties[name];\n    } else {\n      this._rawProperties[name] = value;\n    }\n  };\n  SerializableObject.prototype.getCustomProperty = function (name) {\n    return this._rawProperties[name];\n  };\n  return SerializableObject;\n}();\nexports.SerializableObject = SerializableObject;\nvar ValidationFailure = /** @class */function () {\n  function ValidationFailure(cardObject) {\n    this.cardObject = cardObject;\n    this.errors = [];\n  }\n  return ValidationFailure;\n}();\nexports.ValidationFailure = ValidationFailure;\nvar ValidationResults = /** @class */function () {\n  function ValidationResults() {\n    this.allIds = {};\n    this.failures = [];\n  }\n  ValidationResults.prototype.getFailureIndex = function (cardObject) {\n    for (var i = 0; i < this.failures.length; i++) {\n      if (this.failures[i].cardObject === cardObject) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  ValidationResults.prototype.addFailure = function (cardObject, error) {\n    var index = this.getFailureIndex(cardObject);\n    var failure;\n    if (index < 0) {\n      failure = new ValidationFailure(cardObject);\n      this.failures.push(failure);\n    } else {\n      failure = this.failures[index];\n    }\n    failure.errors.push(error);\n  };\n  return ValidationResults;\n}();\nexports.ValidationResults = ValidationResults;\nvar CardObject = /** @class */function (_super) {\n  __extends(CardObject, _super);\n  function CardObject() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CardObject.prototype.internalValidateProperties = function (context) {\n    if (!Utils.isNullOrEmpty(this.id)) {\n      if (context.allIds.hasOwnProperty(this.id)) {\n        if (context.allIds[this.id] == 1) {\n          context.addFailure(this, {\n            error: Enums.ValidationError.DuplicateId,\n            message: \"Duplicate Id: \" + this.id\n          });\n        }\n        context.allIds[this.id] += 1;\n      } else {\n        context.allIds[this.id] = 1;\n      }\n    }\n  };\n  CardObject.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.id = Utils.getStringValue(json[\"id\"]);\n  };\n  CardObject.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"type\", this.getJsonTypeName());\n    Utils.setProperty(result, \"id\", this.id);\n    return result;\n  };\n  CardObject.prototype.validateProperties = function () {\n    var result = new ValidationResults();\n    this.internalValidateProperties(result);\n    return result;\n  };\n  return CardObject;\n}(SerializableObject);\nexports.CardObject = CardObject;\nvar CardElement = /** @class */function (_super) {\n  __extends(CardElement, _super);\n  function CardElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._shouldFallback = false;\n    _this._lang = undefined;\n    _this._hostConfig = null;\n    _this._parent = null;\n    _this._renderedElement = null;\n    _this._separatorElement = null;\n    _this._isVisible = true;\n    _this._truncatedDueToOverflow = false;\n    _this._defaultRenderedElementDisplayMode = null;\n    _this._padding = null;\n    _this.requires = new HostConfig.HostCapabilities();\n    _this.horizontalAlignment = null;\n    _this.spacing = Enums.Spacing.Default;\n    _this.separator = false;\n    _this.customCssSelector = null;\n    _this.height = \"auto\";\n    _this.minPixelHeight = null;\n    return _this;\n  }\n  CardElement.prototype.internalRenderSeparator = function () {\n    var renderedSeparator = Utils.renderSeparation(this.hostConfig, {\n      spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\n      lineThickness: this.separator ? this.hostConfig.separator.lineThickness : null,\n      lineColor: this.separator ? this.hostConfig.separator.lineColor : null\n    }, this.separatorOrientation);\n    if (AdaptiveCard.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {\n      // Adjust separator's margins if the option to always bleed separators is turned on\n      var parentContainer = this.getParentContainer();\n      if (parentContainer && parentContainer.getEffectivePadding()) {\n        var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\n        renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\n        renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\n      }\n    }\n    return renderedSeparator;\n  };\n  CardElement.prototype.updateRenderedElementVisibility = function () {\n    var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : \"none\";\n    if (this._renderedElement) {\n      this._renderedElement.style.display = displayMode;\n    }\n    if (this._separatorElement) {\n      if (this.parent && this.parent.isFirstElement(this)) {\n        this._separatorElement.style.display = \"none\";\n      } else {\n        this._separatorElement.style.display = displayMode;\n      }\n    }\n  };\n  CardElement.prototype.hideElementDueToOverflow = function () {\n    if (this._renderedElement && this.isVisible) {\n      this._renderedElement.style.visibility = 'hidden';\n      this.isVisible = false;\n      raiseElementVisibilityChangedEvent(this, false);\n    }\n  };\n  CardElement.prototype.showElementHiddenDueToOverflow = function () {\n    if (this._renderedElement && !this.isVisible) {\n      this._renderedElement.style.visibility = null;\n      this.isVisible = true;\n      raiseElementVisibilityChangedEvent(this, false);\n    }\n  };\n  // Marked private to emulate internal access\n  CardElement.prototype.handleOverflow = function (maxHeight) {\n    if (this.isVisible || this.isHiddenDueToOverflow()) {\n      var handled = this.truncateOverflow(maxHeight);\n      // Even if we were unable to truncate the element to fit this time,\n      // it still could have been previously truncated\n      this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\n      if (!handled) {\n        this.hideElementDueToOverflow();\n      } else if (handled && !this.isVisible) {\n        this.showElementHiddenDueToOverflow();\n      }\n    }\n  };\n  // Marked private to emulate internal access\n  CardElement.prototype.resetOverflow = function () {\n    var sizeChanged = false;\n    if (this._truncatedDueToOverflow) {\n      this.undoOverflowTruncation();\n      this._truncatedDueToOverflow = false;\n      sizeChanged = true;\n    }\n    if (this.isHiddenDueToOverflow) {\n      this.showElementHiddenDueToOverflow();\n    }\n    return sizeChanged;\n  };\n  CardElement.prototype.createPlaceholderElement = function () {\n    var element = document.createElement(\"div\");\n    element.style.border = \"1px dashed #DDDDDD\";\n    element.style.padding = \"4px\";\n    element.style.minHeight = \"32px\";\n    element.style.fontSize = \"10px\";\n    element.innerText = \"Empty \" + this.getJsonTypeName();\n    return element;\n  };\n  CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {\n    if (this.height === \"auto\") {\n      renderedElement.style.flex = \"0 0 auto\";\n    } else {\n      renderedElement.style.flex = \"1 1 auto\";\n    }\n    if (this.minPixelHeight) {\n      renderedElement.style.minHeight = this.minPixelHeight + \"px\";\n    }\n  };\n  CardElement.prototype.overrideInternalRender = function () {\n    return this.internalRender();\n  };\n  CardElement.prototype.applyPadding = function () {\n    if (this.separatorElement) {\n      if (AdaptiveCard.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {\n        var padding = new Shared.PaddingDefinition();\n        this.getImmediateSurroundingPadding(padding);\n        var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n        this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\n        this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\n      } else {\n        this.separatorElement.style.marginRight = \"0\";\n        this.separatorElement.style.marginLeft = \"0\";\n      }\n    }\n  };\n  /*\r\n   * Called when this element overflows the bottom of the card.\r\n   * maxHeight will be the amount of space still available on the card (0 if\r\n   * the element is fully off the card).\r\n   */\n  CardElement.prototype.truncateOverflow = function (maxHeight) {\n    // Child implementations should return true if the element handled\n    // the truncation request such that its content fits within maxHeight,\n    // false if the element should fall back to being hidden\n    return false;\n  };\n  /*\r\n   * This should reverse any changes performed in truncateOverflow().\r\n   */\n  CardElement.prototype.undoOverflowTruncation = function () {};\n  CardElement.prototype.getDefaultPadding = function () {\n    return new Shared.PaddingDefinition();\n  };\n  CardElement.prototype.getHasBackground = function () {\n    return false;\n  };\n  CardElement.prototype.getPadding = function () {\n    return this._padding;\n  };\n  CardElement.prototype.setPadding = function (value) {\n    this._padding = value;\n  };\n  Object.defineProperty(CardElement.prototype, \"supportsMinHeight\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"useDefaultSizing\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"allowCustomPadding\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"separatorOrientation\", {\n    get: function () {\n      return Enums.Orientation.Horizontal;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"defaultStyle\", {\n    get: function () {\n      return Enums.ContainerStyle.Default;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CardElement.prototype.asString = function () {\n    return \"\";\n  };\n  CardElement.prototype.isBleeding = function () {\n    return false;\n  };\n  CardElement.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"isVisible\", this.isVisible, true);\n    if (this.horizontalAlignment !== null) {\n      Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment);\n    }\n    Utils.setEnumProperty(Enums.Spacing, result, \"spacing\", this.spacing, Enums.Spacing.Default);\n    Utils.setProperty(result, \"separator\", this.separator, false);\n    Utils.setProperty(result, \"height\", this.height, \"auto\");\n    if (this.supportsMinHeight) {\n      Utils.setProperty(result, \"minHeight\", typeof this.minPixelHeight === \"number\" && !isNaN(this.minPixelHeight) ? this.minPixelHeight + \"px\" : undefined);\n    }\n    return result;\n  };\n  CardElement.prototype.setParent = function (value) {\n    this._parent = value;\n  };\n  CardElement.prototype.getEffectiveStyle = function () {\n    if (this.parent) {\n      return this.parent.getEffectiveStyle();\n    }\n    return this.defaultStyle;\n  };\n  CardElement.prototype.getForbiddenElementTypes = function () {\n    return null;\n  };\n  CardElement.prototype.getForbiddenActionTypes = function () {\n    return null;\n  };\n  CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {\n    if (processTop === void 0) {\n      processTop = true;\n    }\n    if (processRight === void 0) {\n      processRight = true;\n    }\n    if (processBottom === void 0) {\n      processBottom = true;\n    }\n    if (processLeft === void 0) {\n      processLeft = true;\n    }\n    if (this.parent) {\n      var doProcessTop = processTop && this.parent.isTopElement(this);\n      var doProcessRight = processRight && this.parent.isRightMostElement(this);\n      var doProcessBottom = processBottom && this.parent.isBottomElement(this);\n      var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\n      var effectivePadding = this.parent.getEffectivePadding();\n      if (effectivePadding) {\n        if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {\n          result.top = effectivePadding.top;\n          doProcessTop = false;\n        }\n        if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {\n          result.right = effectivePadding.right;\n          doProcessRight = false;\n        }\n        if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {\n          result.bottom = effectivePadding.bottom;\n          doProcessBottom = false;\n        }\n        if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {\n          result.left = effectivePadding.left;\n          doProcessLeft = false;\n        }\n      }\n      if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\n        this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);\n      }\n    }\n  };\n  CardElement.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    raiseParseElementEvent(this, json, errors);\n    this.requires.parse(json[\"requires\"], errors);\n    this.isVisible = Utils.getBoolValue(json[\"isVisible\"], this.isVisible);\n    this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\n    this.spacing = Utils.getEnumValue(Enums.Spacing, json[\"spacing\"], Enums.Spacing.Default);\n    this.separator = Utils.getBoolValue(json[\"separator\"], this.separator);\n    var jsonSeparation = json[\"separation\"];\n    if (jsonSeparation !== undefined) {\n      if (jsonSeparation === \"none\") {\n        this.spacing = Enums.Spacing.None;\n        this.separator = false;\n      } else if (jsonSeparation === \"strong\") {\n        this.spacing = Enums.Spacing.Large;\n        this.separator = true;\n      } else if (jsonSeparation === \"default\") {\n        this.spacing = Enums.Spacing.Default;\n        this.separator = false;\n      }\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The \\\"separation\\\" property is deprecated and will be removed. Use the \\\"spacing\\\" and \\\"separator\\\" properties instead.\"\n      }, errors);\n    }\n    var jsonHeight = json[\"height\"];\n    if (jsonHeight === \"auto\" || jsonHeight === \"stretch\") {\n      this.height = jsonHeight;\n    }\n    if (this.supportsMinHeight) {\n      var jsonMinHeight = json[\"minHeight\"];\n      if (jsonMinHeight && typeof jsonMinHeight === \"string\") {\n        var isValid = false;\n        try {\n          var size = Shared.SizeAndUnit.parse(jsonMinHeight, true);\n          if (size.unit == Enums.SizeUnit.Pixel) {\n            this.minPixelHeight = size.physicalSize;\n            isValid = true;\n          }\n        } catch (_a) {\n          // Do nothing. A parse error is emitted below\n        }\n        if (!isValid) {\n          raiseParseError({\n            error: Enums.ValidationError.InvalidPropertyValue,\n            message: \"Invalid \\\"minHeight\\\" value: \" + jsonMinHeight\n          }, errors);\n        }\n      }\n    } else {\n      this.minPixelHeight = null;\n    }\n  };\n  CardElement.prototype.getActionCount = function () {\n    return 0;\n  };\n  CardElement.prototype.getActionAt = function (index) {\n    throw new Error(\"Index out of range.\");\n  };\n  CardElement.prototype.remove = function () {\n    if (this.parent && this.parent instanceof CardElementContainer) {\n      return this.parent.removeItem(this);\n    }\n    return false;\n  };\n  CardElement.prototype.render = function () {\n    this._renderedElement = this.overrideInternalRender();\n    this._separatorElement = this.internalRenderSeparator();\n    if (this._renderedElement) {\n      if (this.customCssSelector) {\n        this._renderedElement.classList.add(this.customCssSelector);\n      }\n      this._renderedElement.style.boxSizing = \"border-box\";\n      this._defaultRenderedElementDisplayMode = this._renderedElement.style.display;\n      this.adjustRenderedElementSize(this._renderedElement);\n      this.updateLayout(false);\n    } else if (this.isDesignMode()) {\n      this._renderedElement = this.createPlaceholderElement();\n    }\n    return this._renderedElement;\n  };\n  CardElement.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n    this.updateRenderedElementVisibility();\n    this.applyPadding();\n  };\n  CardElement.prototype.indexOf = function (cardElement) {\n    return -1;\n  };\n  CardElement.prototype.isDesignMode = function () {\n    var rootElement = this.getRootElement();\n    return rootElement instanceof AdaptiveCard && rootElement.designMode;\n  };\n  CardElement.prototype.isRendered = function () {\n    return this._renderedElement && this._renderedElement.offsetHeight > 0;\n  };\n  CardElement.prototype.isFirstElement = function (element) {\n    return true;\n  };\n  CardElement.prototype.isLastElement = function (element) {\n    return true;\n  };\n  CardElement.prototype.isAtTheVeryLeft = function () {\n    return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;\n  };\n  CardElement.prototype.isAtTheVeryRight = function () {\n    return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;\n  };\n  CardElement.prototype.isAtTheVeryTop = function () {\n    return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;\n  };\n  CardElement.prototype.isAtTheVeryBottom = function () {\n    return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;\n  };\n  CardElement.prototype.isBleedingAtTop = function () {\n    return false;\n  };\n  CardElement.prototype.isBleedingAtBottom = function () {\n    return false;\n  };\n  CardElement.prototype.isLeftMostElement = function (element) {\n    return true;\n  };\n  CardElement.prototype.isRightMostElement = function (element) {\n    return true;\n  };\n  CardElement.prototype.isTopElement = function (element) {\n    return this.isFirstElement(element);\n  };\n  CardElement.prototype.isBottomElement = function (element) {\n    return this.isLastElement(element);\n  };\n  CardElement.prototype.isHiddenDueToOverflow = function () {\n    return this._renderedElement && this._renderedElement.style.visibility == 'hidden';\n  };\n  CardElement.prototype.getRootElement = function () {\n    var rootElement = this;\n    while (rootElement.parent) {\n      rootElement = rootElement.parent;\n    }\n    return rootElement;\n  };\n  CardElement.prototype.getParentContainer = function () {\n    var currentElement = this.parent;\n    while (currentElement) {\n      if (currentElement instanceof Container) {\n        return currentElement;\n      }\n      currentElement = currentElement.parent;\n    }\n    return null;\n  };\n  CardElement.prototype.getAllInputs = function () {\n    return [];\n  };\n  CardElement.prototype.getResourceInformation = function () {\n    return [];\n  };\n  CardElement.prototype.getElementById = function (id) {\n    return this.id === id ? this : null;\n  };\n  CardElement.prototype.getActionById = function (id) {\n    return null;\n  };\n  CardElement.prototype.shouldFallback = function () {\n    return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\n  };\n  CardElement.prototype.setShouldFallback = function (value) {\n    this._shouldFallback = value;\n  };\n  CardElement.prototype.getEffectivePadding = function () {\n    var padding = this.getPadding();\n    return padding && this.allowCustomPadding ? padding : this.getDefaultPadding();\n  };\n  Object.defineProperty(CardElement.prototype, \"lang\", {\n    get: function () {\n      if (this._lang) {\n        return this._lang;\n      } else {\n        if (this.parent) {\n          return this.parent.lang;\n        } else {\n          return undefined;\n        }\n      }\n    },\n    set: function (value) {\n      if (value && value != \"\") {\n        var regEx = /^[a-z]{2,3}$/ig;\n        var matches = regEx.exec(value);\n        if (!matches) {\n          throw new Error(\"Invalid language identifier: \" + value);\n        }\n      }\n      this._lang = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"hostConfig\", {\n    get: function () {\n      if (this._hostConfig) {\n        return this._hostConfig;\n      } else {\n        if (this.parent) {\n          return this.parent.hostConfig;\n        } else {\n          return defaultHostConfig;\n        }\n      }\n    },\n    set: function (value) {\n      this._hostConfig = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"index\", {\n    get: function () {\n      if (this.parent) {\n        return this.parent.indexOf(this);\n      } else {\n        return 0;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isInteractive\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isStandalone\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isInline\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"parent\", {\n    get: function () {\n      return this._parent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isVisible\", {\n    get: function () {\n      return this._isVisible;\n    },\n    set: function (value) {\n      // If the element is going to be hidden, reset any changes that were due\n      // to overflow truncation (this ensures that if the element is later\n      // un-hidden it has the right content)\n      if (AdaptiveCard.useAdvancedCardBottomTruncation && !value) {\n        this.undoOverflowTruncation();\n      }\n      if (this._isVisible != value) {\n        this._isVisible = value;\n        this.updateRenderedElementVisibility();\n        if (this._renderedElement) {\n          raiseElementVisibilityChangedEvent(this);\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"hasVisibleSeparator\", {\n    get: function () {\n      if (this.parent && this.separatorElement) {\n        return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\n      } else {\n        return false;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"renderedElement\", {\n    get: function () {\n      return this._renderedElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"separatorElement\", {\n    get: function () {\n      return this._separatorElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return CardElement;\n}(CardObject);\nexports.CardElement = CardElement;\nvar BaseTextBlock = /** @class */function (_super) {\n  __extends(BaseTextBlock, _super);\n  function BaseTextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._selectAction = null;\n    _this.size = Enums.TextSize.Default;\n    _this.weight = Enums.TextWeight.Default;\n    _this.color = Enums.TextColor.Default;\n    _this.isSubtle = false;\n    _this.fontType = null;\n    return _this;\n  }\n  BaseTextBlock.prototype.getEffectiveStyleDefinition = function () {\n    return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\n  };\n  BaseTextBlock.prototype.getFontSize = function (fontType) {\n    switch (this.size) {\n      case Enums.TextSize.Small:\n        return fontType.fontSizes.small;\n      case Enums.TextSize.Medium:\n        return fontType.fontSizes.medium;\n      case Enums.TextSize.Large:\n        return fontType.fontSizes.large;\n      case Enums.TextSize.ExtraLarge:\n        return fontType.fontSizes.extraLarge;\n      default:\n        return fontType.fontSizes.default;\n    }\n  };\n  BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {\n    switch (color) {\n      case Enums.TextColor.Accent:\n        return colorSet.accent;\n      case Enums.TextColor.Dark:\n        return colorSet.dark;\n      case Enums.TextColor.Light:\n        return colorSet.light;\n      case Enums.TextColor.Good:\n        return colorSet.good;\n      case Enums.TextColor.Warning:\n        return colorSet.warning;\n      case Enums.TextColor.Attention:\n        return colorSet.attention;\n      default:\n        return colorSet.default;\n    }\n  };\n  BaseTextBlock.prototype.setText = function (value) {\n    this._text = value;\n  };\n  BaseTextBlock.prototype.asString = function () {\n    return this.text;\n  };\n  BaseTextBlock.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setEnumProperty(Enums.TextSize, result, \"size\", this.size, Enums.TextSize.Default);\n    Utils.setEnumProperty(Enums.TextWeight, result, \"weight\", this.weight, Enums.TextWeight.Default);\n    Utils.setEnumProperty(Enums.TextColor, result, \"color\", this.color, Enums.TextColor.Default);\n    Utils.setProperty(result, \"text\", this.text);\n    Utils.setProperty(result, \"isSubtle\", this.isSubtle, false);\n    Utils.setEnumProperty(Enums.FontType, result, \"fontType\", this.fontType, Enums.FontType.Default);\n    return result;\n  };\n  BaseTextBlock.prototype.applyStylesTo = function (targetElement) {\n    var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);\n    if (fontType.fontFamily) {\n      targetElement.style.fontFamily = fontType.fontFamily;\n    }\n    var fontSize;\n    switch (this.size) {\n      case Enums.TextSize.Small:\n        fontSize = fontType.fontSizes.small;\n        break;\n      case Enums.TextSize.Medium:\n        fontSize = fontType.fontSizes.medium;\n        break;\n      case Enums.TextSize.Large:\n        fontSize = fontType.fontSizes.large;\n        break;\n      case Enums.TextSize.ExtraLarge:\n        fontSize = fontType.fontSizes.extraLarge;\n        break;\n      default:\n        fontSize = fontType.fontSizes.default;\n        break;\n    }\n    targetElement.style.fontSize = fontSize + \"px\";\n    var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\n    targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);\n    var fontWeight;\n    switch (this.weight) {\n      case Enums.TextWeight.Lighter:\n        fontWeight = fontType.fontWeights.lighter;\n        break;\n      case Enums.TextWeight.Bolder:\n        fontWeight = fontType.fontWeights.bolder;\n        break;\n      default:\n        fontWeight = fontType.fontWeights.default;\n        break;\n    }\n    targetElement.style.fontWeight = fontWeight.toString();\n  };\n  BaseTextBlock.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.text = Utils.getStringValue(json[\"text\"]);\n    var sizeString = Utils.getStringValue(json[\"size\"]);\n    if (sizeString && sizeString.toLowerCase() === \"normal\") {\n      this.size = Enums.TextSize.Default;\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The TextBlock.size value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\n      }, errors);\n    } else {\n      this.size = Utils.getEnumValue(Enums.TextSize, sizeString, this.size);\n    }\n    var weightString = Utils.getStringValue(json[\"weight\"]);\n    if (weightString && weightString.toLowerCase() === \"normal\") {\n      this.weight = Enums.TextWeight.Default;\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The TextBlock.weight value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\n      }, errors);\n    } else {\n      this.weight = Utils.getEnumValue(Enums.TextWeight, weightString, this.weight);\n    }\n    this.color = Utils.getEnumValue(Enums.TextColor, json[\"color\"], this.color);\n    this.isSubtle = Utils.getBoolValue(json[\"isSubtle\"], this.isSubtle);\n    this.fontType = Utils.getEnumValue(Enums.FontType, json[\"fontType\"], this.fontType);\n  };\n  Object.defineProperty(BaseTextBlock.prototype, \"effectiveColor\", {\n    get: function () {\n      return this.color ? this.color : Enums.TextColor.Default;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BaseTextBlock.prototype, \"text\", {\n    get: function () {\n      return this._text;\n    },\n    set: function (value) {\n      this.setText(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BaseTextBlock.prototype, \"selectAction\", {\n    get: function () {\n      return this._selectAction;\n    },\n    set: function (value) {\n      this._selectAction = value;\n      if (this._selectAction) {\n        this._selectAction.setParent(this);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BaseTextBlock;\n}(CardElement);\nexports.BaseTextBlock = BaseTextBlock;\nvar TextBlock = /** @class */function (_super) {\n  __extends(TextBlock, _super);\n  function TextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._processedText = null;\n    _this._treatAsPlainText = true;\n    _this.wrap = false;\n    _this.useMarkdown = true;\n    return _this;\n  }\n  TextBlock.prototype.restoreOriginalContent = function () {\n    var maxHeight = this.maxLines ? this._computedLineHeight * this.maxLines + 'px' : null;\n    this.renderedElement.style.maxHeight = maxHeight;\n    this.renderedElement.innerHTML = this._originalInnerHtml;\n  };\n  TextBlock.prototype.truncateIfSupported = function (maxHeight) {\n    // For now, only truncate TextBlocks that contain just a single\n    // paragraph -- since the maxLines calculation doesn't take into\n    // account Markdown lists\n    var children = this.renderedElement.children;\n    var isTextOnly = !children.length;\n    var truncationSupported = isTextOnly || children.length == 1 && children[0].tagName.toLowerCase() == 'p';\n    if (truncationSupported) {\n      var element = isTextOnly ? this.renderedElement : children[0];\n      Utils.truncate(element, maxHeight, this._computedLineHeight);\n      return true;\n    }\n    return false;\n  };\n  TextBlock.prototype.setText = function (value) {\n    _super.prototype.setText.call(this, value);\n    this._processedText = null;\n  };\n  TextBlock.prototype.getRenderedDomElementType = function () {\n    return \"div\";\n  };\n  TextBlock.prototype.internalRender = function () {\n    var _this = this;\n    this._processedText = null;\n    if (!Utils.isNullOrEmpty(this.text)) {\n      var hostConfig = this.hostConfig;\n      var element = document.createElement(this.getRenderedDomElementType());\n      element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\n      element.style.overflow = \"hidden\";\n      this.applyStylesTo(element);\n      if (this.selectAction) {\n        element.onclick = function (e) {\n          e.preventDefault();\n          e.cancelBubble = true;\n          _this.selectAction.execute();\n        };\n        if (hostConfig.supportsInteractivity) {\n          element.tabIndex = 0;\n          element.setAttribute(\"role\", this.selectAction.getAriaRole());\n          element.setAttribute(\"aria-label\", this.selectAction.title);\n          element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n        }\n      }\n      if (!this._processedText) {\n        this._treatAsPlainText = true;\n        var formattedText = TextFormatters.formatText(this.lang, this.text);\n        if (this.useMarkdown) {\n          if (AdaptiveCard.allowMarkForTextHighlighting) {\n            formattedText = formattedText.replace(/<mark>/g, \"===\").replace(/<\\/mark>/g, \"/==\");\n          }\n          var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\n          if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {\n            this._processedText = markdownProcessingResult.outputHtml;\n            this._treatAsPlainText = false;\n            // Only process <mark> tag if markdown processing was applied because\n            // markdown processing is also responsible for sanitizing the input string\n            if (AdaptiveCard.allowMarkForTextHighlighting) {\n              var markStyle = \"\";\n              var effectiveStyle = this.getEffectiveStyleDefinition();\n              if (effectiveStyle.highlightBackgroundColor) {\n                markStyle += \"background-color: \" + effectiveStyle.highlightBackgroundColor + \";\";\n              }\n              if (effectiveStyle.highlightForegroundColor) {\n                markStyle += \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\n              }\n              if (!Utils.isNullOrEmpty(markStyle)) {\n                markStyle = 'style=\"' + markStyle + '\"';\n              }\n              this._processedText = this._processedText.replace(/===/g, \"<mark \" + markStyle + \">\").replace(/\\/==/g, \"</mark>\");\n            }\n          } else {\n            this._processedText = formattedText;\n            this._treatAsPlainText = true;\n          }\n        } else {\n          this._processedText = formattedText;\n          this._treatAsPlainText = true;\n        }\n      }\n      if (this._treatAsPlainText) {\n        element.innerText = this._processedText;\n      } else {\n        element.innerHTML = this._processedText;\n      }\n      if (element.firstElementChild instanceof HTMLElement) {\n        var firstElementChild = element.firstElementChild;\n        firstElementChild.style.marginTop = \"0px\";\n        firstElementChild.style.width = \"100%\";\n        if (!this.wrap) {\n          firstElementChild.style.overflow = \"hidden\";\n          firstElementChild.style.textOverflow = \"ellipsis\";\n        }\n      }\n      if (element.lastElementChild instanceof HTMLElement) {\n        element.lastElementChild.style.marginBottom = \"0px\";\n      }\n      var anchors = element.getElementsByTagName(\"a\");\n      for (var i = 0; i < anchors.length; i++) {\n        var anchor = anchors[i];\n        anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\n        anchor.target = \"_blank\";\n        anchor.onclick = function (e) {\n          if (raiseAnchorClickedEvent(_this, e.target)) {\n            e.preventDefault();\n            e.cancelBubble = true;\n          }\n        };\n      }\n      if (this.wrap) {\n        element.style.wordWrap = \"break-word\";\n        if (this.maxLines > 0) {\n          element.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\n          element.style.overflow = \"hidden\";\n        }\n      } else {\n        element.style.whiteSpace = \"nowrap\";\n        element.style.textOverflow = \"ellipsis\";\n      }\n      if (AdaptiveCard.useAdvancedTextBlockTruncation || AdaptiveCard.useAdvancedCardBottomTruncation) {\n        this._originalInnerHtml = element.innerHTML;\n      }\n      return element;\n    } else {\n      return null;\n    }\n  };\n  TextBlock.prototype.truncateOverflow = function (maxHeight) {\n    if (maxHeight >= this._computedLineHeight) {\n      return this.truncateIfSupported(maxHeight);\n    }\n    return false;\n  };\n  TextBlock.prototype.undoOverflowTruncation = function () {\n    this.restoreOriginalContent();\n    if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines) {\n      var maxHeight = this._computedLineHeight * this.maxLines;\n      this.truncateIfSupported(maxHeight);\n    }\n  };\n  TextBlock.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"wrap\", this.wrap, false);\n    Utils.setNumberProperty(result, \"maxLines\", this.maxLines);\n    return result;\n  };\n  TextBlock.prototype.applyStylesTo = function (targetElement) {\n    _super.prototype.applyStylesTo.call(this, targetElement);\n    var parentContainer = this.getParentContainer();\n    var isRtl = parentContainer ? parentContainer.isRtl() : false;\n    switch (this.horizontalAlignment) {\n      case Enums.HorizontalAlignment.Center:\n        targetElement.style.textAlign = \"center\";\n        break;\n      case Enums.HorizontalAlignment.Right:\n        targetElement.style.textAlign = isRtl ? \"left\" : \"right\";\n        break;\n      default:\n        targetElement.style.textAlign = isRtl ? \"right\" : \"left\";\n        break;\n    }\n    var lineHeights = this.hostConfig.lineHeights;\n    if (lineHeights) {\n      switch (this.size) {\n        case Enums.TextSize.Small:\n          this._computedLineHeight = lineHeights.small;\n          break;\n        case Enums.TextSize.Medium:\n          this._computedLineHeight = lineHeights.medium;\n          break;\n        case Enums.TextSize.Large:\n          this._computedLineHeight = lineHeights.large;\n          break;\n        case Enums.TextSize.ExtraLarge:\n          this._computedLineHeight = lineHeights.extraLarge;\n          break;\n        default:\n          this._computedLineHeight = lineHeights.default;\n          break;\n      }\n    } else {\n      // Looks like 1.33 is the magic number to compute line-height\n      // from font size.\n      this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;\n    }\n    targetElement.style.lineHeight = this._computedLineHeight + \"px\";\n  };\n  TextBlock.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\n    this.maxLines = Utils.getNumberValue(json[\"maxLines\"]);\n  };\n  TextBlock.prototype.getJsonTypeName = function () {\n    return \"TextBlock\";\n  };\n  TextBlock.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = false;\n    }\n    _super.prototype.updateLayout.call(this, processChildren);\n    if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines && this.isRendered()) {\n      // Reset the element's innerHTML in case the available room for\n      // content has increased\n      this.restoreOriginalContent();\n      this.truncateIfSupported(this._computedLineHeight * this.maxLines);\n    }\n  };\n  return TextBlock;\n}(BaseTextBlock);\nexports.TextBlock = TextBlock;\nvar Label = /** @class */function (_super) {\n  __extends(Label, _super);\n  function Label() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Label.prototype.getRenderedDomElementType = function () {\n    return \"label\";\n  };\n  Label.prototype.internalRender = function () {\n    var renderedElement = _super.prototype.internalRender.call(this);\n    if (renderedElement && !Utils.isNullOrEmpty(this.forElementId)) {\n      renderedElement.htmlFor = this.forElementId;\n    }\n    return renderedElement;\n  };\n  return Label;\n}(TextBlock);\nvar TextRun = /** @class */function (_super) {\n  __extends(TextRun, _super);\n  function TextRun() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.italic = false;\n    _this.strikethrough = false;\n    _this.highlight = false;\n    return _this;\n  }\n  TextRun.prototype.internalRender = function () {\n    var _this = this;\n    if (!Utils.isNullOrEmpty(this.text)) {\n      var hostConfig = this.hostConfig;\n      var formattedText = TextFormatters.formatText(this.lang, this.text);\n      var element = document.createElement(\"span\");\n      element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\n      this.applyStylesTo(element);\n      if (this.selectAction && hostConfig.supportsInteractivity) {\n        var anchor = document.createElement(\"a\");\n        anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\n        anchor.href = this.selectAction.getHref();\n        anchor.target = \"_blank\";\n        anchor.onclick = function (e) {\n          e.preventDefault();\n          e.cancelBubble = true;\n          _this.selectAction.execute();\n        };\n        anchor.innerText = formattedText;\n        element.appendChild(anchor);\n      } else {\n        element.innerText = formattedText;\n      }\n      return element;\n    } else {\n      return null;\n    }\n  };\n  TextRun.prototype.applyStylesTo = function (targetElement) {\n    _super.prototype.applyStylesTo.call(this, targetElement);\n    if (this.italic) {\n      targetElement.style.fontStyle = \"italic\";\n    }\n    if (this.strikethrough) {\n      targetElement.style.textDecoration = \"line-through\";\n    }\n    if (this.highlight) {\n      var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\n      targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);\n    }\n  };\n  TextRun.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"italic\", this.italic, false);\n    Utils.setProperty(result, \"strikethrough\", this.strikethrough, false);\n    Utils.setProperty(result, \"highlight\", this.highlight, false);\n    if (this.selectAction) {\n      Utils.setProperty(result, \"selectAction\", this.selectAction.toJSON());\n    }\n    return result;\n  };\n  TextRun.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.italic = Utils.getBoolValue(json[\"italic\"], this.italic);\n    this.strikethrough = Utils.getBoolValue(json[\"strikethrough\"], this.strikethrough);\n    this.highlight = Utils.getBoolValue(json[\"highlight\"], this.highlight);\n    this.selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n  };\n  TextRun.prototype.getJsonTypeName = function () {\n    return \"TextRun\";\n  };\n  Object.defineProperty(TextRun.prototype, \"isStandalone\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TextRun.prototype, \"isInline\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return TextRun;\n}(BaseTextBlock);\nexports.TextRun = TextRun;\nvar RichTextBlock = /** @class */function (_super) {\n  __extends(RichTextBlock, _super);\n  function RichTextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._inlines = [];\n    return _this;\n  }\n  RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {\n    if (forceAdd === void 0) {\n      forceAdd = false;\n    }\n    if (!inline.isInline) {\n      throw new Error(\"RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.\");\n    }\n    var doAdd = inline.parent == null || forceAdd;\n    if (!doAdd && inline.parent != this) {\n      throw new Error(\"RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.\");\n    } else {\n      inline.setParent(this);\n      this._inlines.push(inline);\n    }\n  };\n  RichTextBlock.prototype.internalRender = function () {\n    if (this._inlines.length > 0) {\n      var element = document.createElement(\"div\");\n      element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\n      var parentContainer = this.getParentContainer();\n      var isRtl = parentContainer ? parentContainer.isRtl() : false;\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.textAlign = \"center\";\n          break;\n        case Enums.HorizontalAlignment.Right:\n          element.style.textAlign = isRtl ? \"left\" : \"right\";\n          break;\n        default:\n          element.style.textAlign = isRtl ? \"right\" : \"left\";\n          break;\n      }\n      var renderedInlines = 0;\n      for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n        var inline = _a[_i];\n        var renderedInline = inline.render();\n        if (renderedInline) {\n          element.appendChild(renderedInline);\n          renderedInlines++;\n        }\n      }\n      if (renderedInlines > 0) {\n        return element;\n      }\n    }\n    return null;\n  };\n  RichTextBlock.prototype.asString = function () {\n    var result = \"\";\n    for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n      var inline = _a[_i];\n      result += inline.asString();\n    }\n    return result;\n  };\n  RichTextBlock.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this._inlines = [];\n    if (Array.isArray(json[\"inlines\"])) {\n      for (var _i = 0, _a = json[\"inlines\"]; _i < _a.length; _i++) {\n        var jsonInline = _a[_i];\n        var inline = void 0;\n        if (typeof jsonInline === \"string\") {\n          var textRun = new TextRun();\n          textRun.text = jsonInline;\n          inline = textRun;\n        } else {\n          inline = createElementInstance(this, jsonInline, false,\n          // No fallback for inlines in 1.2\n          errors);\n        }\n        if (inline) {\n          this.internalAddInline(inline, true);\n        }\n      }\n    }\n  };\n  RichTextBlock.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    if (this._inlines.length > 0) {\n      var jsonInlines = [];\n      for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n        var inline = _a[_i];\n        jsonInlines.push(inline.toJSON());\n      }\n      Utils.setProperty(result, \"inlines\", jsonInlines);\n    }\n    return result;\n  };\n  RichTextBlock.prototype.getJsonTypeName = function () {\n    return \"RichTextBlock\";\n  };\n  RichTextBlock.prototype.getInlineCount = function () {\n    return this._inlines.length;\n  };\n  RichTextBlock.prototype.getInlineAt = function (index) {\n    if (index >= 0 && index < this._inlines.length) {\n      return this._inlines[index];\n    } else {\n      throw new Error(\"RichTextBlock.getInlineAt: Index out of range (\" + index + \")\");\n    }\n  };\n  RichTextBlock.prototype.addInline = function (inline) {\n    this.internalAddInline(inline);\n  };\n  RichTextBlock.prototype.removeInline = function (inline) {\n    var index = this._inlines.indexOf(inline);\n    if (index >= 0) {\n      this._inlines[index].setParent(null);\n      this._inlines.splice(index, 1);\n      return true;\n    }\n    return false;\n  };\n  return RichTextBlock;\n}(CardElement);\nexports.RichTextBlock = RichTextBlock;\nvar Fact = /** @class */function (_super) {\n  __extends(Fact, _super);\n  function Fact(name, value) {\n    if (name === void 0) {\n      name = undefined;\n    }\n    if (value === void 0) {\n      value = undefined;\n    }\n    var _this = _super.call(this) || this;\n    _this.name = name;\n    _this.value = value;\n    return _this;\n  }\n  Fact.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n    this.name = Utils.getStringValue(json[\"title\"]);\n    this.value = Utils.getStringValue(json[\"value\"]);\n  };\n  Fact.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"title\", this.name);\n    Utils.setProperty(result, \"value\", this.value);\n    return result;\n  };\n  return Fact;\n}(SerializableObject);\nexports.Fact = Fact;\nvar FactSet = /** @class */function (_super) {\n  __extends(FactSet, _super);\n  function FactSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.facts = [];\n    return _this;\n  }\n  Object.defineProperty(FactSet.prototype, \"useDefaultSizing\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  FactSet.prototype.internalRender = function () {\n    var element = null;\n    var hostConfig = this.hostConfig;\n    if (this.facts.length > 0) {\n      element = document.createElement(\"table\");\n      element.style.borderWidth = \"0px\";\n      element.style.borderSpacing = \"0px\";\n      element.style.borderStyle = \"none\";\n      element.style.borderCollapse = \"collapse\";\n      element.style.display = \"block\";\n      element.style.overflow = \"hidden\";\n      element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\n      for (var i = 0; i < this.facts.length; i++) {\n        var trElement = document.createElement(\"tr\");\n        if (i > 0) {\n          trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\n        }\n        // Title column\n        var tdElement = document.createElement(\"td\");\n        tdElement.style.padding = \"0\";\n        tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\n        if (hostConfig.factSet.title.maxWidth) {\n          tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\n        }\n        tdElement.style.verticalAlign = \"top\";\n        var textBlock = new TextBlock();\n        textBlock.setParent(this);\n        textBlock.text = Utils.isNullOrEmpty(this.facts[i].name) && this.isDesignMode() ? \"Title\" : this.facts[i].name;\n        textBlock.size = hostConfig.factSet.title.size;\n        textBlock.color = hostConfig.factSet.title.color;\n        textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\n        textBlock.weight = hostConfig.factSet.title.weight;\n        textBlock.wrap = hostConfig.factSet.title.wrap;\n        textBlock.spacing = Enums.Spacing.None;\n        Utils.appendChild(tdElement, textBlock.render());\n        Utils.appendChild(trElement, tdElement);\n        // Spacer column\n        tdElement = document.createElement(\"td\");\n        tdElement.style.width = \"10px\";\n        Utils.appendChild(trElement, tdElement);\n        // Value column\n        tdElement = document.createElement(\"td\");\n        tdElement.style.padding = \"0\";\n        tdElement.style.verticalAlign = \"top\";\n        tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\n        textBlock = new TextBlock();\n        textBlock.setParent(this);\n        textBlock.text = this.facts[i].value;\n        textBlock.size = hostConfig.factSet.value.size;\n        textBlock.color = hostConfig.factSet.value.color;\n        textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\n        textBlock.weight = hostConfig.factSet.value.weight;\n        textBlock.wrap = hostConfig.factSet.value.wrap;\n        textBlock.spacing = Enums.Spacing.None;\n        Utils.appendChild(tdElement, textBlock.render());\n        Utils.appendChild(trElement, tdElement);\n        Utils.appendChild(element, trElement);\n      }\n    }\n    return element;\n  };\n  FactSet.prototype.getJsonTypeName = function () {\n    return \"FactSet\";\n  };\n  FactSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setArrayProperty(result, \"facts\", this.facts);\n    return result;\n  };\n  FactSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.facts = [];\n    var jsonFacts = json[\"facts\"];\n    if (Array.isArray(jsonFacts)) {\n      for (var _i = 0, jsonFacts_1 = jsonFacts; _i < jsonFacts_1.length; _i++) {\n        var jsonFact = jsonFacts_1[_i];\n        var fact = new Fact();\n        fact.parse(jsonFact);\n        this.facts.push(fact);\n      }\n    }\n  };\n  return FactSet;\n}(CardElement);\nexports.FactSet = FactSet;\nvar Image = /** @class */function (_super) {\n  __extends(Image, _super);\n  function Image() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.style = Enums.ImageStyle.Default;\n    _this.size = Enums.Size.Auto;\n    _this.pixelWidth = null;\n    _this.pixelHeight = null;\n    _this.altText = \"\";\n    return _this;\n  }\n  Image.prototype.parseDimension = function (name, value, errors) {\n    if (value) {\n      if (typeof value === \"string\") {\n        try {\n          var size = Shared.SizeAndUnit.parse(value);\n          if (size.unit == Enums.SizeUnit.Pixel) {\n            return size.physicalSize;\n          }\n        } catch (_a) {\n          // Ignore error\n        }\n      }\n      raiseParseError({\n        error: Enums.ValidationError.InvalidPropertyValue,\n        message: \"Invalid image \" + name + \": \" + value\n      }, errors);\n    }\n    return 0;\n  };\n  Image.prototype.applySize = function (element) {\n    if (this.pixelWidth || this.pixelHeight) {\n      if (this.pixelWidth) {\n        element.style.width = this.pixelWidth + \"px\";\n      }\n      if (this.pixelHeight) {\n        element.style.height = this.pixelHeight + \"px\";\n      }\n    } else {\n      switch (this.size) {\n        case Enums.Size.Stretch:\n          element.style.width = \"100%\";\n          break;\n        case Enums.Size.Auto:\n          element.style.maxWidth = \"100%\";\n          break;\n        case Enums.Size.Small:\n          element.style.width = this.hostConfig.imageSizes.small + \"px\";\n          break;\n        case Enums.Size.Large:\n          element.style.width = this.hostConfig.imageSizes.large + \"px\";\n          break;\n        case Enums.Size.Medium:\n          element.style.width = this.hostConfig.imageSizes.medium + \"px\";\n          break;\n      }\n    }\n  };\n  Object.defineProperty(Image.prototype, \"useDefaultSizing\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Image.prototype.internalRender = function () {\n    var _this = this;\n    var element = null;\n    if (!Utils.isNullOrEmpty(this.url)) {\n      element = document.createElement(\"div\");\n      element.style.display = \"flex\";\n      element.style.alignItems = \"flex-start\";\n      element.onkeypress = function (e) {\n        if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) {\n          // enter or space pressed\n          e.preventDefault();\n          e.cancelBubble = true;\n          _this.selectAction.execute();\n        }\n      };\n      element.onclick = function (e) {\n        if (_this.selectAction) {\n          e.preventDefault();\n          e.cancelBubble = true;\n          _this.selectAction.execute();\n        }\n      };\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.justifyContent = \"center\";\n          break;\n        case Enums.HorizontalAlignment.Right:\n          element.style.justifyContent = \"flex-end\";\n          break;\n        default:\n          element.style.justifyContent = \"flex-start\";\n          break;\n      }\n      // Cache hostConfig to avoid walking the parent hierarchy multiple times\n      var hostConfig = this.hostConfig;\n      var imageElement = document.createElement(\"img\");\n      imageElement.onload = function (e) {\n        raiseImageLoadedEvent(_this);\n      };\n      imageElement.onerror = function (e) {\n        var card = _this.getRootElement();\n        _this.renderedElement.innerHTML = \"\";\n        if (card && card.designMode) {\n          var errorElement = document.createElement(\"div\");\n          errorElement.style.display = \"flex\";\n          errorElement.style.alignItems = \"center\";\n          errorElement.style.justifyContent = \"center\";\n          errorElement.style.backgroundColor = \"#EEEEEE\";\n          errorElement.style.color = \"black\";\n          errorElement.innerText = \":-(\";\n          errorElement.style.padding = \"10px\";\n          _this.applySize(errorElement);\n          _this.renderedElement.appendChild(errorElement);\n        }\n        raiseImageLoadedEvent(_this);\n      };\n      imageElement.style.maxHeight = \"100%\";\n      imageElement.style.minWidth = \"0\";\n      imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\n      if (this.selectAction != null && hostConfig.supportsInteractivity) {\n        imageElement.tabIndex = 0;\n        imageElement.setAttribute(\"role\", this.selectAction.getAriaRole());\n        imageElement.setAttribute(\"aria-label\", this.selectAction.title);\n        imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n      }\n      this.applySize(imageElement);\n      if (this.style === Enums.ImageStyle.Person) {\n        imageElement.style.borderRadius = \"50%\";\n        imageElement.style.backgroundPosition = \"50% 50%\";\n        imageElement.style.backgroundRepeat = \"no-repeat\";\n      }\n      if (!Utils.isNullOrEmpty(this.backgroundColor)) {\n        imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);\n      }\n      imageElement.src = this.url;\n      if (!Utils.isNullOrEmpty(this.altText)) {\n        imageElement.alt = this.altText;\n      }\n      element.appendChild(imageElement);\n    }\n    return element;\n  };\n  Image.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    if (this._selectAction) {\n      Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\n    }\n    Utils.setEnumProperty(Enums.ImageStyle, result, \"style\", this.style, Enums.ImageStyle.Default);\n    Utils.setProperty(result, \"backgroundColor\", this.backgroundColor);\n    Utils.setProperty(result, \"url\", this.url);\n    Utils.setEnumProperty(Enums.Size, result, \"size\", this.size, Enums.Size.Auto);\n    if (this.pixelWidth) {\n      Utils.setProperty(result, \"width\", this.pixelWidth + \"px\");\n    }\n    if (this.pixelHeight) {\n      Utils.setProperty(result, \"height\", this.pixelHeight + \"px\");\n    }\n    Utils.setProperty(result, \"altText\", this.altText);\n    return result;\n  };\n  Image.prototype.getJsonTypeName = function () {\n    return \"Image\";\n  };\n  Image.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n    if (!result && this.selectAction) {\n      result = this.selectAction.getActionById(id);\n    }\n    return result;\n  };\n  Image.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.url = Utils.getStringValue(json[\"url\"]);\n    this.backgroundColor = Utils.getStringValue(json[\"backgroundColor\"]);\n    var styleString = Utils.getStringValue(json[\"style\"]);\n    if (styleString && styleString.toLowerCase() === \"normal\") {\n      this.style = Enums.ImageStyle.Default;\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The Image.style value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\n      }, errors);\n    } else {\n      this.style = Utils.getEnumValue(Enums.ImageStyle, styleString, this.style);\n    }\n    this.size = Utils.getEnumValue(Enums.Size, json[\"size\"], this.size);\n    this.altText = Utils.getStringValue(json[\"altText\"]);\n    // pixelWidth and pixelHeight are only parsed for backwards compatibility.\n    // Payloads should use the width and height proerties instead.\n    if (json[\"pixelWidth\"] && typeof json[\"pixelWidth\"] === \"number\") {\n      this.pixelWidth = json[\"pixelWidth\"];\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The pixelWidth property is deprecated and will be removed. Use the width property instead.\"\n      }, errors);\n    }\n    if (json[\"pixelHeight\"] && typeof json[\"pixelHeight\"] === \"number\") {\n      this.pixelHeight = json[\"pixelHeight\"];\n      raiseParseError({\n        error: Enums.ValidationError.Deprecated,\n        message: \"The pixelHeight property is deprecated and will be removed. Use the height property instead.\"\n      }, errors);\n    }\n    var size = this.parseDimension(\"width\", json[\"width\"], errors);\n    if (size > 0) {\n      this.pixelWidth = size;\n    }\n    size = this.parseDimension(\"height\", json[\"height\"], errors);\n    if (size > 0) {\n      this.pixelHeight = size;\n    }\n    this.selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n  };\n  Image.prototype.getResourceInformation = function () {\n    if (!Utils.isNullOrEmpty(this.url)) {\n      return [{\n        url: this.url,\n        mimeType: \"image\"\n      }];\n    } else {\n      return [];\n    }\n  };\n  Object.defineProperty(Image.prototype, \"selectAction\", {\n    get: function () {\n      return this._selectAction;\n    },\n    set: function (value) {\n      this._selectAction = value;\n      if (this._selectAction) {\n        this._selectAction.setParent(this);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Image;\n}(CardElement);\nexports.Image = Image;\nvar CardElementContainer = /** @class */function (_super) {\n  __extends(CardElementContainer, _super);\n  function CardElementContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._selectAction = null;\n    _this.allowVerticalOverflow = false;\n    return _this;\n  }\n  CardElementContainer.prototype.isElementAllowed = function (element, forbiddenElementTypes) {\n    if (!this.hostConfig.supportsInteractivity && element.isInteractive) {\n      return false;\n    }\n    if (forbiddenElementTypes) {\n      for (var _i = 0, forbiddenElementTypes_1 = forbiddenElementTypes; _i < forbiddenElementTypes_1.length; _i++) {\n        var forbiddenElementType = forbiddenElementTypes_1[_i];\n        if (element.getJsonTypeName() === forbiddenElementType) {\n          return false;\n        }\n      }\n    }\n    return true;\n  };\n  CardElementContainer.prototype.applyPadding = function () {\n    _super.prototype.applyPadding.call(this);\n    if (!this.renderedElement) {\n      return;\n    }\n    var physicalPadding = new Shared.SpacingDefinition();\n    if (this.getEffectivePadding()) {\n      physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\n    }\n    this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\n    this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\n    this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\n    this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\n    this.renderedElement.style.marginRight = \"0\";\n    this.renderedElement.style.marginLeft = \"0\";\n  };\n  CardElementContainer.prototype.getSelectAction = function () {\n    return this._selectAction;\n  };\n  CardElementContainer.prototype.setSelectAction = function (value) {\n    this._selectAction = value;\n    if (this._selectAction) {\n      this._selectAction.setParent(this);\n    }\n  };\n  Object.defineProperty(CardElementContainer.prototype, \"isSelectable\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CardElementContainer.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    if (this.isSelectable) {\n      this._selectAction = createActionInstance(this, json[\"selectAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n    }\n  };\n  CardElementContainer.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    if (this._selectAction && this.isSelectable) {\n      Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\n    }\n    return result;\n  };\n  CardElementContainer.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    for (var i = 0; i < this.getItemCount(); i++) {\n      var item = this.getItemAt(i);\n      if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.InteractivityNotAllowed,\n          message: \"Interactivity is not allowed.\"\n        });\n      }\n      if (!this.isElementAllowed(item, this.getForbiddenElementTypes())) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.InteractivityNotAllowed,\n          message: \"Elements of type \" + item.getJsonTypeName() + \" are not allowed in this container.\"\n        });\n      }\n      item.internalValidateProperties(context);\n    }\n    if (this._selectAction) {\n      this._selectAction.internalValidateProperties(context);\n    }\n  };\n  CardElementContainer.prototype.render = function () {\n    var _this = this;\n    var element = _super.prototype.render.call(this);\n    var hostConfig = this.hostConfig;\n    if (this.allowVerticalOverflow) {\n      element.style.overflowX = \"hidden\";\n      element.style.overflowY = \"auto\";\n    }\n    if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {\n      element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n      element.tabIndex = 0;\n      element.setAttribute(\"role\", this._selectAction.getAriaRole());\n      element.setAttribute(\"aria-label\", this._selectAction.title);\n      element.onclick = function (e) {\n        if (_this._selectAction != null) {\n          e.preventDefault();\n          e.cancelBubble = true;\n          _this._selectAction.execute();\n        }\n      };\n      element.onkeypress = function (e) {\n        if (_this._selectAction != null && (e.keyCode == 13 || e.keyCode == 32)) {\n          // Enter or space pressed\n          e.preventDefault();\n          e.cancelBubble = true;\n          _this._selectAction.execute();\n        }\n      };\n    }\n    return element;\n  };\n  CardElementContainer.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n    _super.prototype.updateLayout.call(this, processChildren);\n    if (processChildren) {\n      for (var i = 0; i < this.getItemCount(); i++) {\n        this.getItemAt(i).updateLayout();\n      }\n    }\n  };\n  CardElementContainer.prototype.getAllInputs = function () {\n    var result = [];\n    for (var i = 0; i < this.getItemCount(); i++) {\n      result = result.concat(this.getItemAt(i).getAllInputs());\n    }\n    return result;\n  };\n  CardElementContainer.prototype.getResourceInformation = function () {\n    var result = [];\n    for (var i = 0; i < this.getItemCount(); i++) {\n      result = result.concat(this.getItemAt(i).getResourceInformation());\n    }\n    return result;\n  };\n  CardElementContainer.prototype.getElementById = function (id) {\n    var result = _super.prototype.getElementById.call(this, id);\n    if (!result) {\n      for (var i = 0; i < this.getItemCount(); i++) {\n        result = this.getItemAt(i).getElementById(id);\n        if (result) {\n          break;\n        }\n      }\n    }\n    return result;\n  };\n  return CardElementContainer;\n}(CardElement);\nexports.CardElementContainer = CardElementContainer;\nvar ImageSet = /** @class */function (_super) {\n  __extends(ImageSet, _super);\n  function ImageSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._images = [];\n    _this.imageSize = Enums.Size.Medium;\n    return _this;\n  }\n  ImageSet.prototype.internalRender = function () {\n    var element = null;\n    if (this._images.length > 0) {\n      element = document.createElement(\"div\");\n      element.style.display = \"flex\";\n      element.style.flexWrap = \"wrap\";\n      for (var i = 0; i < this._images.length; i++) {\n        this._images[i].size = this.imageSize;\n        var renderedImage = this._images[i].render();\n        renderedImage.style.display = \"inline-flex\";\n        renderedImage.style.margin = \"0px\";\n        renderedImage.style.marginRight = \"10px\";\n        renderedImage.style.maxHeight = this.hostConfig.imageSet.maxImageHeight + \"px\";\n        Utils.appendChild(element, renderedImage);\n      }\n    }\n    return element;\n  };\n  ImageSet.prototype.getItemCount = function () {\n    return this._images.length;\n  };\n  ImageSet.prototype.getItemAt = function (index) {\n    return this._images[index];\n  };\n  ImageSet.prototype.getFirstVisibleRenderedItem = function () {\n    return this._images && this._images.length > 0 ? this._images[0] : null;\n  };\n  ImageSet.prototype.getLastVisibleRenderedItem = function () {\n    return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : null;\n  };\n  ImageSet.prototype.removeItem = function (item) {\n    if (item instanceof Image) {\n      var itemIndex = this._images.indexOf(item);\n      if (itemIndex >= 0) {\n        this._images.splice(itemIndex, 1);\n        item.setParent(null);\n        this.updateLayout();\n        return true;\n      }\n    }\n    return false;\n  };\n  ImageSet.prototype.getJsonTypeName = function () {\n    return \"ImageSet\";\n  };\n  ImageSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setEnumProperty(Enums.Size, result, \"imageSize\", this.imageSize, Enums.Size.Medium);\n    if (this._images.length > 0) {\n      var images = [];\n      for (var _i = 0, _a = this._images; _i < _a.length; _i++) {\n        var image = _a[_i];\n        images.push(image.toJSON());\n      }\n      Utils.setProperty(result, \"images\", images);\n    }\n    return result;\n  };\n  ImageSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.imageSize = Utils.getEnumValue(Enums.Size, json[\"imageSize\"], Enums.Size.Medium);\n    if (json[\"images\"] != null) {\n      var jsonImages = json[\"images\"];\n      this._images = [];\n      for (var i = 0; i < jsonImages.length; i++) {\n        var image = new Image();\n        image.parse(jsonImages[i], errors);\n        this.addImage(image);\n      }\n    }\n  };\n  ImageSet.prototype.addImage = function (image) {\n    if (!image.parent) {\n      this._images.push(image);\n      image.setParent(this);\n    } else {\n      throw new Error(\"This image already belongs to another ImageSet\");\n    }\n  };\n  ImageSet.prototype.indexOf = function (cardElement) {\n    return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\n  };\n  return ImageSet;\n}(CardElementContainer);\nexports.ImageSet = ImageSet;\nvar MediaSource = /** @class */function (_super) {\n  __extends(MediaSource, _super);\n  function MediaSource(url, mimeType) {\n    if (url === void 0) {\n      url = undefined;\n    }\n    if (mimeType === void 0) {\n      mimeType = undefined;\n    }\n    var _this = _super.call(this) || this;\n    _this.url = url;\n    _this.mimeType = mimeType;\n    return _this;\n  }\n  MediaSource.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.mimeType = Utils.getStringValue(json[\"mimeType\"]);\n    this.url = Utils.getStringValue(json[\"url\"]);\n  };\n  MediaSource.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"mimeType\", this.mimeType);\n    Utils.setProperty(result, \"url\", this.url);\n    return result;\n  };\n  return MediaSource;\n}(SerializableObject);\nexports.MediaSource = MediaSource;\nvar Media = /** @class */function (_super) {\n  __extends(Media, _super);\n  function Media() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.sources = [];\n    return _this;\n  }\n  Media.prototype.getPosterUrl = function () {\n    return this.poster ? this.poster : this.hostConfig.media.defaultPoster;\n  };\n  Media.prototype.processSources = function () {\n    this._selectedSources = [];\n    this._selectedMediaType = undefined;\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var source = _a[_i];\n      var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];\n      if (mimeComponents.length == 2) {\n        if (!this._selectedMediaType) {\n          var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);\n          if (index >= 0) {\n            this._selectedMediaType = Media.supportedMediaTypes[index];\n          }\n        }\n        if (mimeComponents[0] == this._selectedMediaType) {\n          this._selectedSources.push(source);\n        }\n      }\n    }\n  };\n  Media.prototype.renderPoster = function () {\n    var _this = this;\n    var playButtonArrowWidth = 12;\n    var playButtonArrowHeight = 15;\n    var posterRootElement = document.createElement(\"div\");\n    posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\n    posterRootElement.setAttribute(\"role\", \"contentinfo\");\n    posterRootElement.setAttribute(\"aria-label\", this.altText ? this.altText : \"Media content\");\n    posterRootElement.style.position = \"relative\";\n    posterRootElement.style.display = \"flex\";\n    var posterUrl = this.getPosterUrl();\n    if (posterUrl) {\n      var posterImageElement_1 = document.createElement(\"img\");\n      posterImageElement_1.style.width = \"100%\";\n      posterImageElement_1.style.height = \"100%\";\n      posterImageElement_1.onerror = function (e) {\n        posterImageElement_1.parentNode.removeChild(posterImageElement_1);\n        posterRootElement.classList.add(\"empty\");\n        posterRootElement.style.minHeight = \"150px\";\n      };\n      posterImageElement_1.src = posterUrl;\n      posterRootElement.appendChild(posterImageElement_1);\n    } else {\n      posterRootElement.classList.add(\"empty\");\n      posterRootElement.style.minHeight = \"150px\";\n    }\n    if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {\n      var playButtonOuterElement = document.createElement(\"div\");\n      playButtonOuterElement.setAttribute(\"role\", \"button\");\n      playButtonOuterElement.setAttribute(\"aria-label\", \"Play media\");\n      playButtonOuterElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton\");\n      playButtonOuterElement.style.display = \"flex\";\n      playButtonOuterElement.style.alignItems = \"center\";\n      playButtonOuterElement.style.justifyContent = \"center\";\n      playButtonOuterElement.onclick = function (e) {\n        if (_this.hostConfig.media.allowInlinePlayback) {\n          e.preventDefault();\n          e.cancelBubble = true;\n          var mediaPlayerElement = _this.renderMediaPlayer();\n          _this.renderedElement.innerHTML = \"\";\n          _this.renderedElement.appendChild(mediaPlayerElement);\n          mediaPlayerElement.play();\n        } else {\n          if (Media.onPlay) {\n            e.preventDefault();\n            e.cancelBubble = true;\n            Media.onPlay(_this);\n          }\n        }\n      };\n      var playButtonInnerElement = document.createElement(\"div\");\n      playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\n      playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\n      playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\n      playButtonInnerElement.style.borderTopWidth = playButtonArrowHeight / 2 + \"px\";\n      playButtonInnerElement.style.borderBottomWidth = playButtonArrowHeight / 2 + \"px\";\n      playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\n      playButtonInnerElement.style.borderRightWidth = \"0\";\n      playButtonInnerElement.style.borderStyle = \"solid\";\n      playButtonInnerElement.style.borderTopColor = \"transparent\";\n      playButtonInnerElement.style.borderRightColor = \"transparent\";\n      playButtonInnerElement.style.borderBottomColor = \"transparent\";\n      playButtonInnerElement.style.transform = \"translate(\" + playButtonArrowWidth / 10 + \"px,0px)\";\n      playButtonOuterElement.appendChild(playButtonInnerElement);\n      var playButtonContainer = document.createElement(\"div\");\n      playButtonContainer.style.position = \"absolute\";\n      playButtonContainer.style.left = \"0\";\n      playButtonContainer.style.top = \"0\";\n      playButtonContainer.style.width = \"100%\";\n      playButtonContainer.style.height = \"100%\";\n      playButtonContainer.style.display = \"flex\";\n      playButtonContainer.style.justifyContent = \"center\";\n      playButtonContainer.style.alignItems = \"center\";\n      playButtonContainer.appendChild(playButtonOuterElement);\n      posterRootElement.appendChild(playButtonContainer);\n    }\n    return posterRootElement;\n  };\n  Media.prototype.renderMediaPlayer = function () {\n    var mediaElement;\n    if (this._selectedMediaType == \"video\") {\n      var videoPlayer = document.createElement(\"video\");\n      var posterUrl = this.getPosterUrl();\n      if (posterUrl) {\n        videoPlayer.poster = posterUrl;\n      }\n      mediaElement = videoPlayer;\n    } else {\n      mediaElement = document.createElement(\"audio\");\n    }\n    mediaElement.controls = true;\n    mediaElement.preload = \"none\";\n    mediaElement.style.width = \"100%\";\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var source = _a[_i];\n      var src = document.createElement(\"source\");\n      src.src = source.url;\n      src.type = source.mimeType;\n      mediaElement.appendChild(src);\n    }\n    return mediaElement;\n  };\n  Media.prototype.internalRender = function () {\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-media\");\n    this.processSources();\n    element.appendChild(this.renderPoster());\n    return element;\n  };\n  Media.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.poster = Utils.getStringValue(json[\"poster\"]);\n    this.altText = Utils.getStringValue(json[\"altText\"]);\n    this.sources = [];\n    if (Array.isArray(json[\"sources\"])) {\n      for (var _i = 0, _a = json[\"sources\"]; _i < _a.length; _i++) {\n        var jsonSource = _a[_i];\n        var source = new MediaSource();\n        source.parse(jsonSource, errors);\n        this.sources.push(source);\n      }\n    }\n  };\n  Media.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"poster\", this.poster);\n    Utils.setProperty(result, \"altText\", this.altText);\n    /*\r\n    if (this.sources.length > 0) {\r\n        let serializedSources = [];\r\n          for (let source of this.sources) {\r\n            serializedSources.push(source.toJSON());\r\n        }\r\n          Utils.setProperty(result, \"sources\", serializedSources);\r\n    }\r\n    */\n    Utils.setArrayProperty(result, \"sources\", this.sources);\n    return result;\n  };\n  Media.prototype.getJsonTypeName = function () {\n    return \"Media\";\n  };\n  Media.prototype.getResourceInformation = function () {\n    var result = [];\n    var posterUrl = this.getPosterUrl();\n    if (!Utils.isNullOrEmpty(posterUrl)) {\n      result.push({\n        url: posterUrl,\n        mimeType: \"image\"\n      });\n    }\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var mediaSource = _a[_i];\n      if (!Utils.isNullOrEmpty(mediaSource.url)) {\n        result.push({\n          url: mediaSource.url,\n          mimeType: mediaSource.mimeType\n        });\n      }\n    }\n    return result;\n  };\n  Object.defineProperty(Media.prototype, \"selectedMediaType\", {\n    get: function () {\n      return this._selectedMediaType;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Media.supportedMediaTypes = [\"audio\", \"video\"];\n  return Media;\n}(CardElement);\nexports.Media = Media;\nvar InputValidationOptions = /** @class */function (_super) {\n  __extends(InputValidationOptions, _super);\n  function InputValidationOptions() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.necessity = Enums.InputValidationNecessity.Optional;\n    _this.errorMessage = undefined;\n    return _this;\n  }\n  InputValidationOptions.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n    this.necessity = Utils.getEnumValue(Enums.InputValidationNecessity, json[\"necessity\"], this.necessity);\n    this.errorMessage = Utils.getStringValue(json[\"errorMessage\"]);\n  };\n  InputValidationOptions.prototype.toJSON = function () {\n    if (this.necessity != Enums.InputValidationNecessity.Optional || !Utils.isNullOrEmpty(this.errorMessage)) {\n      var result = _super.prototype.toJSON.call(this);\n      Utils.setEnumProperty(Enums.InputValidationNecessity, result, \"necessity\", this.necessity, Enums.InputValidationNecessity.Optional);\n      Utils.setProperty(result, \"errorMessage\", this.errorMessage);\n      return result;\n    } else {\n      return null;\n    }\n  };\n  return InputValidationOptions;\n}(SerializableObject);\nexports.InputValidationOptions = InputValidationOptions;\nvar Input = /** @class */function (_super) {\n  __extends(Input, _super);\n  function Input() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.validation = new InputValidationOptions();\n    return _this;\n  }\n  Object.defineProperty(Input.prototype, \"isNullable\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"renderedInputControlElement\", {\n    get: function () {\n      return this._renderedInputControlElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"inputControlContainerElement\", {\n    get: function () {\n      return this._inputControlContainerElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Input.prototype.overrideInternalRender = function () {\n    var hostConfig = this.hostConfig;\n    this._outerContainerElement = document.createElement(\"div\");\n    this._outerContainerElement.style.display = \"flex\";\n    this._outerContainerElement.style.flexDirection = \"column\";\n    this._inputControlContainerElement = document.createElement(\"div\");\n    this._inputControlContainerElement.className = hostConfig.makeCssClassName(\"ac-input-container\");\n    this._inputControlContainerElement.style.display = \"flex\";\n    this._renderedInputControlElement = this.internalRender();\n    this._renderedInputControlElement.style.minWidth = \"0px\";\n    if (AdaptiveCard.useBuiltInInputValidation && this.isNullable && this.validation.necessity == Enums.InputValidationNecessity.RequiredWithVisualCue) {\n      this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\n    }\n    this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\n    this._outerContainerElement.appendChild(this._inputControlContainerElement);\n    return this._outerContainerElement;\n  };\n  Input.prototype.valueChanged = function () {\n    this.resetValidationFailureCue();\n    if (this.onValueChanged) {\n      this.onValueChanged(this);\n    }\n    raiseInputValueChangedEvent(this);\n  };\n  Input.prototype.resetValidationFailureCue = function () {\n    if (AdaptiveCard.useBuiltInInputValidation && this.renderedElement) {\n      this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\n      if (this._errorMessageElement) {\n        this._outerContainerElement.removeChild(this._errorMessageElement);\n        this._errorMessageElement = null;\n      }\n    }\n  };\n  Input.prototype.showValidationErrorMessage = function () {\n    if (this.renderedElement && AdaptiveCard.useBuiltInInputValidation && AdaptiveCard.displayInputValidationErrors && !Utils.isNullOrEmpty(this.validation.errorMessage)) {\n      this._errorMessageElement = document.createElement(\"span\");\n      this._errorMessageElement.className = this.hostConfig.makeCssClassName(\"ac-input-validation-error-message\");\n      this._errorMessageElement.textContent = this.validation.errorMessage;\n      this._outerContainerElement.appendChild(this._errorMessageElement);\n    }\n  };\n  Input.prototype.parseInputValue = function (value) {\n    return value;\n  };\n  Input.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"title\", this.title);\n    Utils.setProperty(result, \"value\", this.renderedElement && !Utils.isNullOrEmpty(this.value) ? this.value : this.defaultValue);\n    if (AdaptiveCard.useBuiltInInputValidation) {\n      Utils.setProperty(result, \"validation\", this.validation.toJSON());\n    }\n    return result;\n  };\n  Input.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (Utils.isNullOrEmpty(this.id)) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"All inputs must have a unique Id\"\n      });\n    }\n  };\n  Input.prototype.validateValue = function () {\n    if (AdaptiveCard.useBuiltInInputValidation) {\n      this.resetValidationFailureCue();\n      var result = this.validation.necessity != Enums.InputValidationNecessity.Optional ? !Utils.isNullOrEmpty(this.value) : true;\n      if (!result && this.renderedElement) {\n        this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\n        this.showValidationErrorMessage();\n      }\n      return result;\n    } else {\n      return true;\n    }\n  };\n  Input.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.id = Utils.getStringValue(json[\"id\"]);\n    this.defaultValue = Utils.getStringValue(json[\"value\"]);\n    if (AdaptiveCard.useBuiltInInputValidation) {\n      var jsonValidation = json[\"validation\"];\n      if (jsonValidation) {\n        this.validation.parse(jsonValidation);\n      }\n    }\n  };\n  Input.prototype.getAllInputs = function () {\n    return [this];\n  };\n  Object.defineProperty(Input.prototype, \"defaultValue\", {\n    get: function () {\n      return this._defaultValue;\n    },\n    set: function (value) {\n      this._defaultValue = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"isInteractive\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Input;\n}(CardElement);\nexports.Input = Input;\nvar TextInput = /** @class */function (_super) {\n  __extends(TextInput, _super);\n  function TextInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isMultiline = false;\n    _this.style = Enums.InputTextStyle.Text;\n    return _this;\n  }\n  TextInput.prototype.internalRender = function () {\n    var _this = this;\n    if (this.isMultiline) {\n      var textareaElement = document.createElement(\"textarea\");\n      textareaElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\n      textareaElement.style.flex = \"1 1 auto\";\n      textareaElement.tabIndex = 0;\n      if (!Utils.isNullOrEmpty(this.placeholder)) {\n        textareaElement.placeholder = this.placeholder;\n        textareaElement.setAttribute(\"aria-label\", this.placeholder);\n      }\n      if (!Utils.isNullOrEmpty(this.defaultValue)) {\n        textareaElement.value = this.defaultValue;\n      }\n      if (this.maxLength && this.maxLength > 0) {\n        textareaElement.maxLength = this.maxLength;\n      }\n      textareaElement.oninput = function () {\n        _this.valueChanged();\n      };\n      textareaElement.onkeypress = function (e) {\n        // Ctrl+Enter pressed\n        if (e.keyCode == 10 && _this.inlineAction) {\n          _this.inlineAction.execute();\n        }\n      };\n      return textareaElement;\n    } else {\n      var inputElement = document.createElement(\"input\");\n      inputElement.type = Enums.InputTextStyle[this.style].toLowerCase();\n      inputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\n      inputElement.style.flex = \"1 1 auto\";\n      inputElement.tabIndex = 0;\n      if (!Utils.isNullOrEmpty(this.placeholder)) {\n        inputElement.placeholder = this.placeholder;\n        inputElement.setAttribute(\"aria-label\", this.placeholder);\n      }\n      if (!Utils.isNullOrEmpty(this.defaultValue)) {\n        inputElement.value = this.defaultValue;\n      }\n      if (this.maxLength && this.maxLength > 0) {\n        inputElement.maxLength = this.maxLength;\n      }\n      inputElement.oninput = function () {\n        _this.valueChanged();\n      };\n      inputElement.onkeypress = function (e) {\n        // Enter pressed\n        if (e.keyCode == 13 && _this.inlineAction) {\n          _this.inlineAction.execute();\n        }\n      };\n      return inputElement;\n    }\n  };\n  TextInput.prototype.overrideInternalRender = function () {\n    var _this = this;\n    var renderedInputControl = _super.prototype.overrideInternalRender.call(this);\n    if (this.inlineAction) {\n      var button_1 = document.createElement(\"button\");\n      button_1.className = this.hostConfig.makeCssClassName(\"ac-inlineActionButton\");\n      button_1.onclick = function (e) {\n        e.preventDefault();\n        e.cancelBubble = true;\n        _this.inlineAction.execute();\n      };\n      if (!Utils.isNullOrEmpty(this.inlineAction.iconUrl)) {\n        button_1.classList.add(\"iconOnly\");\n        var icon_1 = document.createElement(\"img\");\n        icon_1.style.height = \"100%\";\n        // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\n        // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\n        // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\n        // after the image has loaded and been gicven its final size. The below trick also fixes that.\n        icon_1.style.display = \"none\";\n        icon_1.onload = function () {\n          icon_1.style.removeProperty(\"display\");\n        };\n        icon_1.onerror = function () {\n          button_1.removeChild(icon_1);\n          button_1.classList.remove(\"iconOnly\");\n          button_1.classList.add(\"textOnly\");\n          button_1.textContent = !Utils.isNullOrEmpty(_this.inlineAction.title) ? _this.inlineAction.title : \"Title\";\n        };\n        icon_1.src = this.inlineAction.iconUrl;\n        button_1.appendChild(icon_1);\n        if (!Utils.isNullOrEmpty(this.inlineAction.title)) {\n          button_1.title = this.inlineAction.title;\n        }\n      } else {\n        button_1.classList.add(\"textOnly\");\n        button_1.textContent = !Utils.isNullOrEmpty(this.inlineAction.title) ? this.inlineAction.title : \"Title\";\n      }\n      button_1.style.marginLeft = \"8px\";\n      this.inputControlContainerElement.appendChild(button_1);\n    }\n    return renderedInputControl;\n  };\n  TextInput.prototype.getJsonTypeName = function () {\n    return \"Input.Text\";\n  };\n  TextInput.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n    if (!result && this.inlineAction) {\n      result = this.inlineAction.getActionById(id);\n    }\n    return result;\n  };\n  TextInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"placeholder\", this.placeholder);\n    Utils.setNumberProperty(result, \"maxLength\", this.maxLength);\n    Utils.setProperty(result, \"isMultiline\", this.isMultiline, false);\n    Utils.setEnumProperty(Enums.InputTextStyle, result, \"style\", this.style, Enums.InputTextStyle.Text);\n    if (this._inlineAction) {\n      Utils.setProperty(result, \"inlineAction\", this._inlineAction.toJSON());\n    }\n    return result;\n  };\n  TextInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.maxLength = Utils.getNumberValue(json[\"maxLength\"]);\n    this.isMultiline = Utils.getBoolValue(json[\"isMultiline\"], this.isMultiline);\n    this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\n    this.style = Utils.getEnumValue(Enums.InputTextStyle, json[\"style\"], this.style);\n    this.inlineAction = createActionInstance(this, json[\"inlineAction\"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);\n  };\n  Object.defineProperty(TextInput.prototype, \"inlineAction\", {\n    get: function () {\n      return this._inlineAction;\n    },\n    set: function (value) {\n      this._inlineAction = value;\n      if (this._inlineAction) {\n        this._inlineAction.setParent(this);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TextInput.prototype, \"value\", {\n    get: function () {\n      if (this.renderedInputControlElement) {\n        if (this.isMultiline) {\n          return this.renderedInputControlElement.value;\n        } else {\n          return this.renderedInputControlElement.value;\n        }\n      } else {\n        return null;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return TextInput;\n}(Input);\nexports.TextInput = TextInput;\nvar ToggleInput = /** @class */function (_super) {\n  __extends(ToggleInput, _super);\n  function ToggleInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.valueOn = \"true\";\n    _this.valueOff = \"false\";\n    _this.wrap = false;\n    return _this;\n  }\n  ToggleInput.prototype.internalRender = function () {\n    var _this = this;\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\n    element.style.width = \"100%\";\n    element.style.display = \"flex\";\n    element.style.alignItems = \"center\";\n    this._checkboxInputElement = document.createElement(\"input\");\n    this._checkboxInputElement.id = Utils.generateUniqueId();\n    this._checkboxInputElement.type = \"checkbox\";\n    this._checkboxInputElement.style.display = \"inline-block\";\n    this._checkboxInputElement.style.verticalAlign = \"middle\";\n    this._checkboxInputElement.style.margin = \"0\";\n    this._checkboxInputElement.style.flex = \"0 0 auto\";\n    this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\n    this._checkboxInputElement.tabIndex = 0;\n    if (this.defaultValue == this.valueOn) {\n      this._checkboxInputElement.checked = true;\n    }\n    this._checkboxInputElement.onchange = function () {\n      _this.valueChanged();\n    };\n    Utils.appendChild(element, this._checkboxInputElement);\n    if (!Utils.isNullOrEmpty(this.title) || this.isDesignMode()) {\n      var label = new Label();\n      label.setParent(this);\n      label.forElementId = this._checkboxInputElement.id;\n      label.hostConfig = this.hostConfig;\n      label.text = Utils.isNullOrEmpty(this.title) ? this.getJsonTypeName() : this.title;\n      label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\n      label.wrap = this.wrap;\n      var labelElement = label.render();\n      labelElement.style.display = \"inline-block\";\n      labelElement.style.flex = \"1 1 auto\";\n      labelElement.style.marginLeft = \"6px\";\n      labelElement.style.verticalAlign = \"middle\";\n      var spacerElement = document.createElement(\"div\");\n      spacerElement.style.width = \"6px\";\n      Utils.appendChild(element, spacerElement);\n      Utils.appendChild(element, labelElement);\n    }\n    return element;\n  };\n  Object.defineProperty(ToggleInput.prototype, \"isNullable\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ToggleInput.prototype.getJsonTypeName = function () {\n    return \"Input.Toggle\";\n  };\n  ToggleInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"valueOn\", this.valueOn, \"true\");\n    Utils.setProperty(result, \"valueOff\", this.valueOff, \"false\");\n    Utils.setProperty(result, \"wrap\", this.wrap);\n    return result;\n  };\n  ToggleInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.title = Utils.getStringValue(json[\"title\"]);\n    this.valueOn = Utils.getStringValue(json[\"valueOn\"], this.valueOn);\n    this.valueOff = Utils.getStringValue(json[\"valueOff\"], this.valueOff);\n    this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\n  };\n  Object.defineProperty(ToggleInput.prototype, \"value\", {\n    get: function () {\n      if (this._checkboxInputElement) {\n        return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\n      } else {\n        return null;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ToggleInput;\n}(Input);\nexports.ToggleInput = ToggleInput;\nvar Choice = /** @class */function (_super) {\n  __extends(Choice, _super);\n  function Choice(title, value) {\n    if (title === void 0) {\n      title = undefined;\n    }\n    if (value === void 0) {\n      value = undefined;\n    }\n    var _this = _super.call(this) || this;\n    _this.title = title;\n    _this.value = value;\n    return _this;\n  }\n  Choice.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n    this.title = Utils.getStringValue(json[\"title\"], \"\");\n    this.value = Utils.getStringValue(json[\"value\"], \"\");\n  };\n  Choice.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"title\", this.title);\n    Utils.setProperty(result, \"value\", this.value);\n    return result;\n  };\n  return Choice;\n}(SerializableObject);\nexports.Choice = Choice;\nvar ChoiceSetInput = /** @class */function (_super) {\n  __extends(ChoiceSetInput, _super);\n  function ChoiceSetInput() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.choices = [];\n    _this.isCompact = false;\n    _this.isMultiSelect = false;\n    _this.wrap = false;\n    return _this;\n  }\n  ChoiceSetInput.getUniqueCategoryName = function () {\n    var uniqueCwtegoryName = \"__ac-category\" + ChoiceSetInput.uniqueCategoryCounter;\n    ChoiceSetInput.uniqueCategoryCounter++;\n    return uniqueCwtegoryName;\n  };\n  // Make sure `aria-current` is applied to the currently-selected item\n  ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {\n    var options = this._selectElement.options;\n    if (options) {\n      for (var i = 0; i < options.length; i++) {\n        if (options[i].selected) {\n          options[i].setAttribute(\"aria-current\", \"true\");\n        } else {\n          options[i].removeAttribute(\"aria-current\");\n        }\n      }\n    }\n  };\n  ChoiceSetInput.prototype.internalRender = function () {\n    var _this = this;\n    if (!this.isMultiSelect) {\n      if (this.isCompact) {\n        // Render as a combo box\n        this._selectElement = document.createElement(\"select\");\n        this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\n        this._selectElement.style.width = \"100%\";\n        var option = document.createElement(\"option\");\n        option.selected = true;\n        option.disabled = true;\n        option.hidden = true;\n        option.value = \"\";\n        if (this.placeholder) {\n          option.text = this.placeholder;\n        }\n        Utils.appendChild(this._selectElement, option);\n        for (var i = 0; i < this.choices.length; i++) {\n          var option_1 = document.createElement(\"option\");\n          option_1.value = this.choices[i].value;\n          option_1.text = this.choices[i].title;\n          option_1.setAttribute(\"aria-label\", this.choices[i].title);\n          if (this.choices[i].value == this.defaultValue) {\n            option_1.selected = true;\n          }\n          Utils.appendChild(this._selectElement, option_1);\n        }\n        this._selectElement.onchange = function () {\n          _this.internalApplyAriaCurrent();\n          _this.valueChanged();\n        };\n        this.internalApplyAriaCurrent();\n        return this._selectElement;\n      } else {\n        // Render as a series of radio buttons\n        var uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\n        var element = document.createElement(\"div\");\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-expanded\");\n        element.style.width = \"100%\";\n        this._toggleInputs = [];\n        for (var i_1 = 0; i_1 < this.choices.length; i_1++) {\n          var radioInput = document.createElement(\"input\");\n          radioInput.id = Utils.generateUniqueId();\n          radioInput.type = \"radio\";\n          radioInput.style.margin = \"0\";\n          radioInput.style.display = \"inline-block\";\n          radioInput.style.verticalAlign = \"middle\";\n          radioInput.name = Utils.isNullOrEmpty(this.id) ? uniqueCategoryName : this.id;\n          radioInput.value = this.choices[i_1].value;\n          radioInput.style.flex = \"0 0 auto\";\n          radioInput.setAttribute(\"aria-label\", this.choices[i_1].title);\n          if (this.choices[i_1].value == this.defaultValue) {\n            radioInput.checked = true;\n          }\n          radioInput.onchange = function () {\n            _this.valueChanged();\n          };\n          this._toggleInputs.push(radioInput);\n          var label = new Label();\n          label.setParent(this);\n          label.forElementId = radioInput.id;\n          label.hostConfig = this.hostConfig;\n          label.text = Utils.isNullOrEmpty(this.choices[i_1].title) ? \"Choice \" + i_1 : this.choices[i_1].title;\n          label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\n          label.wrap = this.wrap;\n          var labelElement = label.render();\n          labelElement.style.display = \"inline-block\";\n          labelElement.style.flex = \"1 1 auto\";\n          labelElement.style.marginLeft = \"6px\";\n          labelElement.style.verticalAlign = \"middle\";\n          var spacerElement = document.createElement(\"div\");\n          spacerElement.style.width = \"6px\";\n          var compoundInput = document.createElement(\"div\");\n          compoundInput.style.display = \"flex\";\n          compoundInput.style.alignItems = \"center\";\n          Utils.appendChild(compoundInput, radioInput);\n          Utils.appendChild(compoundInput, spacerElement);\n          Utils.appendChild(compoundInput, labelElement);\n          Utils.appendChild(element, compoundInput);\n        }\n        return element;\n      }\n    } else {\n      // Render as a list of toggle inputs\n      var defaultValues = this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : null;\n      var element = document.createElement(\"div\");\n      element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-multiSelect\");\n      element.style.width = \"100%\";\n      this._toggleInputs = [];\n      for (var i_2 = 0; i_2 < this.choices.length; i_2++) {\n        var checkboxInput = document.createElement(\"input\");\n        checkboxInput.id = Utils.generateUniqueId();\n        checkboxInput.type = \"checkbox\";\n        checkboxInput.style.margin = \"0\";\n        checkboxInput.style.display = \"inline-block\";\n        checkboxInput.style.verticalAlign = \"middle\";\n        checkboxInput.value = this.choices[i_2].value;\n        checkboxInput.style.flex = \"0 0 auto\";\n        checkboxInput.setAttribute(\"aria-label\", this.choices[i_2].title);\n        if (defaultValues) {\n          if (defaultValues.indexOf(this.choices[i_2].value) >= 0) {\n            checkboxInput.checked = true;\n          }\n        }\n        checkboxInput.onchange = function () {\n          _this.valueChanged();\n        };\n        this._toggleInputs.push(checkboxInput);\n        var label = new Label();\n        label.setParent(this);\n        label.forElementId = checkboxInput.id;\n        label.hostConfig = this.hostConfig;\n        label.text = Utils.isNullOrEmpty(this.choices[i_2].title) ? \"Choice \" + i_2 : this.choices[i_2].title;\n        label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\n        label.wrap = this.wrap;\n        var labelElement = label.render();\n        labelElement.style.display = \"inline-block\";\n        labelElement.style.flex = \"1 1 auto\";\n        labelElement.style.marginLeft = \"6px\";\n        labelElement.style.verticalAlign = \"middle\";\n        var spacerElement = document.createElement(\"div\");\n        spacerElement.style.width = \"6px\";\n        var compoundInput = document.createElement(\"div\");\n        compoundInput.style.display = \"flex\";\n        compoundInput.style.alignItems = \"center\";\n        Utils.appendChild(compoundInput, checkboxInput);\n        Utils.appendChild(compoundInput, spacerElement);\n        Utils.appendChild(compoundInput, labelElement);\n        Utils.appendChild(element, compoundInput);\n      }\n      return element;\n    }\n  };\n  ChoiceSetInput.prototype.getJsonTypeName = function () {\n    return \"Input.ChoiceSet\";\n  };\n  ChoiceSetInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"placeholder\", this.placeholder);\n    /*\r\n    let choices = [];\r\n      if (this.choices) {\r\n        for (let choice of this.choices) {\r\n            choices.push(choice.toJSON());\r\n        }\r\n    }\r\n      Utils.setProperty(result, \"choices\", choices);\r\n    */\n    Utils.setArrayProperty(result, \"choices\", this.choices);\n    Utils.setProperty(result, \"style\", this.isCompact ? null : \"expanded\");\n    Utils.setProperty(result, \"isMultiSelect\", this.isMultiSelect, false);\n    Utils.setProperty(result, \"wrap\", this.wrap, false);\n    return result;\n  };\n  ChoiceSetInput.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (this.choices.length == 0) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.CollectionCantBeEmpty,\n        message: \"An Input.ChoiceSet must have at least one choice defined.\"\n      });\n    }\n    for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\n      var choice = _a[_i];\n      if (!choice.title || !choice.value) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.PropertyCantBeNull,\n          message: \"All choices in an Input.ChoiceSet must have their title and value properties set.\"\n        });\n      }\n    }\n  };\n  ChoiceSetInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.isCompact = !(json[\"style\"] === \"expanded\");\n    this.isMultiSelect = Utils.getBoolValue(json[\"isMultiSelect\"], this.isMultiSelect);\n    this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\n    this.choices = [];\n    if (Array.isArray(json[\"choices\"])) {\n      for (var _i = 0, _a = json[\"choices\"]; _i < _a.length; _i++) {\n        var jsonChoice = _a[_i];\n        var choice = new Choice();\n        choice.parse(jsonChoice);\n        this.choices.push(choice);\n      }\n    }\n    this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\n  };\n  Object.defineProperty(ChoiceSetInput.prototype, \"value\", {\n    get: function () {\n      if (!this.isMultiSelect) {\n        if (this.isCompact) {\n          if (this._selectElement) {\n            return this._selectElement.selectedIndex > 0 ? this._selectElement.value : null;\n          }\n          return null;\n        } else {\n          if (!this._toggleInputs || this._toggleInputs.length == 0) {\n            return null;\n          }\n          for (var i = 0; i < this._toggleInputs.length; i++) {\n            if (this._toggleInputs[i].checked) {\n              return this._toggleInputs[i].value;\n            }\n          }\n          return null;\n        }\n      } else {\n        if (!this._toggleInputs || this._toggleInputs.length == 0) {\n          return null;\n        }\n        var result = \"\";\n        for (var i = 0; i < this._toggleInputs.length; i++) {\n          if (this._toggleInputs[i].checked) {\n            if (result != \"\") {\n              result += this.hostConfig.choiceSetInputValueSeparator;\n            }\n            result += this._toggleInputs[i].value;\n          }\n        }\n        return result == \"\" ? null : result;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ChoiceSetInput.uniqueCategoryCounter = 0;\n  return ChoiceSetInput;\n}(Input);\nexports.ChoiceSetInput = ChoiceSetInput;\nvar NumberInput = /** @class */function (_super) {\n  __extends(NumberInput, _super);\n  function NumberInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  NumberInput.prototype.internalRender = function () {\n    var _this = this;\n    this._numberInputElement = document.createElement(\"input\");\n    this._numberInputElement.setAttribute(\"type\", \"number\");\n    if (this.min) {\n      this._numberInputElement.setAttribute(\"min\", this.min.toString());\n    }\n    if (this.max) {\n      this._numberInputElement.setAttribute(\"max\", this.max.toString());\n    }\n    this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\n    this._numberInputElement.style.width = \"100%\";\n    this._numberInputElement.tabIndex = 0;\n    if (!Utils.isNullOrEmpty(this.defaultValue)) {\n      this._numberInputElement.value = this.defaultValue;\n    }\n    if (!Utils.isNullOrEmpty(this.placeholder)) {\n      this._numberInputElement.placeholder = this.placeholder;\n      this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\n    }\n    this._numberInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n    return this._numberInputElement;\n  };\n  NumberInput.prototype.getJsonTypeName = function () {\n    return \"Input.Number\";\n  };\n  NumberInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"placeholder\", this.placeholder);\n    Utils.setNumberProperty(result, \"min\", this.min);\n    Utils.setNumberProperty(result, \"max\", this.max);\n    return result;\n  };\n  NumberInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\n    this.min = Utils.getNumberValue(json[\"min\"]);\n    this.max = Utils.getNumberValue(json[\"max\"]);\n  };\n  Object.defineProperty(NumberInput.prototype, \"min\", {\n    get: function () {\n      return this._min;\n    },\n    set: function (value) {\n      this._min = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberInput.prototype, \"max\", {\n    get: function () {\n      return this._max;\n    },\n    set: function (value) {\n      this._max = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberInput.prototype, \"value\", {\n    get: function () {\n      return this._numberInputElement ? this._numberInputElement.value : undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NumberInput.prototype, \"valueAsNumber\", {\n    get: function () {\n      return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return NumberInput;\n}(Input);\nexports.NumberInput = NumberInput;\nvar DateInput = /** @class */function (_super) {\n  __extends(DateInput, _super);\n  function DateInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DateInput.prototype.internalRender = function () {\n    var _this = this;\n    this._dateInputElement = document.createElement(\"input\");\n    this._dateInputElement.setAttribute(\"type\", \"date\");\n    this._dateInputElement.setAttribute(\"min\", this.min);\n    this._dateInputElement.setAttribute(\"max\", this.max);\n    this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\n    this._dateInputElement.style.width = \"100%\";\n    this._dateInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n    if (!Utils.isNullOrEmpty(this.defaultValue)) {\n      this._dateInputElement.value = this.defaultValue;\n    }\n    return this._dateInputElement;\n  };\n  DateInput.prototype.getJsonTypeName = function () {\n    return \"Input.Date\";\n  };\n  DateInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"min\", this.min);\n    Utils.setProperty(result, \"max\", this.max);\n    return result;\n  };\n  DateInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.min = Utils.getStringValue(json[\"min\"]);\n    this.max = Utils.getStringValue(json[\"max\"]);\n  };\n  Object.defineProperty(DateInput.prototype, \"min\", {\n    get: function () {\n      return this._min;\n    },\n    set: function (value) {\n      this._min = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateInput.prototype, \"max\", {\n    get: function () {\n      return this._max;\n    },\n    set: function (value) {\n      this._max = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateInput.prototype, \"value\", {\n    get: function () {\n      return this._dateInputElement ? this._dateInputElement.value : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return DateInput;\n}(Input);\nexports.DateInput = DateInput;\nvar TimeInput = /** @class */function (_super) {\n  __extends(TimeInput, _super);\n  function TimeInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  TimeInput.prototype.internalRender = function () {\n    var _this = this;\n    this._timeInputElement = document.createElement(\"input\");\n    this._timeInputElement.setAttribute(\"type\", \"time\");\n    this._timeInputElement.setAttribute(\"min\", this.min);\n    this._timeInputElement.setAttribute(\"max\", this.max);\n    this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\n    this._timeInputElement.style.width = \"100%\";\n    this._timeInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n    if (!Utils.isNullOrEmpty(this.defaultValue)) {\n      this._timeInputElement.value = this.defaultValue;\n    }\n    return this._timeInputElement;\n  };\n  TimeInput.prototype.parseInputValue = function (value) {\n    if (/^[0-9]{2}:[0-9]{2}$/.test(value)) {\n      return value;\n    } else {\n      return null;\n    }\n  };\n  TimeInput.prototype.getJsonTypeName = function () {\n    return \"Input.Time\";\n  };\n  TimeInput.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"min\", this.min);\n    Utils.setProperty(result, \"max\", this.max);\n    return result;\n  };\n  TimeInput.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.min = Utils.getStringValue(json[\"min\"]);\n    this.max = Utils.getStringValue(json[\"max\"]);\n  };\n  Object.defineProperty(TimeInput.prototype, \"min\", {\n    get: function () {\n      return this._min;\n    },\n    set: function (value) {\n      this._min = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeInput.prototype, \"max\", {\n    get: function () {\n      return this._max;\n    },\n    set: function (value) {\n      this._max = this.parseInputValue(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeInput.prototype, \"value\", {\n    get: function () {\n      return this._timeInputElement ? this._timeInputElement.value : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return TimeInput;\n}(Input);\nexports.TimeInput = TimeInput;\nvar ActionButtonState;\n(function (ActionButtonState) {\n  ActionButtonState[ActionButtonState[\"Normal\"] = 0] = \"Normal\";\n  ActionButtonState[ActionButtonState[\"Expanded\"] = 1] = \"Expanded\";\n  ActionButtonState[ActionButtonState[\"Subdued\"] = 2] = \"Subdued\";\n})(ActionButtonState || (ActionButtonState = {}));\nvar ActionButton = /** @class */function () {\n  function ActionButton(action, parentContainerStyle) {\n    this._state = ActionButtonState.Normal;\n    this.onClick = null;\n    this.action = action;\n    this._parentContainerStyle = parentContainerStyle;\n  }\n  ActionButton.prototype.updateCssStyle = function () {\n    var _a, _b;\n    var hostConfig = this.action.parent.hostConfig;\n    this.action.renderedElement.className = hostConfig.makeCssClassName(\"ac-pushButton\");\n    if (!Utils.isNullOrEmpty(this._parentContainerStyle)) {\n      this.action.renderedElement.classList.add(\"style-\" + this._parentContainerStyle);\n    }\n    if (this.action instanceof ShowCardAction) {\n      this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expandable\"));\n    }\n    this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"expanded\"));\n    this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"subdued\"));\n    switch (this._state) {\n      case ActionButtonState.Expanded:\n        this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\n        break;\n      case ActionButtonState.Subdued:\n        this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\n        break;\n    }\n    if (!Utils.isNullOrEmpty(this.action.style)) {\n      if (this.action.style === Enums.ActionStyle.Positive) {\n        (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\n      } else {\n        (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames(\"style-\" + this.action.style.toLowerCase()));\n      }\n    }\n  };\n  ActionButton.prototype.render = function () {\n    var _this = this;\n    this.action.render();\n    this.action.renderedElement.onclick = function (e) {\n      e.preventDefault();\n      e.cancelBubble = true;\n      _this.click();\n    };\n    this.updateCssStyle();\n  };\n  ActionButton.prototype.click = function () {\n    if (this.onClick != null) {\n      this.onClick(this);\n    }\n  };\n  Object.defineProperty(ActionButton.prototype, \"state\", {\n    get: function () {\n      return this._state;\n    },\n    set: function (value) {\n      this._state = value;\n      this.updateCssStyle();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActionButton;\n}();\nvar Action = /** @class */function (_super) {\n  __extends(Action, _super);\n  function Action() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._shouldFallback = false;\n    _this._parent = null;\n    _this._actionCollection = null; // hold the reference to its action collection\n    _this._renderedElement = null;\n    _this.requires = new HostConfig.HostCapabilities();\n    _this.style = Enums.ActionStyle.Default;\n    return _this;\n  }\n  Action.prototype.setCollection = function (actionCollection) {\n    this._actionCollection = actionCollection;\n  };\n  Action.prototype.addCssClasses = function (element) {\n    // Do nothing in base implementation\n  };\n  Action.prototype.internalGetReferencedInputs = function (allInputs) {\n    return {};\n  };\n  Action.prototype.internalPrepareForExecution = function (inputs) {\n    // Do nothing in base implementation\n  };\n  Action.prototype.internalValidateInputs = function (referencedInputs) {\n    var result = [];\n    if (AdaptiveCard.useBuiltInInputValidation && !this.ignoreInputValidation) {\n      for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var input = referencedInputs[key];\n        if (!input.validateValue()) {\n          result.push(input);\n        }\n      }\n    }\n    return result;\n  };\n  Action.prototype.getAriaRole = function () {\n    return \"button\";\n  };\n  Action.prototype.getHref = function () {\n    return \"\";\n  };\n  Action.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"type\", this.getJsonTypeName());\n    Utils.setProperty(result, \"title\", this.title);\n    Utils.setProperty(result, \"iconUrl\", this.iconUrl);\n    Utils.setProperty(result, \"style\", this.style, Enums.ActionStyle.Default);\n    return result;\n  };\n  Action.prototype.render = function (baseCssClass) {\n    if (baseCssClass === void 0) {\n      baseCssClass = \"ac-pushButton\";\n    }\n    // Cache hostConfig for perf\n    var hostConfig = this.parent.hostConfig;\n    var buttonElement = document.createElement(\"button\");\n    this.addCssClasses(buttonElement);\n    buttonElement.setAttribute(\"aria-label\", this.title);\n    buttonElement.type = \"button\";\n    buttonElement.style.display = \"flex\";\n    buttonElement.style.alignItems = \"center\";\n    buttonElement.style.justifyContent = \"center\";\n    buttonElement.setAttribute(\"role\", this.getAriaRole());\n    var hasTitle = !Utils.isNullOrEmpty(this.title);\n    var titleElement = document.createElement(\"div\");\n    titleElement.style.overflow = \"hidden\";\n    titleElement.style.textOverflow = \"ellipsis\";\n    if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {\n      titleElement.style.whiteSpace = \"nowrap\";\n    }\n    if (hasTitle) {\n      titleElement.innerText = this.title;\n    }\n    if (Utils.isNullOrEmpty(this.iconUrl)) {\n      buttonElement.classList.add(\"noIcon\");\n      buttonElement.appendChild(titleElement);\n    } else {\n      var iconElement = document.createElement(\"img\");\n      iconElement.src = this.iconUrl;\n      iconElement.style.width = hostConfig.actions.iconSize + \"px\";\n      iconElement.style.height = hostConfig.actions.iconSize + \"px\";\n      iconElement.style.flex = \"0 0 auto\";\n      if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {\n        buttonElement.classList.add(\"iconAbove\");\n        buttonElement.style.flexDirection = \"column\";\n        if (hasTitle) {\n          iconElement.style.marginBottom = \"4px\";\n        }\n      } else {\n        buttonElement.classList.add(\"iconLeft\");\n        if (hasTitle) {\n          iconElement.style.marginRight = \"4px\";\n        }\n      }\n      buttonElement.appendChild(iconElement);\n      buttonElement.appendChild(titleElement);\n    }\n    this._renderedElement = buttonElement;\n  };\n  Action.prototype.setParent = function (value) {\n    this._parent = value;\n  };\n  Action.prototype.execute = function () {\n    if (this.onExecute) {\n      this.onExecute(this);\n    }\n    raiseExecuteActionEvent(this);\n  };\n  Action.prototype.prepareForExecution = function () {\n    var referencedInputs = this.getReferencedInputs();\n    if (this.internalValidateInputs(referencedInputs).length > 0) {\n      return false;\n    }\n    this.internalPrepareForExecution(referencedInputs);\n    return true;\n  };\n  ;\n  Action.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    raiseParseActionEvent(this, json, errors);\n    this.requires.parse(json[\"requires\"], errors);\n    if (!json[\"title\"] && json[\"title\"] !== \"\") {\n      raiseParseError({\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"Actions should always have a title.\"\n      }, errors);\n    }\n    this.title = Utils.getStringValue(json[\"title\"]);\n    this.iconUrl = Utils.getStringValue(json[\"iconUrl\"]);\n    this.style = Utils.getStringValue(json[\"style\"], this.style);\n  };\n  Action.prototype.remove = function () {\n    if (this._actionCollection) {\n      return this._actionCollection.removeAction(this);\n    }\n    return false;\n  };\n  Action.prototype.getAllInputs = function () {\n    return [];\n  };\n  Action.prototype.getResourceInformation = function () {\n    if (!Utils.isNullOrEmpty(this.iconUrl)) {\n      return [{\n        url: this.iconUrl,\n        mimeType: \"image\"\n      }];\n    } else {\n      return [];\n    }\n  };\n  Action.prototype.getActionById = function (id) {\n    if (this.id == id) {\n      return this;\n    }\n  };\n  Action.prototype.getReferencedInputs = function () {\n    return this.internalGetReferencedInputs(this.parent.getRootElement().getAllInputs());\n  };\n  Action.prototype.validateInputs = function () {\n    return this.internalValidateInputs(this.getReferencedInputs());\n  };\n  Action.prototype.shouldFallback = function () {\n    return this._shouldFallback || !this.requires.areAllMet(this.parent.hostConfig.hostCapabilities);\n  };\n  Object.defineProperty(Action.prototype, \"isPrimary\", {\n    get: function () {\n      return this.style == Enums.ActionStyle.Positive;\n    },\n    set: function (value) {\n      if (value) {\n        this.style = Enums.ActionStyle.Positive;\n      } else {\n        if (this.style == Enums.ActionStyle.Positive) {\n          this.style = Enums.ActionStyle.Default;\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"ignoreInputValidation\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"parent\", {\n    get: function () {\n      return this._parent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"renderedElement\", {\n    get: function () {\n      return this._renderedElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Action;\n}(CardObject);\nexports.Action = Action;\nvar SubmitAction = /** @class */function (_super) {\n  __extends(SubmitAction, _super);\n  function SubmitAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._isPrepared = false;\n    _this._ignoreInputValidation = false;\n    return _this;\n  }\n  SubmitAction.prototype.internalGetReferencedInputs = function (allInputs) {\n    var result = {};\n    for (var _i = 0, allInputs_1 = allInputs; _i < allInputs_1.length; _i++) {\n      var input = allInputs_1[_i];\n      result[input.id] = input;\n    }\n    return result;\n  };\n  SubmitAction.prototype.internalPrepareForExecution = function (inputs) {\n    if (this._originalData) {\n      this._processedData = JSON.parse(JSON.stringify(this._originalData));\n    } else {\n      this._processedData = {};\n    }\n    for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\n      var key = _a[_i];\n      var input = inputs[key];\n      if (input.value != null) {\n        this._processedData[input.id] = input.value;\n      }\n    }\n    this._isPrepared = true;\n  };\n  SubmitAction.prototype.getJsonTypeName = function () {\n    return SubmitAction.JsonTypeName;\n  };\n  SubmitAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\n    Utils.setProperty(result, \"data\", this._originalData);\n    return result;\n  };\n  SubmitAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\n    this.data = json[\"data\"];\n  };\n  Object.defineProperty(SubmitAction.prototype, \"ignoreInputValidation\", {\n    get: function () {\n      return this._ignoreInputValidation;\n    },\n    set: function (value) {\n      this._ignoreInputValidation = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SubmitAction.prototype, \"data\", {\n    get: function () {\n      return this._isPrepared ? this._processedData : this._originalData;\n    },\n    set: function (value) {\n      this._originalData = value;\n      this._isPrepared = false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n  SubmitAction.JsonTypeName = \"Action.Submit\";\n  return SubmitAction;\n}(Action);\nexports.SubmitAction = SubmitAction;\nvar OpenUrlAction = /** @class */function (_super) {\n  __extends(OpenUrlAction, _super);\n  function OpenUrlAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  OpenUrlAction.prototype.getJsonTypeName = function () {\n    return OpenUrlAction.JsonTypeName;\n  };\n  OpenUrlAction.prototype.getAriaRole = function () {\n    return \"link\";\n  };\n  OpenUrlAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"url\", this.url);\n    return result;\n  };\n  OpenUrlAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (Utils.isNullOrEmpty(this.url)) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"An Action.OpenUrl must have its url property set.\"\n      });\n    }\n  };\n  OpenUrlAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.url = Utils.getStringValue(json[\"url\"]);\n  };\n  OpenUrlAction.prototype.getHref = function () {\n    return this.url;\n  };\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n  OpenUrlAction.JsonTypeName = \"Action.OpenUrl\";\n  return OpenUrlAction;\n}(Action);\nexports.OpenUrlAction = OpenUrlAction;\nvar ToggleVisibilityAction = /** @class */function (_super) {\n  __extends(ToggleVisibilityAction, _super);\n  function ToggleVisibilityAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.targetElements = {};\n    return _this;\n  }\n  ToggleVisibilityAction.prototype.getJsonTypeName = function () {\n    return ToggleVisibilityAction.JsonTypeName;\n  };\n  ToggleVisibilityAction.prototype.execute = function () {\n    for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\n      var elementId = _a[_i];\n      var targetElement = this.parent.getRootElement().getElementById(elementId);\n      if (targetElement) {\n        if (typeof this.targetElements[elementId] === \"boolean\") {\n          targetElement.isVisible = this.targetElements[elementId];\n        } else {\n          targetElement.isVisible = !targetElement.isVisible;\n        }\n      }\n    }\n  };\n  ToggleVisibilityAction.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n    this.targetElements = {};\n    var jsonTargetElements = json[\"targetElements\"];\n    if (jsonTargetElements && Array.isArray(jsonTargetElements)) {\n      for (var _i = 0, jsonTargetElements_1 = jsonTargetElements; _i < jsonTargetElements_1.length; _i++) {\n        var item = jsonTargetElements_1[_i];\n        if (typeof item === \"string\") {\n          this.targetElements[item] = undefined;\n        } else if (typeof item === \"object\") {\n          var jsonElementId = item[\"elementId\"];\n          if (jsonElementId && typeof jsonElementId === \"string\") {\n            this.targetElements[jsonElementId] = Utils.getBoolValue(item[\"isVisible\"], undefined);\n          }\n        }\n      }\n    }\n  };\n  ToggleVisibilityAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    var targetElements = [];\n    for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\n      var id = _a[_i];\n      if (typeof this.targetElements[id] === \"boolean\") {\n        targetElements.push({\n          elementId: id,\n          isVisible: this.targetElements[id]\n        });\n      } else {\n        targetElements.push(id);\n      }\n    }\n    result[\"targetElements\"] = targetElements;\n    return result;\n  };\n  ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {\n    if (isVisible === void 0) {\n      isVisible = undefined;\n    }\n    this.targetElements[elementId] = isVisible;\n  };\n  ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {\n    delete this.targetElements[elementId];\n  };\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n  ToggleVisibilityAction.JsonTypeName = \"Action.ToggleVisibility\";\n  return ToggleVisibilityAction;\n}(Action);\nexports.ToggleVisibilityAction = ToggleVisibilityAction;\nvar HttpHeader = /** @class */function (_super) {\n  __extends(HttpHeader, _super);\n  function HttpHeader(name, value) {\n    if (name === void 0) {\n      name = \"\";\n    }\n    if (value === void 0) {\n      value = \"\";\n    }\n    var _this = _super.call(this) || this;\n    _this._value = new Shared.StringWithSubstitutions();\n    _this.name = name;\n    _this.value = value;\n    return _this;\n  }\n  HttpHeader.prototype.parse = function (json) {\n    _super.prototype.parse.call(this, json);\n    this.name = Utils.getStringValue(json[\"name\"]);\n    this.value = Utils.getStringValue(json[\"value\"]);\n  };\n  HttpHeader.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"name\", this.name);\n    Utils.setProperty(result, \"value\", this._value.getOriginal());\n    return result;\n  };\n  HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {\n    this._value.getReferencedInputs(inputs, referencedInputs);\n  };\n  HttpHeader.prototype.prepareForExecution = function (inputs) {\n    this._value.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\n  };\n  Object.defineProperty(HttpHeader.prototype, \"value\", {\n    get: function () {\n      return this._value.get();\n    },\n    set: function (newValue) {\n      this._value.set(newValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return HttpHeader;\n}(SerializableObject);\nexports.HttpHeader = HttpHeader;\nvar HttpAction = /** @class */function (_super) {\n  __extends(HttpAction, _super);\n  function HttpAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._url = new Shared.StringWithSubstitutions();\n    _this._body = new Shared.StringWithSubstitutions();\n    _this._headers = [];\n    _this._ignoreInputValidation = false;\n    return _this;\n  }\n  HttpAction.prototype.internalGetReferencedInputs = function (allInputs) {\n    var result = {};\n    this._url.getReferencedInputs(allInputs, result);\n    for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {\n      var header = _a[_i];\n      header.getReferencedInputs(allInputs, result);\n    }\n    this._body.getReferencedInputs(allInputs, result);\n    return result;\n  };\n  HttpAction.prototype.internalPrepareForExecution = function (inputs) {\n    this._url.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\n    var contentType = Shared.ContentTypes.applicationJson;\n    for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {\n      var header = _a[_i];\n      header.prepareForExecution(inputs);\n      if (header.name && header.name.toLowerCase() == \"content-type\") {\n        contentType = header.value;\n      }\n    }\n    this._body.substituteInputValues(inputs, contentType);\n  };\n  ;\n  HttpAction.prototype.getJsonTypeName = function () {\n    return HttpAction.JsonTypeName;\n  };\n  HttpAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"method\", this.method);\n    Utils.setProperty(result, \"url\", this._url.getOriginal());\n    Utils.setProperty(result, \"body\", this._body.getOriginal());\n    Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\n    Utils.setArrayProperty(result, \"headers\", this.headers);\n    return result;\n  };\n  HttpAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (Utils.isNullOrEmpty(this.url)) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"An Action.Http must have its url property set.\"\n      });\n    }\n    if (this.headers.length > 0) {\n      for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\n        var header = _a[_i];\n        if (!header.name) {\n          context.addFailure(this, {\n            error: Enums.ValidationError.PropertyCantBeNull,\n            message: \"All headers of an Action.Http must have their name and value properties set.\"\n          });\n        }\n      }\n    }\n  };\n  HttpAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.url = Utils.getStringValue(json[\"url\"]);\n    this.method = Utils.getStringValue(json[\"method\"]);\n    this.body = Utils.getStringValue(json[\"body\"]);\n    this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\n    this._headers = [];\n    if (Array.isArray(json[\"headers\"])) {\n      for (var _i = 0, _a = json[\"headers\"]; _i < _a.length; _i++) {\n        var jsonHeader = _a[_i];\n        var httpHeader = new HttpHeader();\n        httpHeader.parse(jsonHeader);\n        this.headers.push(httpHeader);\n      }\n    }\n  };\n  Object.defineProperty(HttpAction.prototype, \"ignoreInputValidation\", {\n    get: function () {\n      return this._ignoreInputValidation;\n    },\n    set: function (value) {\n      this._ignoreInputValidation = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"url\", {\n    get: function () {\n      return this._url.get();\n    },\n    set: function (value) {\n      this._url.set(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"body\", {\n    get: function () {\n      return this._body.get();\n    },\n    set: function (value) {\n      this._body.set(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"headers\", {\n    get: function () {\n      return this._headers ? this._headers : [];\n    },\n    set: function (value) {\n      this._headers = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n  HttpAction.JsonTypeName = \"Action.Http\";\n  return HttpAction;\n}(Action);\nexports.HttpAction = HttpAction;\nvar ShowCardAction = /** @class */function (_super) {\n  __extends(ShowCardAction, _super);\n  function ShowCardAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.card = new InlineAdaptiveCard();\n    return _this;\n  }\n  ShowCardAction.prototype.addCssClasses = function (element) {\n    _super.prototype.addCssClasses.call(this, element);\n    element.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\n  };\n  ShowCardAction.prototype.getJsonTypeName = function () {\n    return ShowCardAction.JsonTypeName;\n  };\n  ShowCardAction.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    if (this.card) {\n      Utils.setProperty(result, \"card\", this.card.toJSON());\n    }\n    return result;\n  };\n  ShowCardAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    this.card.internalValidateProperties(context);\n  };\n  ShowCardAction.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    var jsonCard = json[\"card\"];\n    if (jsonCard) {\n      this.card.parse(jsonCard, errors);\n    } else {\n      raiseParseError({\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"An Action.ShowCard must have its \\\"card\\\" property set to a valid AdaptiveCard object.\"\n      }, errors);\n    }\n  };\n  ShowCardAction.prototype.setParent = function (value) {\n    _super.prototype.setParent.call(this, value);\n    this.card.setParent(value);\n  };\n  ShowCardAction.prototype.getAllInputs = function () {\n    return this.card.getAllInputs();\n  };\n  ShowCardAction.prototype.getResourceInformation = function () {\n    return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());\n  };\n  ShowCardAction.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n    if (!result) {\n      result = this.card.getActionById(id);\n    }\n    return result;\n  };\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n  ShowCardAction.JsonTypeName = \"Action.ShowCard\";\n  return ShowCardAction;\n}(Action);\nexports.ShowCardAction = ShowCardAction;\nvar ActionCollection = /** @class */function () {\n  function ActionCollection(owner) {\n    this._expandedAction = null;\n    this._renderedActionCount = 0;\n    this._actionCard = null;\n    this.items = [];\n    this.buttons = [];\n    this._owner = owner;\n  }\n  ActionCollection.prototype.refreshContainer = function () {\n    this._actionCardContainer.innerHTML = \"\";\n    if (this._actionCard === null) {\n      this._actionCardContainer.style.marginTop = \"0px\";\n      return;\n    }\n    this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\" : \"0px\";\n    var padding = this._owner.getEffectivePadding();\n    this._owner.getImmediateSurroundingPadding(padding);\n    var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n    if (this._actionCard !== null) {\n      this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\n      this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\n      this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\n      this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\n      if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {\n        this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\n        this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\n      }\n      Utils.appendChild(this._actionCardContainer, this._actionCard);\n    }\n  };\n  ActionCollection.prototype.layoutChanged = function () {\n    this._owner.getRootElement().updateLayout();\n  };\n  ActionCollection.prototype.hideActionCard = function () {\n    var previouslyExpandedAction = this._expandedAction;\n    this._expandedAction = null;\n    this._actionCard = null;\n    this.refreshContainer();\n    if (previouslyExpandedAction) {\n      this.layoutChanged();\n      raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\n    }\n  };\n  ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {\n    if (suppressStyle === void 0) {\n      suppressStyle = false;\n    }\n    if (raiseEvent === void 0) {\n      raiseEvent = true;\n    }\n    if (action.card == null) {\n      return;\n    }\n    action.card.suppressStyle = suppressStyle;\n    var renderedCard = action.card.renderedElement ? action.card.renderedElement : action.card.render();\n    this._actionCard = renderedCard;\n    this._expandedAction = action;\n    this.refreshContainer();\n    if (raiseEvent) {\n      this.layoutChanged();\n      raiseInlineCardExpandedEvent(action, true);\n    }\n  };\n  ActionCollection.prototype.collapseExpandedAction = function () {\n    for (var i = 0; i < this.buttons.length; i++) {\n      this.buttons[i].state = ActionButtonState.Normal;\n    }\n    this.hideActionCard();\n  };\n  ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {\n    for (var i = 0; i < this.buttons.length; i++) {\n      if (this.buttons[i].action !== action) {\n        this.buttons[i].state = ActionButtonState.Subdued;\n      } else {\n        this.buttons[i].state = ActionButtonState.Expanded;\n      }\n    }\n    this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);\n  };\n  ActionCollection.prototype.actionClicked = function (actionButton) {\n    if (!(actionButton.action instanceof ShowCardAction)) {\n      for (var i = 0; i < this.buttons.length; i++) {\n        this.buttons[i].state = ActionButtonState.Normal;\n      }\n      this.hideActionCard();\n      actionButton.action.execute();\n    } else {\n      if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\n        actionButton.action.execute();\n      } else if (actionButton.action === this._expandedAction) {\n        this.collapseExpandedAction();\n      } else {\n        this.expandShowCardAction(actionButton.action, true);\n      }\n    }\n  };\n  ActionCollection.prototype.getParentContainer = function () {\n    if (this._owner instanceof Container) {\n      return this._owner;\n    } else {\n      return this._owner.getParentContainer();\n    }\n  };\n  ActionCollection.prototype.findActionButton = function (action) {\n    for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\n      var actionButton = _a[_i];\n      if (actionButton.action == action) {\n        return actionButton;\n      }\n    }\n    return null;\n  };\n  ActionCollection.prototype.parse = function (json, errors) {\n    this.clear();\n    if (json && json instanceof Array) {\n      for (var _i = 0, json_1 = json; _i < json_1.length; _i++) {\n        var jsonAction = json_1[_i];\n        var action = createActionInstance(this._owner, jsonAction, [], !this._owner.isDesignMode(), errors);\n        if (action) {\n          this.addAction(action);\n        }\n      }\n    }\n  };\n  ActionCollection.prototype.toJSON = function () {\n    if (this.items.length > 0) {\n      var result = [];\n      for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n        var action = _a[_i];\n        result.push(action.toJSON());\n      }\n      return result;\n    } else {\n      return null;\n    }\n  };\n  ActionCollection.prototype.getActionById = function (id) {\n    var result = null;\n    for (var i = 0; i < this.items.length; i++) {\n      result = this.items[i].getActionById(id);\n      if (result) {\n        break;\n      }\n    }\n    return result;\n  };\n  ActionCollection.prototype.validateProperties = function (context) {\n    if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {\n      context.addFailure(this._owner, {\n        error: Enums.ValidationError.TooManyActions,\n        message: \"A maximum of \" + this._owner.hostConfig.actions.maxActions + \" actions are allowed.\"\n      });\n    }\n    if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\n      context.addFailure(this._owner, {\n        error: Enums.ValidationError.InteractivityNotAllowed,\n        message: \"Interactivity is not allowed.\"\n      });\n    }\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      if (!isActionAllowed(item, this._owner.getForbiddenActionTypes())) {\n        context.addFailure(this._owner, {\n          error: Enums.ValidationError.ActionTypeNotAllowed,\n          message: \"Actions of type \" + item.getJsonTypeName() + \" are not allowe.\"\n        });\n      }\n      item.internalValidateProperties(context);\n    }\n  };\n  ActionCollection.prototype.render = function (orientation, isDesignMode) {\n    var _this = this;\n    // Cache hostConfig for better perf\n    var hostConfig = this._owner.hostConfig;\n    if (!hostConfig.supportsInteractivity) {\n      return null;\n    }\n    var element = document.createElement(\"div\");\n    var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;\n    var forbiddenActionTypes = this._owner.getForbiddenActionTypes();\n    this._actionCardContainer = document.createElement(\"div\");\n    this._renderedActionCount = 0;\n    if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && isActionAllowed(this.items[0], forbiddenActionTypes)) {\n      this.showActionCard(this.items[0], true);\n      this._renderedActionCount = 1;\n    } else {\n      var buttonStrip = document.createElement(\"div\");\n      buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\n      buttonStrip.style.display = \"flex\";\n      if (orientation == Enums.Orientation.Horizontal) {\n        buttonStrip.style.flexDirection = \"row\";\n        if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\n          switch (this._owner.horizontalAlignment) {\n            case Enums.HorizontalAlignment.Center:\n              buttonStrip.style.justifyContent = \"center\";\n              break;\n            case Enums.HorizontalAlignment.Right:\n              buttonStrip.style.justifyContent = \"flex-end\";\n              break;\n            default:\n              buttonStrip.style.justifyContent = \"flex-start\";\n              break;\n          }\n        } else {\n          switch (hostConfig.actions.actionAlignment) {\n            case Enums.ActionAlignment.Center:\n              buttonStrip.style.justifyContent = \"center\";\n              break;\n            case Enums.ActionAlignment.Right:\n              buttonStrip.style.justifyContent = \"flex-end\";\n              break;\n            default:\n              buttonStrip.style.justifyContent = \"flex-start\";\n              break;\n          }\n        }\n      } else {\n        buttonStrip.style.flexDirection = \"column\";\n        if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\n          switch (this._owner.horizontalAlignment) {\n            case Enums.HorizontalAlignment.Center:\n              buttonStrip.style.alignItems = \"center\";\n              break;\n            case Enums.HorizontalAlignment.Right:\n              buttonStrip.style.alignItems = \"flex-end\";\n              break;\n            default:\n              buttonStrip.style.alignItems = \"flex-start\";\n              break;\n          }\n        } else {\n          switch (hostConfig.actions.actionAlignment) {\n            case Enums.ActionAlignment.Center:\n              buttonStrip.style.alignItems = \"center\";\n              break;\n            case Enums.ActionAlignment.Right:\n              buttonStrip.style.alignItems = \"flex-end\";\n              break;\n            case Enums.ActionAlignment.Stretch:\n              buttonStrip.style.alignItems = \"stretch\";\n              break;\n            default:\n              buttonStrip.style.alignItems = \"flex-start\";\n              break;\n          }\n        }\n      }\n      var parentContainerStyle = this.getParentContainer().getEffectiveStyle();\n      for (var i = 0; i < this.items.length; i++) {\n        if (isActionAllowed(this.items[i], forbiddenActionTypes)) {\n          var actionButton = this.findActionButton(this.items[i]);\n          if (!actionButton) {\n            actionButton = new ActionButton(this.items[i], parentContainerStyle);\n            actionButton.onClick = function (ab) {\n              _this.actionClicked(ab);\n            };\n            this.buttons.push(actionButton);\n          }\n          actionButton.render();\n          if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {\n            actionButton.action.renderedElement.style.flex = \"0 1 100%\";\n          } else {\n            actionButton.action.renderedElement.style.flex = \"0 1 auto\";\n          }\n          buttonStrip.appendChild(actionButton.action.renderedElement);\n          this._renderedActionCount++;\n          if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {\n            break;\n          } else if (hostConfig.actions.buttonSpacing > 0) {\n            var spacer = document.createElement(\"div\");\n            if (orientation === Enums.Orientation.Horizontal) {\n              spacer.style.flex = \"0 0 auto\";\n              spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\n            } else {\n              spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\n            }\n            Utils.appendChild(buttonStrip, spacer);\n          }\n        }\n      }\n      var buttonStripContainer = document.createElement(\"div\");\n      buttonStripContainer.style.overflow = \"hidden\";\n      buttonStripContainer.appendChild(buttonStrip);\n      Utils.appendChild(element, buttonStripContainer);\n    }\n    Utils.appendChild(element, this._actionCardContainer);\n    for (var i = 0; i < this.buttons.length; i++) {\n      if (this.buttons[i].state == ActionButtonState.Expanded) {\n        this.expandShowCardAction(this.buttons[i].action, false);\n        break;\n      }\n    }\n    return this._renderedActionCount > 0 ? element : null;\n  };\n  ActionCollection.prototype.addAction = function (action) {\n    if (!action) {\n      throw new Error(\"The action parameter cannot be null.\");\n    }\n    if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {\n      this.items.push(action);\n      if (!action.parent) {\n        action.setParent(this._owner);\n      }\n      invokeSetCollection(action, this);\n    } else {\n      throw new Error(\"The action already belongs to another element.\");\n    }\n  };\n  ActionCollection.prototype.removeAction = function (action) {\n    if (this.expandedAction && this._expandedAction == action) {\n      this.collapseExpandedAction();\n    }\n    var actionIndex = this.items.indexOf(action);\n    if (actionIndex >= 0) {\n      this.items.splice(actionIndex, 1);\n      action.setParent(null);\n      invokeSetCollection(action, null);\n      for (var i = 0; i < this.buttons.length; i++) {\n        if (this.buttons[i].action == action) {\n          this.buttons.splice(i, 1);\n          break;\n        }\n      }\n      return true;\n    }\n    return false;\n  };\n  ActionCollection.prototype.clear = function () {\n    this.items = [];\n    this.buttons = [];\n    this._expandedAction = null;\n    this._renderedActionCount = 0;\n  };\n  ActionCollection.prototype.getAllInputs = function () {\n    var result = [];\n    for (var i = 0; i < this.items.length; i++) {\n      var action = this.items[i];\n      result = result.concat(action.getAllInputs());\n    }\n    return result;\n  };\n  ActionCollection.prototype.getResourceInformation = function () {\n    var result = [];\n    for (var i = 0; i < this.items.length; i++) {\n      result = result.concat(this.items[i].getResourceInformation());\n    }\n    return result;\n  };\n  Object.defineProperty(ActionCollection.prototype, \"renderedActionCount\", {\n    get: function () {\n      return this._renderedActionCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ActionCollection.prototype, \"expandedAction\", {\n    get: function () {\n      return this._expandedAction;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActionCollection;\n}();\nvar ActionSet = /** @class */function (_super) {\n  __extends(ActionSet, _super);\n  function ActionSet() {\n    var _this = _super.call(this) || this;\n    _this.orientation = null;\n    _this._actionCollection = new ActionCollection(_this);\n    return _this;\n  }\n  ActionSet.prototype.internalRender = function () {\n    return this._actionCollection.render(this.orientation ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());\n  };\n  ActionSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setEnumProperty(Enums.Orientation, result, \"orientation\", this.orientation);\n    Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\n    return result;\n  };\n  ActionSet.prototype.isBleedingAtBottom = function () {\n    if (this._actionCollection.renderedActionCount == 0) {\n      return _super.prototype.isBleedingAtBottom.call(this);\n    } else {\n      if (this._actionCollection.items.length == 1) {\n        return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\n      } else {\n        return this._actionCollection.expandedAction != null;\n      }\n    }\n  };\n  ActionSet.prototype.getJsonTypeName = function () {\n    return \"ActionSet\";\n  };\n  ActionSet.prototype.getActionCount = function () {\n    return this._actionCollection.items.length;\n  };\n  ActionSet.prototype.getActionAt = function (index) {\n    if (index >= 0 && index < this.getActionCount()) {\n      return this._actionCollection.items[index];\n    } else {\n      _super.prototype.getActionAt.call(this, index);\n    }\n  };\n  ActionSet.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    this._actionCollection.validateProperties(context);\n  };\n  ActionSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    var jsonOrientation = json[\"orientation\"];\n    if (jsonOrientation) {\n      this.orientation = Utils.getEnumValue(Enums.Orientation, jsonOrientation, Enums.Orientation.Horizontal);\n    }\n    this._actionCollection.parse(json[\"actions\"], errors);\n  };\n  ActionSet.prototype.addAction = function (action) {\n    this._actionCollection.addAction(action);\n  };\n  ActionSet.prototype.getAllInputs = function () {\n    return this._actionCollection.getAllInputs();\n  };\n  ActionSet.prototype.getResourceInformation = function () {\n    return this._actionCollection.getResourceInformation();\n  };\n  Object.defineProperty(ActionSet.prototype, \"isInteractive\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ActionSet;\n}(CardElement);\nexports.ActionSet = ActionSet;\nvar StylableCardElementContainer = /** @class */function (_super) {\n  __extends(StylableCardElementContainer, _super);\n  function StylableCardElementContainer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._style = null;\n    _this._bleed = false;\n    return _this;\n  }\n  StylableCardElementContainer.prototype.applyBackground = function () {\n    var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\n    if (!Utils.isNullOrEmpty(styleDefinition.backgroundColor)) {\n      this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\n    }\n  };\n  StylableCardElementContainer.prototype.applyPadding = function () {\n    _super.prototype.applyPadding.call(this);\n    if (!this.renderedElement) {\n      return;\n    }\n    var physicalPadding = new Shared.SpacingDefinition();\n    if (this.getEffectivePadding()) {\n      physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\n    }\n    this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\n    this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\n    this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\n    this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\n    if (this.isBleeding()) {\n      // Bleed into the first parent that does have padding\n      var padding = new Shared.PaddingDefinition();\n      this.getImmediateSurroundingPadding(padding);\n      var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n      this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\n      this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\n      if (!this.isDesignMode()) {\n        this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\n        this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\n      }\n      if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {\n        this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\n        this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\n      }\n    } else {\n      this.renderedElement.style.marginRight = \"0\";\n      this.renderedElement.style.marginLeft = \"0\";\n      this.renderedElement.style.marginTop = \"0\";\n      this.renderedElement.style.marginBottom = \"0\";\n      if (this.separatorElement) {\n        this.separatorElement.style.marginRight = \"0\";\n        this.separatorElement.style.marginLeft = \"0\";\n      }\n    }\n  };\n  StylableCardElementContainer.prototype.getHasBackground = function () {\n    var currentElement = this.parent;\n    while (currentElement) {\n      var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;\n      if (currentElement instanceof StylableCardElementContainer) {\n        if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {\n          return true;\n        }\n      }\n      currentElement = currentElement.parent;\n    }\n    return false;\n  };\n  StylableCardElementContainer.prototype.getDefaultPadding = function () {\n    return this.getHasBackground() ? new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);\n  };\n  StylableCardElementContainer.prototype.getHasExpandedAction = function () {\n    return false;\n  };\n  StylableCardElementContainer.prototype.getBleed = function () {\n    return this._bleed;\n  };\n  StylableCardElementContainer.prototype.setBleed = function (value) {\n    this._bleed = value;\n  };\n  Object.defineProperty(StylableCardElementContainer.prototype, \"renderedActionCount\", {\n    get: function () {\n      return 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"hasExplicitStyle\", {\n    get: function () {\n      return this._style != null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"allowCustomStyle\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"supportsMinHeight\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  StylableCardElementContainer.prototype.isBleeding = function () {\n    return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\n  };\n  StylableCardElementContainer.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"style\", this.style);\n    return result;\n  };\n  StylableCardElementContainer.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (this._style) {\n      var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this._style);\n      if (!styleDefinition) {\n        context.addFailure(this, {\n          error: Enums.ValidationError.InvalidPropertyValue,\n          message: \"Unknown container style: \" + this._style\n        });\n      }\n    }\n  };\n  StylableCardElementContainer.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this._style = Utils.getStringValue(json[\"style\"]);\n  };\n  StylableCardElementContainer.prototype.render = function () {\n    var renderedElement = _super.prototype.render.call(this);\n    if (renderedElement && this.getHasBackground()) {\n      this.applyBackground();\n    }\n    return renderedElement;\n  };\n  StylableCardElementContainer.prototype.getEffectiveStyle = function () {\n    var effectiveStyle = this.style;\n    return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);\n  };\n  Object.defineProperty(StylableCardElementContainer.prototype, \"style\", {\n    get: function () {\n      if (this.allowCustomStyle) {\n        if (this._style && this.hostConfig.containerStyles.getStyleByName(this._style)) {\n          return this._style;\n        }\n      }\n      return null;\n    },\n    set: function (value) {\n      this._style = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return StylableCardElementContainer;\n}(CardElementContainer);\nexports.StylableCardElementContainer = StylableCardElementContainer;\nvar BackgroundImage = /** @class */function (_super) {\n  __extends(BackgroundImage, _super);\n  function BackgroundImage() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.fillMode = BackgroundImage.defaultFillMode;\n    _this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\n    _this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\n    return _this;\n  }\n  BackgroundImage.prototype.reset = function () {\n    this.url = undefined;\n    this.fillMode = BackgroundImage.defaultFillMode;\n    this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\n    this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\n  };\n  BackgroundImage.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.url = Utils.getStringValue(json[\"url\"]);\n    this.fillMode = Utils.getEnumValue(Enums.FillMode, json[\"fillMode\"], this.fillMode);\n    this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\n    this.verticalAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalAlignment\"], this.verticalAlignment);\n  };\n  BackgroundImage.prototype.toJSON = function () {\n    if (!this.isValid()) {\n      return null;\n    }\n    if (this.fillMode == BackgroundImage.defaultFillMode && this.horizontalAlignment == BackgroundImage.defaultHorizontalAlignment && this.verticalAlignment == BackgroundImage.defaultVerticalAlignment) {\n      return this.url;\n    } else {\n      var result = _super.prototype.toJSON.call(this);\n      Utils.setProperty(result, \"url\", this.url);\n      Utils.setEnumProperty(Enums.FillMode, result, \"fillMode\", this.fillMode, BackgroundImage.defaultFillMode);\n      Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment, BackgroundImage.defaultHorizontalAlignment);\n      Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalAlignment\", this.verticalAlignment, BackgroundImage.defaultVerticalAlignment);\n      return result;\n    }\n  };\n  BackgroundImage.prototype.apply = function (element) {\n    if (this.url) {\n      element.style.backgroundImage = \"url('\" + this.url + \"')\";\n      switch (this.fillMode) {\n        case Enums.FillMode.Repeat:\n          element.style.backgroundRepeat = \"repeat\";\n          break;\n        case Enums.FillMode.RepeatHorizontally:\n          element.style.backgroundRepeat = \"repeat-x\";\n          break;\n        case Enums.FillMode.RepeatVertically:\n          element.style.backgroundRepeat = \"repeat-y\";\n          break;\n        case Enums.FillMode.Cover:\n        default:\n          element.style.backgroundRepeat = \"no-repeat\";\n          element.style.backgroundSize = \"cover\";\n          break;\n      }\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.backgroundPositionX = \"center\";\n          break;\n        case Enums.HorizontalAlignment.Right:\n          element.style.backgroundPositionX = \"right\";\n          break;\n      }\n      switch (this.verticalAlignment) {\n        case Enums.VerticalAlignment.Center:\n          element.style.backgroundPositionY = \"center\";\n          break;\n        case Enums.VerticalAlignment.Bottom:\n          element.style.backgroundPositionY = \"bottom\";\n          break;\n      }\n    }\n  };\n  BackgroundImage.prototype.isValid = function () {\n    return !Utils.isNullOrEmpty(this.url);\n  };\n  BackgroundImage.defaultFillMode = Enums.FillMode.Cover;\n  BackgroundImage.defaultHorizontalAlignment = Enums.HorizontalAlignment.Left;\n  BackgroundImage.defaultVerticalAlignment = Enums.VerticalAlignment.Top;\n  return BackgroundImage;\n}(SerializableObject);\nexports.BackgroundImage = BackgroundImage;\nvar Container = /** @class */function (_super) {\n  __extends(Container, _super);\n  function Container() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._items = [];\n    _this._renderedItems = [];\n    _this.backgroundImage = new BackgroundImage();\n    _this.verticalContentAlignment = Enums.VerticalAlignment.Top;\n    _this.rtl = null;\n    return _this;\n  }\n  Container.prototype.insertItemAt = function (item, index, forceInsert) {\n    if (!item.parent || forceInsert) {\n      if (item.isStandalone) {\n        if (index < 0 || index >= this._items.length) {\n          this._items.push(item);\n        } else {\n          this._items.splice(index, 0, item);\n        }\n        item.setParent(this);\n      } else {\n        throw new Error(\"Elements of type \" + item.getJsonTypeName() + \" cannot be used as standalone elements.\");\n      }\n    } else {\n      throw new Error(\"The element already belongs to another container.\");\n    }\n  };\n  Container.prototype.supportsExcplitiHeight = function () {\n    return true;\n  };\n  Container.prototype.getItemsCollectionPropertyName = function () {\n    return \"items\";\n  };\n  Container.prototype.applyBackground = function () {\n    if (this.backgroundImage.isValid()) {\n      this.backgroundImage.apply(this.renderedElement);\n    }\n    _super.prototype.applyBackground.call(this);\n  };\n  Container.prototype.internalRender = function () {\n    this._renderedItems = [];\n    // Cache hostConfig to avoid walking the parent hierarchy several times\n    var hostConfig = this.hostConfig;\n    var element = document.createElement(\"div\");\n    if (this.rtl != null && this.rtl) {\n      element.dir = \"rtl\";\n    }\n    element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\n    element.style.display = \"flex\";\n    element.style.flexDirection = \"column\";\n    if (AdaptiveCard.useAdvancedCardBottomTruncation) {\n      // Forces the container to be at least as tall as its content.\n      //\n      // Fixes a quirk in Chrome where, for nested flex elements, the\n      // inner element's height would never exceed the outer element's\n      // height. This caused overflow truncation to break -- containers\n      // would always be measured as not overflowing, since their heights\n      // were constrained by their parents as opposed to truly reflecting\n      // the height of their content.\n      //\n      // See the \"Browser Rendering Notes\" section of this answer:\n      // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\n      element.style.minHeight = '-webkit-min-content';\n    }\n    switch (this.verticalContentAlignment) {\n      case Enums.VerticalAlignment.Center:\n        element.style.justifyContent = \"center\";\n        break;\n      case Enums.VerticalAlignment.Bottom:\n        element.style.justifyContent = \"flex-end\";\n        break;\n      default:\n        element.style.justifyContent = \"flex-start\";\n        break;\n    }\n    if (this._items.length > 0) {\n      for (var i = 0; i < this._items.length; i++) {\n        var renderedElement = this.isElementAllowed(this._items[i], this.getForbiddenElementTypes()) ? this._items[i].render() : null;\n        if (renderedElement) {\n          if (this._renderedItems.length > 0 && this._items[i].separatorElement) {\n            this._items[i].separatorElement.style.flex = \"0 0 auto\";\n            Utils.appendChild(element, this._items[i].separatorElement);\n          }\n          Utils.appendChild(element, renderedElement);\n          this._renderedItems.push(this._items[i]);\n        }\n      }\n    } else {\n      if (this.isDesignMode()) {\n        var placeholderElement = this.createPlaceholderElement();\n        placeholderElement.style.width = \"100%\";\n        placeholderElement.style.height = \"100%\";\n        element.appendChild(placeholderElement);\n      }\n    }\n    return element;\n  };\n  Container.prototype.truncateOverflow = function (maxHeight) {\n    // Add 1 to account for rounding differences between browsers\n    var boundary = this.renderedElement.offsetTop + maxHeight + 1;\n    var handleElement = function (cardElement) {\n      var elt = cardElement.renderedElement;\n      if (elt) {\n        switch (Utils.getFitStatus(elt, boundary)) {\n          case Enums.ContainerFitStatus.FullyInContainer:\n            var sizeChanged = cardElement['resetOverflow']();\n            // If the element's size changed after resetting content,\n            // we have to check if it still fits fully in the card\n            if (sizeChanged) {\n              handleElement(cardElement);\n            }\n            break;\n          case Enums.ContainerFitStatus.Overflowing:\n            var maxHeight_1 = boundary - elt.offsetTop;\n            cardElement['handleOverflow'](maxHeight_1);\n            break;\n          case Enums.ContainerFitStatus.FullyOutOfContainer:\n            cardElement['handleOverflow'](0);\n            break;\n        }\n      }\n    };\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      handleElement(item);\n    }\n    return true;\n  };\n  Container.prototype.undoOverflowTruncation = function () {\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item['resetOverflow']();\n    }\n  };\n  Container.prototype.getHasBackground = function () {\n    return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);\n  };\n  Object.defineProperty(Container.prototype, \"isSelectable\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Container.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"backgroundImage\", this.backgroundImage.toJSON());\n    Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalContentAlignment\", this.verticalContentAlignment, Enums.VerticalAlignment.Top);\n    if (this._items.length > 0) {\n      var elements = [];\n      for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n        var element = _a[_i];\n        elements.push(element.toJSON());\n      }\n      Utils.setProperty(result, this.getItemsCollectionPropertyName(), elements);\n    }\n    Utils.setProperty(result, \"bleed\", this.bleed, false);\n    return result;\n  };\n  Container.prototype.getItemCount = function () {\n    return this._items.length;\n  };\n  Container.prototype.getItemAt = function (index) {\n    return this._items[index];\n  };\n  Container.prototype.getFirstVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\n      for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {\n        var item = _a[_i];\n        if (item.isVisible) {\n          return item;\n        }\n      }\n      ;\n    }\n    return null;\n  };\n  Container.prototype.getLastVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\n      for (var i = this._renderedItems.length - 1; i >= 0; i--) {\n        if (this._renderedItems[i].isVisible) {\n          return this._renderedItems[i];\n        }\n      }\n    }\n    return null;\n  };\n  Container.prototype.getJsonTypeName = function () {\n    return \"Container\";\n  };\n  Container.prototype.isFirstElement = function (element) {\n    var designMode = this.isDesignMode();\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].isVisible || designMode) {\n        return this._items[i] == element;\n      }\n    }\n    return false;\n  };\n  Container.prototype.isLastElement = function (element) {\n    var designMode = this.isDesignMode();\n    for (var i = this._items.length - 1; i >= 0; i--) {\n      if (this._items[i].isVisible || designMode) {\n        return this._items[i] == element;\n      }\n    }\n    return false;\n  };\n  Container.prototype.isRtl = function () {\n    if (this.rtl != null) {\n      return this.rtl;\n    } else {\n      var parentContainer = this.getParentContainer();\n      return parentContainer ? parentContainer.isRtl() : false;\n    }\n  };\n  Container.prototype.isBleedingAtTop = function () {\n    var firstRenderedItem = this.getFirstVisibleRenderedItem();\n    return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);\n  };\n  Container.prototype.isBleedingAtBottom = function () {\n    var lastRenderedItem = this.getLastVisibleRenderedItem();\n    return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);\n  };\n  Container.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this.setShouldFallback(false);\n    this._items = [];\n    this._renderedItems = [];\n    this.backgroundImage.reset();\n    var jsonBackgroundImage = json[\"backgroundImage\"];\n    if (jsonBackgroundImage) {\n      if (typeof jsonBackgroundImage === \"string\") {\n        this.backgroundImage.url = jsonBackgroundImage;\n        this.backgroundImage.fillMode = Enums.FillMode.Cover;\n      } else if (typeof jsonBackgroundImage === \"object\") {\n        this.backgroundImage.parse(jsonBackgroundImage, errors);\n      }\n    }\n    this.verticalContentAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalContentAlignment\"], this.verticalContentAlignment);\n    if (json[this.getItemsCollectionPropertyName()] != null) {\n      var items = json[this.getItemsCollectionPropertyName()];\n      this.clear();\n      for (var i = 0; i < items.length; i++) {\n        var element = createElementInstance(this, items[i], !this.isDesignMode(), errors);\n        if (element) {\n          this.insertItemAt(element, -1, true);\n        }\n      }\n    }\n    this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\n  };\n  Container.prototype.indexOf = function (cardElement) {\n    return this._items.indexOf(cardElement);\n  };\n  Container.prototype.addItem = function (item) {\n    this.insertItemAt(item, -1, false);\n  };\n  Container.prototype.insertItemBefore = function (item, insertBefore) {\n    this.insertItemAt(item, this._items.indexOf(insertBefore), false);\n  };\n  Container.prototype.insertItemAfter = function (item, insertAfter) {\n    this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\n  };\n  Container.prototype.removeItem = function (item) {\n    var itemIndex = this._items.indexOf(item);\n    if (itemIndex >= 0) {\n      this._items.splice(itemIndex, 1);\n      item.setParent(null);\n      this.updateLayout();\n      return true;\n    }\n    return false;\n  };\n  Container.prototype.clear = function () {\n    this._items = [];\n  };\n  Container.prototype.getResourceInformation = function () {\n    var result = _super.prototype.getResourceInformation.call(this);\n    if (this.backgroundImage.isValid()) {\n      result.push({\n        url: this.backgroundImage.url,\n        mimeType: \"image\"\n      });\n    }\n    return result;\n  };\n  Container.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n    if (!result) {\n      if (this.selectAction) {\n        result = this.selectAction.getActionById(id);\n      }\n      if (!result) {\n        for (var i = 0; i < this._items.length; i++) {\n          result = this._items[i].getActionById(id);\n          if (result) {\n            break;\n          }\n        }\n      }\n    }\n    return result;\n  };\n  Object.defineProperty(Container.prototype, \"padding\", {\n    get: function () {\n      return this.getPadding();\n    },\n    set: function (value) {\n      this.setPadding(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Container.prototype, \"selectAction\", {\n    get: function () {\n      return this.getSelectAction();\n    },\n    set: function (value) {\n      this.setSelectAction(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Container.prototype, \"bleed\", {\n    get: function () {\n      return this.getBleed();\n    },\n    set: function (value) {\n      this.setBleed(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Container;\n}(StylableCardElementContainer);\nexports.Container = Container;\nvar Column = /** @class */function (_super) {\n  __extends(Column, _super);\n  function Column(width) {\n    if (width === void 0) {\n      width = \"stretch\";\n    }\n    var _this = _super.call(this) || this;\n    _this._computedWeight = 0;\n    _this.width = \"stretch\";\n    _this.width = width;\n    return _this;\n  }\n  Column.prototype.adjustRenderedElementSize = function (renderedElement) {\n    var minDesignTimeColumnHeight = 20;\n    if (this.isDesignMode()) {\n      renderedElement.style.minWidth = \"20px\";\n      renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\n    } else {\n      renderedElement.style.minWidth = \"0\";\n      if (this.minPixelHeight) {\n        renderedElement.style.minHeight = this.minPixelHeight + \"px\";\n      }\n    }\n    if (this.width === \"auto\") {\n      renderedElement.style.flex = \"0 1 auto\";\n    } else if (this.width === \"stretch\") {\n      renderedElement.style.flex = \"1 1 50px\";\n    } else {\n      var sizeAndUnit = this.width;\n      if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {\n        renderedElement.style.flex = \"0 0 auto\";\n        renderedElement.style.width = sizeAndUnit.physicalSize + \"px\";\n      } else {\n        renderedElement.style.flex = \"1 1 \" + (this._computedWeight > 0 ? this._computedWeight : sizeAndUnit.physicalSize) + \"%\";\n      }\n    }\n  };\n  Object.defineProperty(Column.prototype, \"separatorOrientation\", {\n    get: function () {\n      return Enums.Orientation.Vertical;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Column.prototype.getJsonTypeName = function () {\n    return \"Column\";\n  };\n  Column.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    if (this.width instanceof Shared.SizeAndUnit) {\n      if (this.width.unit == Enums.SizeUnit.Pixel) {\n        Utils.setProperty(result, \"width\", this.width.physicalSize + \"px\");\n      } else {\n        Utils.setNumberProperty(result, \"width\", this.width.physicalSize);\n      }\n    } else {\n      Utils.setProperty(result, \"width\", this.width);\n    }\n    return result;\n  };\n  Column.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    var jsonWidth = json[\"width\"];\n    if (jsonWidth === undefined) {\n      jsonWidth = json[\"size\"];\n      if (jsonWidth !== undefined) {\n        raiseParseError({\n          error: Enums.ValidationError.Deprecated,\n          message: \"The \\\"Column.size\\\" property is deprecated and will be removed. Use the \\\"Column.width\\\" property instead.\"\n        }, errors);\n      }\n    }\n    if (jsonWidth) {\n      var invalidWidth = false;\n      try {\n        this.width = Shared.SizeAndUnit.parse(jsonWidth);\n      } catch (e) {\n        if (typeof jsonWidth === \"string\" && (jsonWidth === \"auto\" || jsonWidth === \"stretch\")) {\n          this.width = jsonWidth;\n        } else {\n          invalidWidth = true;\n        }\n      }\n      if (invalidWidth) {\n        raiseParseError({\n          error: Enums.ValidationError.InvalidPropertyValue,\n          message: \"Invalid column width:\" + jsonWidth + \" - defaulting to \\\"auto\\\"\"\n        }, errors);\n      }\n    }\n  };\n  Object.defineProperty(Column.prototype, \"hasVisibleSeparator\", {\n    get: function () {\n      if (this.parent && this.parent instanceof ColumnSet) {\n        return this.separatorElement && !this.parent.isLeftMostElement(this);\n      } else {\n        return false;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Column.prototype, \"isStandalone\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Column;\n}(Container);\nexports.Column = Column;\nvar ColumnSet = /** @class */function (_super) {\n  __extends(ColumnSet, _super);\n  function ColumnSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._columns = [];\n    return _this;\n  }\n  ColumnSet.prototype.createColumnInstance = function (json, errors) {\n    return createCardObjectInstance(this, json, [],\n    // Forbidden types not supported for elements for now\n    !this.isDesignMode(), function (typeName) {\n      return !typeName || typeName === \"Column\" ? new Column() : null;\n    }, function (typeName, errorType) {\n      if (errorType == InstanceCreationErrorType.UnknownType) {\n        return {\n          error: Enums.ValidationError.UnknownElementType,\n          message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\n        };\n      } else {\n        return {\n          error: Enums.ValidationError.ElementTypeNotAllowed,\n          message: \"Element type \" + typeName + \" isn't allowed in a ColumnSet.\"\n        };\n      }\n    }, errors);\n  };\n  ColumnSet.prototype.internalRender = function () {\n    this._renderedColumns = [];\n    if (this._columns.length > 0) {\n      // Cache hostConfig to avoid walking the parent hierarchy several times\n      var hostConfig = this.hostConfig;\n      var element = document.createElement(\"div\");\n      element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\n      element.style.display = \"flex\";\n      if (AdaptiveCard.useAdvancedCardBottomTruncation) {\n        // See comment in Container.internalRender()\n        element.style.minHeight = '-webkit-min-content';\n      }\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.justifyContent = \"center\";\n          break;\n        case Enums.HorizontalAlignment.Right:\n          element.style.justifyContent = \"flex-end\";\n          break;\n        default:\n          element.style.justifyContent = \"flex-start\";\n          break;\n      }\n      var totalWeight = 0;\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight) {\n          totalWeight += column.width.physicalSize;\n        }\n      }\n      for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\n        var column = _c[_b];\n        if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {\n          var computedWeight = 100 / totalWeight * column.width.physicalSize;\n          // Best way to emulate \"internal\" access I know of\n          column[\"_computedWeight\"] = computedWeight;\n        }\n        var renderedColumn = column.render();\n        if (renderedColumn) {\n          if (this._renderedColumns.length > 0 && column.separatorElement) {\n            column.separatorElement.style.flex = \"0 0 auto\";\n            Utils.appendChild(element, column.separatorElement);\n          }\n          Utils.appendChild(element, renderedColumn);\n          this._renderedColumns.push(column);\n        }\n      }\n      return this._renderedColumns.length > 0 ? element : null;\n    } else {\n      return null;\n    }\n  };\n  ColumnSet.prototype.truncateOverflow = function (maxHeight) {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      column['handleOverflow'](maxHeight);\n    }\n    return true;\n  };\n  ColumnSet.prototype.undoOverflowTruncation = function () {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      column['resetOverflow']();\n    }\n  };\n  Object.defineProperty(ColumnSet.prototype, \"isSelectable\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ColumnSet.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    if (this._columns.length > 0) {\n      var columns = [];\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        columns.push(column.toJSON());\n      }\n      Utils.setProperty(result, \"columns\", columns);\n    }\n    Utils.setProperty(result, \"bleed\", this.bleed, false);\n    return result;\n  };\n  ColumnSet.prototype.isFirstElement = function (element) {\n    for (var i = 0; i < this._columns.length; i++) {\n      if (this._columns[i].isVisible) {\n        return this._columns[i] == element;\n      }\n    }\n    return false;\n  };\n  ColumnSet.prototype.isBleedingAtTop = function () {\n    if (this.isBleeding()) {\n      return true;\n    }\n    if (this._renderedColumns && this._renderedColumns.length > 0) {\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        if (column.isBleedingAtTop()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  ColumnSet.prototype.isBleedingAtBottom = function () {\n    if (this.isBleeding()) {\n      return true;\n    }\n    if (this._renderedColumns && this._renderedColumns.length > 0) {\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        if (column.isBleedingAtBottom()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  ColumnSet.prototype.getCount = function () {\n    return this._columns.length;\n  };\n  ColumnSet.prototype.getItemCount = function () {\n    return this.getCount();\n  };\n  ColumnSet.prototype.getFirstVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\n      return this._renderedColumns[0];\n    } else {\n      return null;\n    }\n  };\n  ColumnSet.prototype.getLastVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\n      return this._renderedColumns[this._renderedColumns.length - 1];\n    } else {\n      return null;\n    }\n  };\n  ColumnSet.prototype.getColumnAt = function (index) {\n    return this._columns[index];\n  };\n  ColumnSet.prototype.getItemAt = function (index) {\n    return this.getColumnAt(index);\n  };\n  ColumnSet.prototype.getJsonTypeName = function () {\n    return \"ColumnSet\";\n  };\n  ColumnSet.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    if (json[\"columns\"] != null) {\n      var jsonColumns = json[\"columns\"];\n      this._columns = [];\n      for (var i = 0; i < jsonColumns.length; i++) {\n        var column = this.createColumnInstance(jsonColumns[i], errors);\n        if (column) {\n          this._columns.push(column);\n        }\n      }\n    }\n    this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\n  };\n  ColumnSet.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    var weightedColumns = 0;\n    var stretchedColumns = 0;\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      if (typeof column.width === \"number\") {\n        weightedColumns++;\n      } else if (column.width === \"stretch\") {\n        stretchedColumns++;\n      }\n    }\n    if (weightedColumns > 0 && stretchedColumns > 0) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.Hint,\n        message: \"It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.\"\n      });\n    }\n  };\n  ColumnSet.prototype.addColumn = function (column) {\n    if (!column.parent) {\n      this._columns.push(column);\n      column.setParent(this);\n    } else {\n      throw new Error(\"This column already belongs to another ColumnSet.\");\n    }\n  };\n  ColumnSet.prototype.removeItem = function (item) {\n    if (item instanceof Column) {\n      var itemIndex = this._columns.indexOf(item);\n      if (itemIndex >= 0) {\n        this._columns.splice(itemIndex, 1);\n        item.setParent(null);\n        this.updateLayout();\n        return true;\n      }\n    }\n    return false;\n  };\n  ColumnSet.prototype.indexOf = function (cardElement) {\n    return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\n  };\n  ColumnSet.prototype.isLeftMostElement = function (element) {\n    return this._columns.indexOf(element) == 0;\n  };\n  ColumnSet.prototype.isRightMostElement = function (element) {\n    return this._columns.indexOf(element) == this._columns.length - 1;\n  };\n  ColumnSet.prototype.isTopElement = function (element) {\n    return this._columns.indexOf(element) >= 0;\n  };\n  ColumnSet.prototype.isBottomElement = function (element) {\n    return this._columns.indexOf(element) >= 0;\n  };\n  ColumnSet.prototype.getActionById = function (id) {\n    var result = null;\n    for (var i = 0; i < this._columns.length; i++) {\n      result = this._columns[i].getActionById(id);\n      if (result) {\n        break;\n      }\n    }\n    return result;\n  };\n  Object.defineProperty(ColumnSet.prototype, \"bleed\", {\n    get: function () {\n      return this.getBleed();\n    },\n    set: function (value) {\n      this.setBleed(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ColumnSet.prototype, \"padding\", {\n    get: function () {\n      return this.getPadding();\n    },\n    set: function (value) {\n      this.setPadding(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ColumnSet.prototype, \"selectAction\", {\n    get: function () {\n      return this.getSelectAction();\n    },\n    set: function (value) {\n      this.setSelectAction(value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ColumnSet;\n}(StylableCardElementContainer);\nexports.ColumnSet = ColumnSet;\nfunction raiseImageLoadedEvent(image) {\n  var card = image.getRootElement();\n  var onImageLoadedHandler = card && card.onImageLoaded ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\n  if (onImageLoadedHandler) {\n    onImageLoadedHandler(image);\n  }\n}\nfunction raiseAnchorClickedEvent(element, anchor) {\n  var card = element.getRootElement();\n  var onAnchorClickedHandler = card && card.onAnchorClicked ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\n  return onAnchorClickedHandler != null ? onAnchorClickedHandler(element, anchor) : false;\n}\nfunction raiseExecuteActionEvent(action) {\n  var card = action.parent.getRootElement();\n  var onExecuteActionHandler = card && card.onExecuteAction ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\n  if (onExecuteActionHandler) {\n    if (action.prepareForExecution()) {\n      onExecuteActionHandler(action);\n    }\n  }\n}\nfunction raiseInlineCardExpandedEvent(action, isExpanded) {\n  var card = action.parent.getRootElement();\n  var onInlineCardExpandedHandler = card && card.onInlineCardExpanded ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;\n  if (onInlineCardExpandedHandler) {\n    onInlineCardExpandedHandler(action, isExpanded);\n  }\n}\nfunction raiseInputValueChangedEvent(input) {\n  var card = input.getRootElement();\n  var onInputValueChangedHandler = card && card.onInputValueChanged ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;\n  if (onInputValueChangedHandler) {\n    onInputValueChangedHandler(input);\n  }\n}\nfunction raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {\n  if (shouldUpdateLayout === void 0) {\n    shouldUpdateLayout = true;\n  }\n  var rootElement = element.getRootElement();\n  if (shouldUpdateLayout) {\n    rootElement.updateLayout();\n  }\n  var card = rootElement;\n  var onElementVisibilityChangedHandler = card && card.onElementVisibilityChanged ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;\n  if (onElementVisibilityChangedHandler != null) {\n    onElementVisibilityChangedHandler(element);\n  }\n}\nfunction raiseParseElementEvent(element, json, errors) {\n  var card = element.getRootElement();\n  var onParseElementHandler = card && card.onParseElement ? card.onParseElement : AdaptiveCard.onParseElement;\n  if (onParseElementHandler != null) {\n    onParseElementHandler(element, json, errors);\n  }\n}\nfunction raiseParseActionEvent(action, json, errors) {\n  var card = action.parent ? action.parent.getRootElement() : null;\n  var onParseActionHandler = card && card.onParseAction ? card.onParseAction : AdaptiveCard.onParseAction;\n  if (onParseActionHandler != null) {\n    onParseActionHandler(action, json, errors);\n  }\n}\nfunction raiseParseError(error, errors) {\n  if (errors) {\n    errors.push(error);\n  }\n  if (AdaptiveCard.onParseError != null) {\n    AdaptiveCard.onParseError(error);\n  }\n}\nvar ContainerWithActions = /** @class */function (_super) {\n  __extends(ContainerWithActions, _super);\n  function ContainerWithActions() {\n    var _this = _super.call(this) || this;\n    _this._actionCollection = new ActionCollection(_this);\n    return _this;\n  }\n  ContainerWithActions.prototype.internalRender = function () {\n    var element = _super.prototype.internalRender.call(this);\n    var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);\n    if (renderedActions) {\n      Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {\n        spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing),\n        lineThickness: null,\n        lineColor: null\n      }, Enums.Orientation.Horizontal));\n      Utils.appendChild(element, renderedActions);\n    }\n    if (this.renderIfEmpty) {\n      return element;\n    } else {\n      return element.children.length > 0 ? element : null;\n    }\n  };\n  ContainerWithActions.prototype.getHasExpandedAction = function () {\n    if (this.renderedActionCount == 0) {\n      return false;\n    } else if (this.renderedActionCount == 1) {\n      return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\n    } else {\n      return this._actionCollection.expandedAction != null;\n    }\n  };\n  Object.defineProperty(ContainerWithActions.prototype, \"renderedActionCount\", {\n    get: function () {\n      return this._actionCollection.renderedActionCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ContainerWithActions.prototype, \"renderIfEmpty\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ContainerWithActions.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\n    return result;\n  };\n  ContainerWithActions.prototype.getActionCount = function () {\n    return this._actionCollection.items.length;\n  };\n  ContainerWithActions.prototype.getActionAt = function (index) {\n    if (index >= 0 && index < this.getActionCount()) {\n      return this._actionCollection.items[index];\n    } else {\n      _super.prototype.getActionAt.call(this, index);\n    }\n  };\n  ContainerWithActions.prototype.getActionById = function (id) {\n    var result = this._actionCollection.getActionById(id);\n    return result ? result : _super.prototype.getActionById.call(this, id);\n  };\n  ContainerWithActions.prototype.parse = function (json, errors) {\n    _super.prototype.parse.call(this, json, errors);\n    this._actionCollection.parse(json[\"actions\"], errors);\n  };\n  ContainerWithActions.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (this._actionCollection) {\n      this._actionCollection.validateProperties(context);\n    }\n  };\n  ContainerWithActions.prototype.isLastElement = function (element) {\n    return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;\n  };\n  ContainerWithActions.prototype.addAction = function (action) {\n    this._actionCollection.addAction(action);\n  };\n  ContainerWithActions.prototype.clear = function () {\n    _super.prototype.clear.call(this);\n    this._actionCollection.clear();\n  };\n  ContainerWithActions.prototype.getAllInputs = function () {\n    return _super.prototype.getAllInputs.call(this).concat(this._actionCollection.getAllInputs());\n  };\n  ContainerWithActions.prototype.getResourceInformation = function () {\n    return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());\n  };\n  ContainerWithActions.prototype.isBleedingAtBottom = function () {\n    if (this._actionCollection.renderedActionCount == 0) {\n      return _super.prototype.isBleedingAtBottom.call(this);\n    } else {\n      if (this._actionCollection.items.length == 1) {\n        return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\n      } else {\n        return this._actionCollection.expandedAction != null;\n      }\n    }\n  };\n  Object.defineProperty(ContainerWithActions.prototype, \"isStandalone\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ContainerWithActions;\n}(Container);\nexports.ContainerWithActions = ContainerWithActions;\nvar TypeRegistry = /** @class */function () {\n  function TypeRegistry() {\n    this._items = [];\n    this.reset();\n  }\n  TypeRegistry.prototype.findTypeRegistration = function (typeName) {\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].typeName === typeName) {\n        return this._items[i];\n      }\n    }\n    return null;\n  };\n  TypeRegistry.prototype.clear = function () {\n    this._items = [];\n  };\n  TypeRegistry.prototype.registerType = function (typeName, createInstance) {\n    var registrationInfo = this.findTypeRegistration(typeName);\n    if (registrationInfo != null) {\n      registrationInfo.createInstance = createInstance;\n    } else {\n      registrationInfo = {\n        typeName: typeName,\n        createInstance: createInstance\n      };\n      this._items.push(registrationInfo);\n    }\n  };\n  TypeRegistry.prototype.unregisterType = function (typeName) {\n    for (var i = 0; i < this._items.length; i++) {\n      if (this._items[i].typeName === typeName) {\n        this._items.splice(i, 1);\n        return;\n      }\n    }\n  };\n  TypeRegistry.prototype.createInstance = function (typeName) {\n    var registrationInfo = this.findTypeRegistration(typeName);\n    return registrationInfo ? registrationInfo.createInstance() : null;\n  };\n  TypeRegistry.prototype.getItemCount = function () {\n    return this._items.length;\n  };\n  TypeRegistry.prototype.getItemAt = function (index) {\n    return this._items[index];\n  };\n  return TypeRegistry;\n}();\nexports.TypeRegistry = TypeRegistry;\nvar ElementTypeRegistry = /** @class */function (_super) {\n  __extends(ElementTypeRegistry, _super);\n  function ElementTypeRegistry() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ElementTypeRegistry.prototype.reset = function () {\n    this.clear();\n    this.registerType(\"Container\", function () {\n      return new Container();\n    });\n    this.registerType(\"TextBlock\", function () {\n      return new TextBlock();\n    });\n    this.registerType(\"RichTextBlock\", function () {\n      return new RichTextBlock();\n    });\n    this.registerType(\"TextRun\", function () {\n      return new TextRun();\n    });\n    this.registerType(\"Image\", function () {\n      return new Image();\n    });\n    this.registerType(\"ImageSet\", function () {\n      return new ImageSet();\n    });\n    this.registerType(\"Media\", function () {\n      return new Media();\n    });\n    this.registerType(\"FactSet\", function () {\n      return new FactSet();\n    });\n    this.registerType(\"ColumnSet\", function () {\n      return new ColumnSet();\n    });\n    this.registerType(\"ActionSet\", function () {\n      return new ActionSet();\n    });\n    this.registerType(\"Input.Text\", function () {\n      return new TextInput();\n    });\n    this.registerType(\"Input.Date\", function () {\n      return new DateInput();\n    });\n    this.registerType(\"Input.Time\", function () {\n      return new TimeInput();\n    });\n    this.registerType(\"Input.Number\", function () {\n      return new NumberInput();\n    });\n    this.registerType(\"Input.ChoiceSet\", function () {\n      return new ChoiceSetInput();\n    });\n    this.registerType(\"Input.Toggle\", function () {\n      return new ToggleInput();\n    });\n  };\n  return ElementTypeRegistry;\n}(TypeRegistry);\nexports.ElementTypeRegistry = ElementTypeRegistry;\nvar ActionTypeRegistry = /** @class */function (_super) {\n  __extends(ActionTypeRegistry, _super);\n  function ActionTypeRegistry() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ActionTypeRegistry.prototype.reset = function () {\n    this.clear();\n    this.registerType(OpenUrlAction.JsonTypeName, function () {\n      return new OpenUrlAction();\n    });\n    this.registerType(SubmitAction.JsonTypeName, function () {\n      return new SubmitAction();\n    });\n    this.registerType(ShowCardAction.JsonTypeName, function () {\n      return new ShowCardAction();\n    });\n    this.registerType(ToggleVisibilityAction.JsonTypeName, function () {\n      return new ToggleVisibilityAction();\n    });\n  };\n  return ActionTypeRegistry;\n}(TypeRegistry);\nexports.ActionTypeRegistry = ActionTypeRegistry;\nvar AdaptiveCard = /** @class */function (_super) {\n  __extends(AdaptiveCard, _super);\n  function AdaptiveCard() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._cardTypeName = \"AdaptiveCard\";\n    _this._fallbackCard = null;\n    _this.onAnchorClicked = null;\n    _this.onExecuteAction = null;\n    _this.onElementVisibilityChanged = null;\n    _this.onImageLoaded = null;\n    _this.onInlineCardExpanded = null;\n    _this.onInputValueChanged = null;\n    _this.onParseElement = null;\n    _this.onParseAction = null;\n    _this.version = new HostConfig.Version(1, 0);\n    _this.designMode = false;\n    return _this;\n  }\n  Object.defineProperty(AdaptiveCard, \"processMarkdown\", {\n    get: function () {\n      throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\");\n    },\n    set: function (value) {\n      throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\");\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AdaptiveCard.applyMarkdown = function (text) {\n    var result = {\n      didProcess: false\n    };\n    if (AdaptiveCard.onProcessMarkdown) {\n      AdaptiveCard.onProcessMarkdown(text, result);\n    } else if (window[\"markdownit\"]) {\n      // Check for markdownit\n      result.outputHtml = window[\"markdownit\"]().render(text);\n      result.didProcess = true;\n    } else {\n      console.warn(\"Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown\");\n    }\n    return result;\n  };\n  AdaptiveCard.prototype.isVersionSupported = function () {\n    if (this.bypassVersionCheck) {\n      return true;\n    } else {\n      var unsupportedVersion = !this.version || !this.version.isValid || AdaptiveCard.currentVersion.major < this.version.major || AdaptiveCard.currentVersion.major == this.version.major && AdaptiveCard.currentVersion.minor < this.version.minor;\n      return !unsupportedVersion;\n    }\n  };\n  AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {\n    return \"body\";\n  };\n  AdaptiveCard.prototype.internalRender = function () {\n    var renderedElement = _super.prototype.internalRender.call(this);\n    if (AdaptiveCard.useAdvancedCardBottomTruncation) {\n      // Unlike containers, the root card element should be allowed to\n      // be shorter than its content (otherwise the overflow truncation\n      // logic would never get triggered)\n      renderedElement.style.minHeight = null;\n    }\n    return renderedElement;\n  };\n  AdaptiveCard.prototype.getHasBackground = function () {\n    return true;\n  };\n  AdaptiveCard.prototype.getDefaultPadding = function () {\n    return new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);\n  };\n  Object.defineProperty(AdaptiveCard.prototype, \"renderIfEmpty\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"bypassVersionCheck\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"allowCustomStyle\", {\n    get: function () {\n      return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"hasBackground\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AdaptiveCard.prototype.getJsonTypeName = function () {\n    return \"AdaptiveCard\";\n  };\n  AdaptiveCard.prototype.toJSON = function () {\n    var result = _super.prototype.toJSON.call(this);\n    Utils.setProperty(result, \"$schema\", \"http://adaptivecards.io/schemas/adaptive-card.json\");\n    if (!this.bypassVersionCheck && this.version) {\n      Utils.setProperty(result, \"version\", this.version.toString());\n    }\n    Utils.setProperty(result, \"fallbackText\", this.fallbackText);\n    Utils.setProperty(result, \"lang\", this.lang);\n    Utils.setProperty(result, \"speak\", this.speak);\n    return result;\n  };\n  AdaptiveCard.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n    if (this._cardTypeName != \"AdaptiveCard\") {\n      context.addFailure(this, {\n        error: Enums.ValidationError.MissingCardType,\n        message: \"Invalid or missing card type. Make sure the card's type property is set to \\\"AdaptiveCard\\\".\"\n      });\n    }\n    if (!this.bypassVersionCheck && !this.version) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.PropertyCantBeNull,\n        message: \"The version property must be specified.\"\n      });\n    } else if (!this.isVersionSupported()) {\n      context.addFailure(this, {\n        error: Enums.ValidationError.UnsupportedCardVersion,\n        message: \"The specified card version (\" + this.version + \") is not supported. The maximum supported card version is \" + AdaptiveCard.currentVersion\n      });\n    }\n  };\n  AdaptiveCard.prototype.parse = function (json, errors) {\n    this._fallbackCard = null;\n    this._cardTypeName = Utils.getStringValue(json[\"type\"]);\n    this.speak = Utils.getStringValue(json[\"speak\"]);\n    var langId = Utils.getStringValue(json[\"lang\"]);\n    if (langId && typeof langId === \"string\") {\n      try {\n        this.lang = langId;\n      } catch (e) {\n        raiseParseError({\n          error: Enums.ValidationError.InvalidPropertyValue,\n          message: e.message\n        }, errors);\n      }\n    }\n    this.version = HostConfig.Version.parse(json[\"version\"], errors);\n    this.fallbackText = Utils.getStringValue(json[\"fallbackText\"]);\n    var fallbackElement = createElementInstance(null, json[\"fallback\"], !this.isDesignMode(), errors);\n    if (fallbackElement) {\n      this._fallbackCard = new AdaptiveCard();\n      this._fallbackCard.addItem(fallbackElement);\n    }\n    _super.prototype.parse.call(this, json, errors);\n  };\n  AdaptiveCard.prototype.render = function (target) {\n    var renderedCard;\n    if (this.shouldFallback() && this._fallbackCard) {\n      this._fallbackCard.hostConfig = this.hostConfig;\n      renderedCard = this._fallbackCard.render();\n    } else {\n      renderedCard = _super.prototype.render.call(this);\n      if (renderedCard) {\n        renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\"));\n        // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\n        // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\n        // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\n        // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\n        // by default.\n        if (Shared.GlobalSettings.setTabIndexAtCardRoot) {\n          renderedCard.tabIndex = 0;\n        }\n        if (!Utils.isNullOrEmpty(this.speak)) {\n          renderedCard.setAttribute(\"aria-label\", this.speak);\n        }\n      }\n    }\n    if (target) {\n      target.appendChild(renderedCard);\n      this.updateLayout();\n    }\n    return renderedCard;\n  };\n  AdaptiveCard.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n    _super.prototype.updateLayout.call(this, processChildren);\n    if (AdaptiveCard.useAdvancedCardBottomTruncation && this.isRendered()) {\n      var card = this.renderedElement;\n      var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\n      this['handleOverflow'](card.offsetHeight - padding);\n    }\n  };\n  AdaptiveCard.prototype.shouldFallback = function () {\n    return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();\n  };\n  Object.defineProperty(AdaptiveCard.prototype, \"hasVisibleSeparator\", {\n    get: function () {\n      return false;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AdaptiveCard.currentVersion = new HostConfig.Version(1, 2);\n  AdaptiveCard.useAdvancedTextBlockTruncation = true;\n  AdaptiveCard.useAdvancedCardBottomTruncation = false;\n  AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = true;\n  AdaptiveCard.allowMarkForTextHighlighting = false;\n  AdaptiveCard.alwaysBleedSeparators = false;\n  AdaptiveCard.enableFullJsonRoundTrip = false;\n  AdaptiveCard.useBuiltInInputValidation = true;\n  AdaptiveCard.displayInputValidationErrors = true;\n  AdaptiveCard.elementTypeRegistry = new ElementTypeRegistry();\n  AdaptiveCard.actionTypeRegistry = new ActionTypeRegistry();\n  AdaptiveCard.onAnchorClicked = null;\n  AdaptiveCard.onExecuteAction = null;\n  AdaptiveCard.onElementVisibilityChanged = null;\n  AdaptiveCard.onImageLoaded = null;\n  AdaptiveCard.onInlineCardExpanded = null;\n  AdaptiveCard.onInputValueChanged = null;\n  AdaptiveCard.onParseElement = null;\n  AdaptiveCard.onParseAction = null;\n  AdaptiveCard.onParseError = null;\n  AdaptiveCard.onProcessMarkdown = null;\n  return AdaptiveCard;\n}(ContainerWithActions);\nexports.AdaptiveCard = AdaptiveCard;\nvar InlineAdaptiveCard = /** @class */function (_super) {\n  __extends(InlineAdaptiveCard, _super);\n  function InlineAdaptiveCard() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.suppressStyle = false;\n    return _this;\n  }\n  InlineAdaptiveCard.prototype.getDefaultPadding = function () {\n    return new Shared.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);\n  };\n  Object.defineProperty(InlineAdaptiveCard.prototype, \"bypassVersionCheck\", {\n    get: function () {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InlineAdaptiveCard.prototype, \"defaultStyle\", {\n    get: function () {\n      if (this.suppressStyle) {\n        return Enums.ContainerStyle.Default;\n      } else {\n        return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  InlineAdaptiveCard.prototype.render = function (target) {\n    var renderedCard = _super.prototype.render.call(this, target);\n    renderedCard.setAttribute(\"aria-live\", \"polite\");\n    renderedCard.removeAttribute(\"tabindex\");\n    return renderedCard;\n  };\n  InlineAdaptiveCard.prototype.getForbiddenActionTypes = function () {\n    return [ShowCardAction];\n  };\n  return InlineAdaptiveCard;\n}(AdaptiveCard);\nvar defaultHostConfig = new HostConfig.HostConfig({\n  supportsInteractivity: true,\n  spacing: {\n    small: 10,\n    default: 20,\n    medium: 30,\n    large: 40,\n    extraLarge: 50,\n    padding: 20\n  },\n  separator: {\n    lineThickness: 1,\n    lineColor: \"#EEEEEE\"\n  },\n  fontTypes: {\n    default: {\n      fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n      fontSizes: {\n        small: 12,\n        default: 14,\n        medium: 17,\n        large: 21,\n        extraLarge: 26\n      },\n      fontWeights: {\n        lighter: 200,\n        default: 400,\n        bolder: 600\n      }\n    },\n    monospace: {\n      fontFamily: \"'Courier New', Courier, monospace\",\n      fontSizes: {\n        small: 12,\n        default: 14,\n        medium: 17,\n        large: 21,\n        extraLarge: 26\n      },\n      fontWeights: {\n        lighter: 200,\n        default: 400,\n        bolder: 600\n      }\n    }\n  },\n  imageSizes: {\n    small: 40,\n    medium: 80,\n    large: 160\n  },\n  containerStyles: {\n    default: {\n      backgroundColor: \"#FFFFFF\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    emphasis: {\n      backgroundColor: \"#08000000\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    accent: {\n      backgroundColor: \"#C7DEF9\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    good: {\n      backgroundColor: \"#CCFFCC\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    attention: {\n      backgroundColor: \"#FFC5B2\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    },\n    warning: {\n      backgroundColor: \"#FFE2B2\",\n      foregroundColors: {\n        default: {\n          default: \"#333333\",\n          subtle: \"#EE333333\"\n        },\n        dark: {\n          default: \"#000000\",\n          subtle: \"#66000000\"\n        },\n        light: {\n          default: \"#FFFFFF\",\n          subtle: \"#33000000\"\n        },\n        accent: {\n          default: \"#2E89FC\",\n          subtle: \"#882E89FC\"\n        },\n        attention: {\n          default: \"#cc3300\",\n          subtle: \"#DDcc3300\"\n        },\n        good: {\n          default: \"#54a254\",\n          subtle: \"#DD54a254\"\n        },\n        warning: {\n          default: \"#e69500\",\n          subtle: \"#DDe69500\"\n        }\n      }\n    }\n  },\n  actions: {\n    maxActions: 5,\n    spacing: Enums.Spacing.Default,\n    buttonSpacing: 10,\n    showCard: {\n      actionMode: Enums.ShowCardActionMode.Inline,\n      inlineTopMargin: 16\n    },\n    actionsOrientation: Enums.Orientation.Horizontal,\n    actionAlignment: Enums.ActionAlignment.Left\n  },\n  adaptiveCard: {\n    allowCustomStyle: false\n  },\n  imageSet: {\n    imageSize: Enums.Size.Medium,\n    maxImageHeight: 100\n  },\n  factSet: {\n    title: {\n      color: Enums.TextColor.Default,\n      size: Enums.TextSize.Default,\n      isSubtle: false,\n      weight: Enums.TextWeight.Bolder,\n      wrap: true,\n      maxWidth: 150\n    },\n    value: {\n      color: Enums.TextColor.Default,\n      size: Enums.TextSize.Default,\n      isSubtle: false,\n      weight: Enums.TextWeight.Default,\n      wrap: true\n    },\n    spacing: 10\n  }\n});","map":{"version":3,"mappings":"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","names":["invokeSetCollection","action","collection","isActionAllowed","forbiddenActionTypes","i","length","getJsonTypeName","InstanceCreationErrorType","createCardObjectInstance","parent","json","forbiddenTypeNames","allowFallback","createInstanceCallback","createValidationErrorCallback","errors","result","tryToFallback","typeName","Utils","getStringValue","indexOf","raiseParseError","ForbiddenType","UnknownType","setParent","parse","shouldFallback","fallback","setShouldFallback","toLowerCase","createActionInstance","AdaptiveCard","actionTypeRegistry","createInstance","errorType","error","Enums","ValidationError","UnknownActionType","message","ActionTypeNotAllowed","exports","createElementInstance","elementTypeRegistry","UnknownElementType","ElementTypeNotAllowed","SerializableObject","_rawProperties","enableFullJsonRoundTrip","name","value","shouldDeleteProperty","isNullOrEmpty","undefined","cardObject","ValidationResults","failures","index","getFailureIndex","failure","ValidationFailure","push","__extends","CardObject","context","id","allIds","hasOwnProperty","addFailure","DuplicateId","_super","toJSON","setProperty","internalValidateProperties","_this","HostConfig","HostCapabilities","Spacing","Default","CardElement","renderedSeparator","renderSeparation","hostConfig","spacing","getEffectiveSpacing","lineThickness","separator","lineColor","separatorOrientation","alwaysBleedSeparators","Orientation","Horizontal","parentContainer","getParentContainer","getEffectivePadding","parentPhysicalPadding","paddingDefinitionToSpacingDefinition","style","marginLeft","left","marginRight","right","displayMode","isDesignMode","isVisible","_defaultRenderedElementDisplayMode","_renderedElement","display","_separatorElement","isFirstElement","visibility","raiseElementVisibilityChangedEvent","maxHeight","isHiddenDueToOverflow","handled","truncateOverflow","_truncatedDueToOverflow","hideElementDueToOverflow","showElementHiddenDueToOverflow","sizeChanged","undoOverflowTruncation","element","document","createElement","border","padding","minHeight","fontSize","innerText","renderedElement","height","flex","minPixelHeight","internalRender","separatorElement","isBleeding","Shared","PaddingDefinition","getImmediateSurroundingPadding","physicalPadding","_padding","Object","ContainerStyle","horizontalAlignment","setEnumProperty","HorizontalAlignment","supportsMinHeight","isNaN","_parent","getEffectiveStyle","defaultStyle","processTop","processRight","processBottom","processLeft","doProcessTop","isTopElement","doProcessRight","isRightMostElement","doProcessBottom","isBottomElement","doProcessLeft","isLeftMostElement","effectivePadding","top","None","bottom","raiseParseElementEvent","requires","getBoolValue","getEnumValue","jsonSeparation","Large","Deprecated","jsonHeight","jsonMinHeight","isValid","size","SizeAndUnit","unit","SizeUnit","Pixel","physicalSize","InvalidPropertyValue","Error","CardElementContainer","removeItem","overrideInternalRender","internalRenderSeparator","customCssSelector","classList","add","boxSizing","adjustRenderedElementSize","updateLayout","createPlaceholderElement","processChildren","updateRenderedElementVisibility","applyPadding","cardElement","rootElement","getRootElement","designMode","offsetHeight","isAtTheVeryLeft","isAtTheVeryRight","isAtTheVeryTop","isLastElement","isAtTheVeryBottom","currentElement","Container","_shouldFallback","areAllMet","hostCapabilities","getPadding","allowCustomPadding","getDefaultPadding","_lang","lang","regEx","matches","exec","_hostConfig","defaultHostConfig","_isVisible","useAdvancedCardBottomTruncation","TextSize","TextWeight","TextColor","BaseTextBlock","containerStyles","getStyleByName","fontType","Small","fontSizes","small","Medium","medium","large","ExtraLarge","extraLarge","default","colorSet","color","Accent","accent","Dark","dark","Light","light","Good","good","Warning","warning","Attention","attention","_text","text","weight","isSubtle","FontType","targetElement","getFontTypeDefinition","fontFamily","colorDefinition","getColorDefinition","getEffectiveStyleDefinition","foregroundColors","effectiveColor","stringToCssColor","subtle","fontWeight","Lighter","fontWeights","lighter","Bolder","bolder","toString","sizeString","weightString","setText","_selectAction","TextBlock","maxLines","_computedLineHeight","innerHTML","_originalInnerHtml","children","isTextOnly","truncationSupported","tagName","truncate","_processedText","getRenderedDomElementType","makeCssClassName","overflow","applyStylesTo","selectAction","onclick","e","preventDefault","cancelBubble","execute","supportsInteractivity","tabIndex","setAttribute","getAriaRole","title","_treatAsPlainText","formattedText","TextFormatters","formatText","useMarkdown","allowMarkForTextHighlighting","replace","markdownProcessingResult","applyMarkdown","didProcess","outputHtml","markStyle","effectiveStyle","highlightBackgroundColor","highlightForegroundColor","firstElementChild","HTMLElement","marginTop","width","wrap","textOverflow","lastElementChild","marginBottom","anchors","getElementsByTagName","anchor","target","raiseAnchorClickedEvent","wordWrap","whiteSpace","useAdvancedTextBlockTruncation","truncateIfSupported","restoreOriginalContent","setNumberProperty","isRtl","Center","textAlign","Right","lineHeights","getFontSize","lineHeight","getNumberValue","isRendered","Label","forElementId","htmlFor","TextRun","href","getHref","appendChild","italic","fontStyle","strikethrough","textDecoration","highlight","backgroundColor","highlightColors","ShowCardAction","JsonTypeName","RichTextBlock","inline","forceAdd","isInline","doAdd","_inlines","className","renderedInlines","_a","_i","renderedInline","render","asString","Array","isArray","jsonInline","textRun","internalAddInline","jsonInlines","splice","Fact","FactSet","facts","borderWidth","borderSpacing","borderStyle","borderCollapse","trElement","factSet","tdElement","maxWidth","verticalAlign","textBlock","setArrayProperty","jsonFacts","jsonFacts_1","jsonFact","fact","ImageStyle","Size","Auto","Image","pixelWidth","pixelHeight","Stretch","imageSizes","url","alignItems","onkeypress","keyCode","justifyContent","imageElement","onload","raiseImageLoadedEvent","onerror","card","errorElement","applySize","minWidth","Person","borderRadius","backgroundPosition","backgroundRepeat","src","altText","alt","getActionById","styleString","parseDimension","mimeType","forbiddenElementTypes","isInteractive","forbiddenElementTypes_1","forbiddenElementType","SpacingDefinition","paddingTop","paddingRight","paddingBottom","paddingLeft","isSelectable","getItemCount","item","getItemAt","InteractivityNotAllowed","isElementAllowed","getForbiddenElementTypes","allowVerticalOverflow","overflowX","overflowY","concat","getAllInputs","getResourceInformation","getElementById","ImageSet","_images","flexWrap","imageSize","renderedImage","margin","imageSet","maxImageHeight","itemIndex","images","image","jsonImages","addImage","MediaSource","Media","poster","media","defaultPoster","_selectedSources","_selectedMediaType","sources","source","mimeComponents","split","supportedMediaTypes","playButtonArrowWidth","playButtonArrowHeight","posterRootElement","position","posterUrl","getPosterUrl","posterImageElement_1","parentNode","removeChild","playButtonOuterElement","allowInlinePlayback","mediaPlayerElement","renderMediaPlayer","play","onPlay","playButtonInnerElement","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopColor","borderRightColor","borderBottomColor","transform","playButtonContainer","mediaElement","videoPlayer","controls","preload","type","processSources","renderPoster","jsonSource","mediaSource","InputValidationNecessity","Optional","InputValidationOptions","necessity","errorMessage","Input","_renderedInputControlElement","_inputControlContainerElement","_outerContainerElement","flexDirection","useBuiltInInputValidation","isNullable","validation","RequiredWithVisualCue","resetValidationFailureCue","onValueChanged","raiseInputValueChangedEvent","remove","_errorMessageElement","displayInputValidationErrors","textContent","defaultValue","PropertyCantBeNull","showValidationErrorMessage","jsonValidation","_defaultValue","parseInputValue","InputTextStyle","Text","TextInput","isMultiline","textareaElement","placeholder","maxLength","oninput","valueChanged","inlineAction","inputElement","renderedInputControl","button_1","iconUrl","icon_1","removeProperty","inputControlContainerElement","_inlineAction","renderedInputControlElement","ToggleInput","_checkboxInputElement","generateUniqueId","valueOn","checked","onchange","label","useMarkdownInRadioButtonAndCheckbox","labelElement","spacerElement","valueOff","Choice","ChoiceSetInput","uniqueCwtegoryName","uniqueCategoryCounter","options","_selectElement","selected","removeAttribute","isMultiSelect","isCompact","option","disabled","hidden","choices","option_1","internalApplyAriaCurrent","uniqueCategoryName","getUniqueCategoryName","_toggleInputs","i_1","radioInput","compoundInput","defaultValues","choiceSetInputValueSeparator","i_2","checkboxInput","CollectionCantBeEmpty","choice","jsonChoice","selectedIndex","NumberInput","_numberInputElement","min","max","_min","_max","valueAsNumber","DateInput","_dateInputElement","TimeInput","_timeInputElement","test","ActionButtonState","parentContainerStyle","Normal","_parentContainerStyle","ActionButton","_state","Expanded","Subdued","ActionStyle","Positive","makeCssClassNames","click","updateCssStyle","onClick","Action","actionCollection","_actionCollection","allInputs","inputs","referencedInputs","ignoreInputValidation","keys","key","input","validateValue","baseCssClass","buttonElement","addCssClasses","hasTitle","titleElement","actions","iconPlacement","ActionIconPlacement","AboveTitle","allowTitleToWrap","iconElement","iconSize","onExecute","raiseExecuteActionEvent","getReferencedInputs","internalValidateInputs","internalPrepareForExecution","raiseParseActionEvent","removeAction","internalGetReferencedInputs","SubmitAction","allInputs_1","_originalData","_processedData","JSON","stringify","_isPrepared","_ignoreInputValidation","data","OpenUrlAction","ToggleVisibilityAction","targetElements","elementId","jsonTargetElements","jsonTargetElements_1","jsonElementId","StringWithSubstitutions","HttpHeader","_value","getOriginal","substituteInputValues","ContentTypes","applicationXWwwFormUrlencoded","get","newValue","set","HttpAction","_url","_headers","header","_body","contentType","applicationJson","prepareForExecution","method","headers","body","jsonHeader","httpHeader","InlineAdaptiveCard","jsonCard","owner","_owner","ActionCollection","_actionCardContainer","_actionCard","_renderedActionCount","showCard","inlineTopMargin","previouslyExpandedAction","_expandedAction","refreshContainer","layoutChanged","raiseInlineCardExpandedEvent","suppressStyle","raiseEvent","renderedCard","buttons","state","hideActionCard","showActionCard","actionButton","actionMode","ShowCardActionMode","Popup","collapseExpandedAction","expandShowCardAction","clear","json_1","jsonAction","addAction","items","maxActions","TooManyActions","getForbiddenActionTypes","orientation","Math","preExpandSingleShowCardAction","buttonStrip","actionAlignment","ActionAlignment","findActionButton","ab","actionClicked","actionsOrientation","buttonSpacing","spacer","buttonStripContainer","expandedAction","actionIndex","ActionSet","renderedActionCount","isBleedingAtBottom","getActionCount","getActionAt","validateProperties","jsonOrientation","StylableCardElementContainer","styleDefinition","surroundingPadding","currentElementHasBackgroundImage","backgroundImage","hasExplicitStyle","getHasBackground","Padding","_bleed","_style","alwaysAllowBleed","getBleed","applyBackground","allowCustomStyle","BackgroundImage","defaultFillMode","defaultHorizontalAlignment","defaultVerticalAlignment","fillMode","verticalAlignment","FillMode","VerticalAlignment","Repeat","RepeatHorizontally","RepeatVertically","Cover","backgroundSize","backgroundPositionX","backgroundPositionY","Bottom","Left","Top","forceInsert","isStandalone","_items","apply","_renderedItems","rtl","dir","verticalContentAlignment","placeholderElement","boundary","offsetTop","handleElement","elt","getFitStatus","ContainerFitStatus","FullyInContainer","Overflowing","maxHeight_1","FullyOutOfContainer","elements","getItemsCollectionPropertyName","bleed","firstRenderedItem","getFirstVisibleRenderedItem","isBleedingAtTop","lastRenderedItem","getLastVisibleRenderedItem","reset","jsonBackgroundImage","insertItemAt","insertBefore","insertAfter","setPadding","getSelectAction","setSelectAction","setBleed","Column","minDesignTimeColumnHeight","sizeAndUnit","_computedWeight","Vertical","jsonWidth","invalidWidth","ColumnSet","_renderedColumns","_columns","totalWeight","column","Weight","_c","_b","computedWeight","renderedColumn","columns","getCount","getColumnAt","jsonColumns","createColumnInstance","weightedColumns","stretchedColumns","Hint","onImageLoadedHandler","onImageLoaded","onAnchorClickedHandler","onAnchorClicked","onExecuteActionHandler","onExecuteAction","isExpanded","onInlineCardExpandedHandler","onInlineCardExpanded","onInputValueChangedHandler","onInputValueChanged","shouldUpdateLayout","onElementVisibilityChangedHandler","onElementVisibilityChanged","onParseElementHandler","onParseElement","onParseActionHandler","onParseAction","onParseError","ContainerWithActions","renderedActions","renderIfEmpty","TypeRegistry","registrationInfo","findTypeRegistration","ElementTypeRegistry","registerType","ActionTypeRegistry","Version","onProcessMarkdown","window","console","warn","bypassVersionCheck","unsupportedVersion","version","currentVersion","major","minor","adaptiveCard","fallbackText","speak","_cardTypeName","MissingCardType","isVersionSupported","UnsupportedCardVersion","_fallbackCard","langId","fallbackElement","addItem","GlobalSettings","setTabIndexAtCardRoot","Emphasis","fontTypes","monospace","emphasis","Inline"],"sources":["C:\\Projects\\health-care-chatbot\\node_modules\\adaptivecards\\src\\card-elements.ts"],"sourcesContent":["﻿// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport * as Enums from \"./enums\";\r\nimport * as Shared from \"./shared\";\r\nimport * as Utils from \"./utils\";\r\nimport * as HostConfig from \"./host-config\";\r\nimport * as TextFormatters from \"./text-formatters\";\r\n\r\nfunction invokeSetCollection(action: Action, collection: ActionCollection) {\r\n    if (action) {\r\n        // Closest emulation of \"internal\" in TypeScript.\r\n        action[\"setCollection\"](collection);\r\n    }\r\n}\r\n\r\nfunction isActionAllowed(action: Action, forbiddenActionTypes: Array<string>): boolean {\r\n    if (forbiddenActionTypes) {\r\n        for (var i = 0; i < forbiddenActionTypes.length; i++) {\r\n            if (action.getJsonTypeName() === forbiddenActionTypes[i]) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nenum InstanceCreationErrorType {\r\n    UnknownType,\r\n    ForbiddenType\r\n}\r\n\r\nfunction createCardObjectInstance<T extends CardObject>(\r\n    parent: CardElement,\r\n    json: any,\r\n    forbiddenTypeNames: string[],\r\n    allowFallback: boolean,\r\n    createInstanceCallback: (typeName: string) => T,\r\n    createValidationErrorCallback: (typeName: string, errorType: InstanceCreationErrorType) => HostConfig.IValidationError,\r\n    errors: Array<HostConfig.IValidationError>): T {\r\n    let result: T = null;\r\n\r\n    if (json && typeof json === \"object\") {\r\n        let tryToFallback = false;\r\n\t\tlet typeName = Utils.getStringValue(json[\"type\"]);\r\n\r\n        if (forbiddenTypeNames && forbiddenTypeNames.indexOf(typeName) >= 0) {\r\n            raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.ForbiddenType), errors);\r\n        }\r\n        else {\r\n            result = createInstanceCallback(typeName);\r\n\r\n            if (!result) {\r\n                tryToFallback = allowFallback;\r\n\r\n                raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.UnknownType), errors);\r\n            }\r\n            else {\r\n                result.setParent(parent);\r\n                result.parse(json, errors);\r\n\r\n                tryToFallback = result.shouldFallback() && allowFallback;\r\n            }\r\n\r\n            if (tryToFallback) {\r\n                let fallback = json[\"fallback\"];\r\n\r\n                if (!fallback) {\r\n                    parent.setShouldFallback(true);\r\n                }\r\n                if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\r\n                    result = null;\r\n                }\r\n                else if (typeof fallback === \"object\") {\r\n                    result = createCardObjectInstance<T>(\r\n                        parent,\r\n                        fallback,\r\n                        forbiddenTypeNames,\r\n                        true,\r\n                        createInstanceCallback,\r\n                        createValidationErrorCallback,\r\n                        errors);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function createActionInstance(\r\n    parent: CardElement,\r\n    json: any,\r\n    forbiddenActionTypes: string[],\r\n    allowFallback: boolean,\r\n    errors: Array<HostConfig.IValidationError>): Action {\r\n    return createCardObjectInstance<Action>(\r\n        parent,\r\n        json,\r\n        forbiddenActionTypes,\r\n        allowFallback,\r\n        (typeName: string) => { return AdaptiveCard.actionTypeRegistry.createInstance(typeName); },\r\n        (typeName: string, errorType: InstanceCreationErrorType) => {\r\n            if (errorType == InstanceCreationErrorType.UnknownType) {\r\n                return {\r\n                    error: Enums.ValidationError.UnknownActionType,\r\n                    message: \"Unknown action type: \" + typeName + \". Fallback will be used if present.\"\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    error: Enums.ValidationError.ActionTypeNotAllowed,\r\n                    message: \"Action type \" + typeName + \" is not allowed in this context.\"\r\n                }\r\n            }\r\n        },\r\n        errors);\r\n}\r\n\r\nexport function createElementInstance(\r\n    parent: CardElement,\r\n    json: any,\r\n    allowFallback: boolean,\r\n    errors: Array<HostConfig.IValidationError>): CardElement {\r\n    return createCardObjectInstance<CardElement>(\r\n        parent,\r\n        json,\r\n        [], // Forbidden types not supported for elements for now\r\n        allowFallback,\r\n        (typeName: string) => { return AdaptiveCard.elementTypeRegistry.createInstance(typeName); },\r\n        (typeName: string, errorType: InstanceCreationErrorType) => {\r\n            if (errorType == InstanceCreationErrorType.UnknownType) {\r\n                return {\r\n                    error: Enums.ValidationError.UnknownElementType,\r\n                    message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    error: Enums.ValidationError.ElementTypeNotAllowed,\r\n                    message: \"Element type \" + typeName + \" is not allowed in this context.\"\r\n                }\r\n            }\r\n        },\r\n        errors);\r\n}\r\n\r\nexport abstract class SerializableObject {\r\n    private _rawProperties = {};\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        this._rawProperties = AdaptiveCard.enableFullJsonRoundTrip ? json : {};\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result: any;\r\n\r\n        if (AdaptiveCard.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === \"object\") {\r\n            result = this._rawProperties;\r\n        }\r\n        else {\r\n            result = {};\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    setCustomProperty(name: string, value: any) {\r\n        let shouldDeleteProperty = (typeof value === \"string\" && Utils.isNullOrEmpty(value)) || value === undefined || value === null;\r\n\r\n        if (shouldDeleteProperty) {\r\n            delete this._rawProperties[name];\r\n        }\r\n        else {\r\n            this._rawProperties[name] = value;\r\n        }\r\n    }\r\n\r\n    getCustomProperty(name: string): any {\r\n        return this._rawProperties[name];\r\n    }\r\n}\r\n\r\nexport class ValidationFailure {\r\n    readonly errors: HostConfig.IValidationError[] = [];\r\n\r\n    constructor(readonly cardObject: CardObject) { }\r\n}\r\n\r\nexport class ValidationResults {\r\n    private getFailureIndex(cardObject: CardObject) {\r\n        for (let i = 0; i < this.failures.length; i++) {\r\n            if (this.failures[i].cardObject === cardObject) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    readonly allIds: Shared.Dictionary<number> = {};\r\n    readonly failures: ValidationFailure[] = [];\r\n\r\n    addFailure(cardObject: CardObject, error: HostConfig.IValidationError) {\r\n        let index = this.getFailureIndex(cardObject);\r\n        let failure: ValidationFailure;\r\n\r\n        if (index < 0) {\r\n            failure = new ValidationFailure(cardObject);\r\n\r\n            this.failures.push(failure);\r\n        }\r\n        else {\r\n            failure = this.failures[index];\r\n        }\r\n\r\n        failure.errors.push(error);\r\n    }\r\n}\r\n\r\nexport abstract class CardObject extends SerializableObject {\r\n    abstract getJsonTypeName(): string;\r\n    abstract shouldFallback(): boolean;\r\n    abstract setParent(parent: CardElement);\r\n\r\n    id: string;\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        if (!Utils.isNullOrEmpty(this.id)) {\r\n            if (context.allIds.hasOwnProperty(this.id)) {\r\n                if (context.allIds[this.id] == 1) {\r\n                    context.addFailure(\r\n                        this,\r\n                        {\r\n                            error: Enums.ValidationError.DuplicateId,\r\n                            message: \"Duplicate Id: \" + this.id\r\n                        });\r\n                }\r\n\r\n                context.allIds[this.id] += 1;\r\n            }\r\n            else {\r\n                context.allIds[this.id] = 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.id = Utils.getStringValue(json[\"id\"]);\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"type\", this.getJsonTypeName());\r\n        Utils.setProperty(result, \"id\", this.id);\r\n\r\n        return result;\r\n    }\r\n\r\n    validateProperties(): ValidationResults {\r\n        let result = new ValidationResults();\r\n\r\n        this.internalValidateProperties(result);\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport type CardElementHeight = \"auto\" | \"stretch\";\r\n\r\nexport abstract class CardElement extends CardObject {\r\n    private _shouldFallback: boolean = false;\r\n    private _lang: string = undefined;\r\n    private _hostConfig?: HostConfig.HostConfig = null;\r\n    private _parent: CardElement = null;\r\n    private _renderedElement: HTMLElement = null;\r\n    private _separatorElement: HTMLElement = null;\r\n    private _isVisible: boolean = true;\r\n    private _truncatedDueToOverflow: boolean = false;\r\n    private _defaultRenderedElementDisplayMode: string = null;\r\n    private _padding: Shared.PaddingDefinition = null;\r\n\r\n    private internalRenderSeparator(): HTMLElement {\r\n        let renderedSeparator = Utils.renderSeparation(\r\n            this.hostConfig,\r\n            {\r\n                spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\r\n                lineThickness: this.separator ? this.hostConfig.separator.lineThickness : null,\r\n                lineColor: this.separator ? this.hostConfig.separator.lineColor : null\r\n            },\r\n            this.separatorOrientation);\r\n\r\n            if (AdaptiveCard.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {\r\n                // Adjust separator's margins if the option to always bleed separators is turned on\r\n                let parentContainer = this.getParentContainer();\r\n\r\n                if (parentContainer && parentContainer.getEffectivePadding()) {\r\n                    let parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\r\n\r\n                    renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\r\n                    renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\r\n                }\r\n            }\r\n\r\n            return renderedSeparator;\r\n    }\r\n\r\n    private updateRenderedElementVisibility() {\r\n        let displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : \"none\";\r\n\r\n        if (this._renderedElement) {\r\n            this._renderedElement.style.display = displayMode;\r\n        }\r\n\r\n        if (this._separatorElement) {\r\n            if (this.parent && this.parent.isFirstElement(this)) {\r\n                this._separatorElement.style.display = \"none\";\r\n            }\r\n            else {\r\n                this._separatorElement.style.display = displayMode;\r\n            }\r\n        }\r\n    }\r\n\r\n    private hideElementDueToOverflow() {\r\n        if (this._renderedElement && this.isVisible) {\r\n            this._renderedElement.style.visibility = 'hidden';\r\n            this.isVisible = false;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    }\r\n\r\n    private showElementHiddenDueToOverflow() {\r\n        if (this._renderedElement && !this.isVisible) {\r\n            this._renderedElement.style.visibility = null;\r\n            this.isVisible = true;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    }\r\n\r\n    // Marked private to emulate internal access\r\n    private handleOverflow(maxHeight: number) {\r\n        if (this.isVisible || this.isHiddenDueToOverflow()) {\r\n            var handled = this.truncateOverflow(maxHeight);\r\n\r\n            // Even if we were unable to truncate the element to fit this time,\r\n            // it still could have been previously truncated\r\n            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\r\n\r\n            if (!handled) {\r\n                this.hideElementDueToOverflow();\r\n            }\r\n            else if (handled && !this.isVisible) {\r\n                this.showElementHiddenDueToOverflow();\r\n            }\r\n        }\r\n    }\r\n\r\n    // Marked private to emulate internal access\r\n    private resetOverflow(): boolean {\r\n        var sizeChanged = false;\r\n\r\n        if (this._truncatedDueToOverflow) {\r\n            this.undoOverflowTruncation();\r\n            this._truncatedDueToOverflow = false;\r\n            sizeChanged = true;\r\n        }\r\n\r\n        if (this.isHiddenDueToOverflow) {\r\n            this.showElementHiddenDueToOverflow();\r\n        }\r\n\r\n        return sizeChanged;\r\n    }\r\n\r\n    protected createPlaceholderElement(): HTMLElement {\r\n        var element = document.createElement(\"div\");\r\n        element.style.border = \"1px dashed #DDDDDD\";\r\n        element.style.padding = \"4px\";\r\n        element.style.minHeight = \"32px\";\r\n        element.style.fontSize = \"10px\";\r\n        element.innerText = \"Empty \" + this.getJsonTypeName();\r\n\r\n        return element;\r\n    }\r\n\r\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\r\n        if (this.height === \"auto\") {\r\n            renderedElement.style.flex = \"0 0 auto\";\r\n        }\r\n        else {\r\n            renderedElement.style.flex = \"1 1 auto\";\r\n        }\r\n\r\n        if (this.minPixelHeight) {\r\n            renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n        }\r\n    }\r\n\r\n    protected abstract internalRender(): HTMLElement;\r\n\r\n    protected overrideInternalRender(): HTMLElement {\r\n        return this.internalRender();\r\n    }\r\n\r\n    protected applyPadding() {\r\n        if (this.separatorElement) {\r\n            if (AdaptiveCard.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {\r\n                let padding = new Shared.PaddingDefinition();\r\n\r\n                this.getImmediateSurroundingPadding(padding);\r\n\r\n                let physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n\r\n                this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            }\r\n            else {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Called when this element overflows the bottom of the card.\r\n     * maxHeight will be the amount of space still available on the card (0 if\r\n     * the element is fully off the card).\r\n     */\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        // Child implementations should return true if the element handled\r\n        // the truncation request such that its content fits within maxHeight,\r\n        // false if the element should fall back to being hidden\r\n        return false;\r\n    }\r\n\r\n    /*\r\n     * This should reverse any changes performed in truncateOverflow().\r\n     */\r\n    protected undoOverflowTruncation() { }\r\n\r\n    protected getDefaultPadding(): Shared.PaddingDefinition {\r\n        return new Shared.PaddingDefinition();\r\n    }\r\n\r\n    protected getHasBackground(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected getPadding(): Shared.PaddingDefinition {\r\n        return this._padding;\r\n    }\r\n\r\n    protected setPadding(value: Shared.PaddingDefinition) {\r\n        this._padding = value;\r\n    }\r\n\r\n    protected get supportsMinHeight(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected get useDefaultSizing(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get allowCustomPadding(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get separatorOrientation(): Enums.Orientation {\r\n        return Enums.Orientation.Horizontal;\r\n    }\r\n\r\n    protected get defaultStyle(): string {\r\n        return Enums.ContainerStyle.Default;\r\n    }\r\n\r\n    readonly requires = new HostConfig.HostCapabilities();\r\n\r\n    horizontalAlignment?: Enums.HorizontalAlignment = null;\r\n    spacing: Enums.Spacing = Enums.Spacing.Default;\r\n    separator: boolean = false;\r\n    customCssSelector: string = null;\r\n    height: CardElementHeight = \"auto\";\r\n    minPixelHeight?: number = null;\r\n\r\n    abstract getJsonTypeName(): string;\r\n\r\n    asString(): string {\r\n        return \"\";\r\n    }\r\n\r\n    isBleeding(): boolean {\r\n        return false;\r\n    }\r\n\r\n\ttoJSON(): any {\r\n\t\tlet result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"isVisible\", this.isVisible, true);\r\n\r\n        if (this.horizontalAlignment !== null) {\r\n            Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment);\r\n        }\r\n\r\n        Utils.setEnumProperty(Enums.Spacing, result, \"spacing\", this.spacing, Enums.Spacing.Default);\r\n        Utils.setProperty(result, \"separator\", this.separator, false);\r\n        Utils.setProperty(result, \"height\", this.height, \"auto\");\r\n\r\n        if (this.supportsMinHeight) {\r\n            Utils.setProperty(result, \"minHeight\", typeof this.minPixelHeight === \"number\" && !isNaN(this.minPixelHeight) ? this.minPixelHeight + \"px\" : undefined);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    setParent(value: CardElement) {\r\n        this._parent = value;\r\n    }\r\n\r\n    getEffectiveStyle(): string {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveStyle();\r\n        }\r\n\r\n        return this.defaultStyle;\r\n    }\r\n\r\n    getForbiddenElementTypes(): Array<string> {\r\n        return null;\r\n    }\r\n\r\n    getForbiddenActionTypes(): Array<any> {\r\n        return null;\r\n    }\r\n\r\n    getImmediateSurroundingPadding(\r\n        result: Shared.PaddingDefinition,\r\n        processTop: boolean = true,\r\n        processRight: boolean = true,\r\n        processBottom: boolean = true,\r\n        processLeft: boolean = true) {\r\n        if (this.parent) {\r\n            let doProcessTop = processTop && this.parent.isTopElement(this);\r\n            let doProcessRight = processRight && this.parent.isRightMostElement(this);\r\n            let doProcessBottom = processBottom && this.parent.isBottomElement(this);\r\n            let doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\r\n\r\n            let effectivePadding = this.parent.getEffectivePadding();\r\n\r\n            if (effectivePadding) {\r\n                if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {\r\n                    result.top = effectivePadding.top;\r\n\r\n                    doProcessTop = false;\r\n                }\r\n\r\n                if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {\r\n                    result.right = effectivePadding.right;\r\n\r\n                    doProcessRight = false;\r\n                }\r\n\r\n                if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {\r\n                    result.bottom = effectivePadding.bottom;\r\n\r\n                    doProcessBottom = false;\r\n                }\r\n\r\n                if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {\r\n                    result.left = effectivePadding.left;\r\n\r\n                    doProcessLeft = false;\r\n                }\r\n            }\r\n\r\n            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\r\n                this.parent.getImmediateSurroundingPadding(\r\n                    result,\r\n                    doProcessTop,\r\n                    doProcessRight,\r\n                    doProcessBottom,\r\n                    doProcessLeft);\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n\t\tsuper.parse(json, errors);\r\n\r\n        raiseParseElementEvent(this, json, errors);\r\n\r\n        this.requires.parse(json[\"requires\"], errors);\r\n        this.isVisible = Utils.getBoolValue(json[\"isVisible\"], this.isVisible);\r\n        this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\r\n\r\n        this.spacing = Utils.getEnumValue(Enums.Spacing, json[\"spacing\"], Enums.Spacing.Default);\r\n        this.separator = Utils.getBoolValue(json[\"separator\"], this.separator);\r\n\r\n        let jsonSeparation = json[\"separation\"];\r\n\r\n        if (jsonSeparation !== undefined) {\r\n            if (jsonSeparation === \"none\") {\r\n                this.spacing = Enums.Spacing.None;\r\n                this.separator = false;\r\n            }\r\n            else if (jsonSeparation === \"strong\") {\r\n                this.spacing = Enums.Spacing.Large;\r\n                this.separator = true;\r\n            }\r\n            else if (jsonSeparation === \"default\") {\r\n                this.spacing = Enums.Spacing.Default;\r\n                this.separator = false;\r\n            }\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The \\\"separation\\\" property is deprecated and will be removed. Use the \\\"spacing\\\" and \\\"separator\\\" properties instead.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n\r\n        let jsonHeight = json[\"height\"];\r\n\r\n        if (jsonHeight === \"auto\" || jsonHeight === \"stretch\") {\r\n            this.height = jsonHeight;\r\n        }\r\n\r\n        if (this.supportsMinHeight) {\r\n            let jsonMinHeight = json[\"minHeight\"];\r\n\r\n            if (jsonMinHeight && typeof jsonMinHeight === \"string\") {\r\n                let isValid = false;\r\n\r\n                try {\r\n                    let size = Shared.SizeAndUnit.parse(jsonMinHeight, true);\r\n\r\n                    if (size.unit == Enums.SizeUnit.Pixel) {\r\n                        this.minPixelHeight = size.physicalSize;\r\n\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                catch {\r\n                    // Do nothing. A parse error is emitted below\r\n                }\r\n\r\n                if (!isValid) {\r\n                    raiseParseError(\r\n                        {\r\n                            error: Enums.ValidationError.InvalidPropertyValue,\r\n                            message: \"Invalid \\\"minHeight\\\" value: \" + jsonMinHeight\r\n                        },\r\n                        errors\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.minPixelHeight = null;\r\n        }\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return 0;\r\n    }\r\n\r\n    getActionAt(index: number): Action {\r\n        throw new Error(\"Index out of range.\");\r\n    }\r\n\r\n    remove(): boolean {\r\n        if (this.parent && this.parent instanceof CardElementContainer) {\r\n            return this.parent.removeItem(this);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    render(): HTMLElement {\r\n        this._renderedElement = this.overrideInternalRender();\r\n        this._separatorElement = this.internalRenderSeparator();\r\n\r\n        if (this._renderedElement) {\r\n            if (this.customCssSelector) {\r\n                this._renderedElement.classList.add(this.customCssSelector);\r\n            }\r\n\r\n            this._renderedElement.style.boxSizing = \"border-box\";\r\n            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display;\r\n\r\n            this.adjustRenderedElementSize(this._renderedElement);\r\n            this.updateLayout(false);\r\n        }\r\n        else if (this.isDesignMode()) {\r\n            this._renderedElement = this.createPlaceholderElement();\r\n        }\r\n\r\n        return this._renderedElement;\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = true) {\r\n        this.updateRenderedElementVisibility();\r\n        this.applyPadding();\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return -1;\r\n    }\r\n\r\n    isDesignMode(): boolean {\r\n        var rootElement = this.getRootElement();\r\n\r\n        return rootElement instanceof AdaptiveCard && rootElement.designMode;\r\n    }\r\n\r\n    isRendered(): boolean {\r\n        return this._renderedElement && this._renderedElement.offsetHeight > 0;\r\n    }\r\n\r\n    isFirstElement(element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isLastElement(element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isAtTheVeryLeft(): boolean {\r\n        return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;\r\n    }\r\n\r\n    isAtTheVeryRight(): boolean {\r\n        return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;\r\n    }\r\n\r\n    isAtTheVeryTop(): boolean {\r\n        return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;\r\n    }\r\n\r\n    isAtTheVeryBottom(): boolean {\r\n        return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;\r\n    }\r\n\r\n    isBleedingAtTop(): boolean {\r\n        return false;\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        return false;\r\n    }\r\n\r\n    isLeftMostElement(element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isRightMostElement(element: CardElement): boolean {\r\n        return true;\r\n    }\r\n\r\n    isTopElement(element: CardElement): boolean {\r\n        return this.isFirstElement(element);\r\n    }\r\n\r\n    isBottomElement(element: CardElement): boolean {\r\n        return this.isLastElement(element);\r\n    }\r\n\r\n    isHiddenDueToOverflow(): boolean {\r\n        return this._renderedElement && this._renderedElement.style.visibility == 'hidden';\r\n    }\r\n\r\n    getRootElement(): CardElement {\r\n        var rootElement: CardElement = this;\r\n\r\n        while (rootElement.parent) {\r\n            rootElement = rootElement.parent;\r\n        }\r\n\r\n        return rootElement;\r\n    }\r\n\r\n    getParentContainer(): Container {\r\n        var currentElement: CardElement = this.parent;\r\n\r\n        while (currentElement) {\r\n            if (currentElement instanceof Container) {\r\n                return <Container>currentElement;\r\n            }\r\n\r\n            currentElement = currentElement.parent;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        return [];\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        return [];\r\n    }\r\n\r\n    getElementById(id: string): CardElement {\r\n        return this.id === id ? this : null;\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        return null;\r\n    }\r\n\r\n    shouldFallback(): boolean {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\r\n    }\r\n\r\n    setShouldFallback(value: boolean) {\r\n        this._shouldFallback = value;\r\n    }\r\n\r\n    getEffectivePadding(): Shared.PaddingDefinition {\r\n        let padding = this.getPadding();\r\n\r\n        return (padding && this.allowCustomPadding) ? padding : this.getDefaultPadding();\r\n    }\r\n\r\n    get lang(): string {\r\n        if (this._lang) {\r\n            return this._lang;\r\n        }\r\n        else {\r\n            if (this.parent) {\r\n                return this.parent.lang;\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    set lang(value: string) {\r\n        if (value && value != \"\") {\r\n            var regEx = /^[a-z]{2,3}$/ig;\r\n\r\n            var matches = regEx.exec(value);\r\n\r\n            if (!matches) {\r\n                throw new Error(\"Invalid language identifier: \" + value);\r\n            }\r\n        }\r\n\r\n        this._lang = value;\r\n    }\r\n\r\n    get hostConfig(): HostConfig.HostConfig {\r\n        if (this._hostConfig) {\r\n            return this._hostConfig;\r\n        }\r\n        else {\r\n            if (this.parent) {\r\n                return this.parent.hostConfig;\r\n            }\r\n            else {\r\n                return defaultHostConfig;\r\n            }\r\n        }\r\n    }\r\n\r\n    set hostConfig(value: HostConfig.HostConfig) {\r\n        this._hostConfig = value;\r\n    }\r\n\r\n    get index(): number {\r\n        if (this.parent) {\r\n            return this.parent.indexOf(this);\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    get isInteractive(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return true;\r\n    }\r\n\r\n    get isInline(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get parent(): CardElement {\r\n        return this._parent;\r\n    }\r\n\r\n    get isVisible(): boolean {\r\n        return this._isVisible;\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        if (this.parent && this.separatorElement) {\r\n            return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    set isVisible(value: boolean) {\r\n        // If the element is going to be hidden, reset any changes that were due\r\n        // to overflow truncation (this ensures that if the element is later\r\n        // un-hidden it has the right content)\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation && !value) {\r\n            this.undoOverflowTruncation();\r\n        }\r\n\r\n        if (this._isVisible != value) {\r\n            this._isVisible = value;\r\n\r\n            this.updateRenderedElementVisibility();\r\n\r\n            if (this._renderedElement) {\r\n                raiseElementVisibilityChangedEvent(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    get renderedElement(): HTMLElement {\r\n        return this._renderedElement;\r\n    }\r\n\r\n    get separatorElement(): HTMLElement {\r\n        return this._separatorElement;\r\n    }\r\n}\r\n\r\nexport abstract class BaseTextBlock extends CardElement {\r\n    private _text: string;\r\n    private _selectAction: Action = null;\r\n\r\n    protected getEffectiveStyleDefinition() {\r\n        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\r\n    }\r\n\r\n    protected getFontSize(fontType: HostConfig.FontTypeDefinition): number {\r\n        switch (this.size) {\r\n            case Enums.TextSize.Small:\r\n                return fontType.fontSizes.small;\r\n            case Enums.TextSize.Medium:\r\n                return fontType.fontSizes.medium;\r\n            case Enums.TextSize.Large:\r\n                return fontType.fontSizes.large;\r\n            case Enums.TextSize.ExtraLarge:\r\n                return fontType.fontSizes.extraLarge;\r\n            default:\r\n                return fontType.fontSizes.default;\r\n        }\r\n    }\r\n\r\n    protected getColorDefinition(colorSet: HostConfig.ColorSetDefinition, color: Enums.TextColor): HostConfig.TextColorDefinition {\r\n        switch (color) {\r\n            case Enums.TextColor.Accent:\r\n                return colorSet.accent;\r\n            case Enums.TextColor.Dark:\r\n                return colorSet.dark;\r\n            case Enums.TextColor.Light:\r\n                return colorSet.light;\r\n            case Enums.TextColor.Good:\r\n                return colorSet.good;\r\n            case Enums.TextColor.Warning:\r\n                return colorSet.warning;\r\n            case Enums.TextColor.Attention:\r\n                return colorSet.attention;\r\n            default:\r\n                return colorSet.default;\r\n        }\r\n    }\r\n\r\n    protected setText(value: string) {\r\n        this._text = value;\r\n    }\r\n\r\n    size: Enums.TextSize = Enums.TextSize.Default;\r\n    weight: Enums.TextWeight = Enums.TextWeight.Default;\r\n    color: Enums.TextColor = Enums.TextColor.Default;\r\n    isSubtle: boolean = false;\r\n    fontType?: Enums.FontType = null;\r\n\r\n    asString(): string {\r\n        return this.text;\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setEnumProperty(Enums.TextSize, result, \"size\", this.size, Enums.TextSize.Default);\r\n        Utils.setEnumProperty(Enums.TextWeight, result, \"weight\", this.weight, Enums.TextWeight.Default);\r\n        Utils.setEnumProperty(Enums.TextColor, result, \"color\", this.color, Enums.TextColor.Default);\r\n        Utils.setProperty(result, \"text\", this.text);\r\n        Utils.setProperty(result, \"isSubtle\", this.isSubtle, false);\r\n        Utils.setEnumProperty(Enums.FontType, result, \"fontType\", this.fontType, Enums.FontType.Default);\r\n\r\n        return result;\r\n    }\r\n\r\n    applyStylesTo(targetElement: HTMLElement) {\r\n        let fontType = this.hostConfig.getFontTypeDefinition(this.fontType);\r\n\r\n        if (fontType.fontFamily) {\r\n            targetElement.style.fontFamily = fontType.fontFamily;\r\n        }\r\n\r\n        let fontSize: number;\r\n\r\n        switch (this.size) {\r\n            case Enums.TextSize.Small:\r\n                fontSize = fontType.fontSizes.small;\r\n                break;\r\n            case Enums.TextSize.Medium:\r\n                fontSize = fontType.fontSizes.medium;\r\n                break;\r\n            case Enums.TextSize.Large:\r\n                fontSize = fontType.fontSizes.large;\r\n                break;\r\n            case Enums.TextSize.ExtraLarge:\r\n                fontSize = fontType.fontSizes.extraLarge;\r\n                break;\r\n            default:\r\n                fontSize = fontType.fontSizes.default;\r\n                break;\r\n        }\r\n\r\n        targetElement.style.fontSize = fontSize + \"px\";\r\n\r\n        let colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n\r\n        targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);\r\n\r\n        let fontWeight: number;\r\n\r\n        switch (this.weight) {\r\n            case Enums.TextWeight.Lighter:\r\n                fontWeight = fontType.fontWeights.lighter;\r\n                break;\r\n            case Enums.TextWeight.Bolder:\r\n                fontWeight = fontType.fontWeights.bolder;\r\n                break;\r\n            default:\r\n                fontWeight = fontType.fontWeights.default;\r\n                break;\r\n        }\r\n\r\n        targetElement.style.fontWeight = fontWeight.toString();\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.text = Utils.getStringValue(json[\"text\"]);\r\n\r\n        let sizeString = Utils.getStringValue(json[\"size\"]);\r\n\r\n        if (sizeString && sizeString.toLowerCase() === \"normal\") {\r\n            this.size = Enums.TextSize.Default;\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The TextBlock.size value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n        else {\r\n            this.size = Utils.getEnumValue(Enums.TextSize, sizeString, this.size);\r\n        }\r\n\r\n        let weightString = Utils.getStringValue(json[\"weight\"]);\r\n\r\n        if (weightString && weightString.toLowerCase() === \"normal\") {\r\n            this.weight = Enums.TextWeight.Default;\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The TextBlock.weight value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n        else {\r\n            this.weight = Utils.getEnumValue(Enums.TextWeight, weightString, this.weight);\r\n        }\r\n\r\n        this.color = Utils.getEnumValue(Enums.TextColor, json[\"color\"], this.color);\r\n        this.isSubtle = Utils.getBoolValue(json[\"isSubtle\"], this.isSubtle);\r\n        this.fontType = Utils.getEnumValue(Enums.FontType, json[\"fontType\"], this.fontType);\r\n    }\r\n\r\n    get effectiveColor(): Enums.TextColor {\r\n        return this.color ? this.color : Enums.TextColor.Default;\r\n    }\r\n\r\n    get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    set text(value: string) {\r\n        this.setText(value);\r\n    }\r\n\r\n    get selectAction(): Action {\r\n        return this._selectAction;\r\n    }\r\n\r\n    set selectAction(value: Action) {\r\n        this._selectAction = value;\r\n\r\n        if (this._selectAction) {\r\n            this._selectAction.setParent(this);\r\n        }\r\n    }\r\n}\r\n\r\nexport class TextBlock extends BaseTextBlock {\r\n    private _computedLineHeight: number;\r\n    private _originalInnerHtml: string;\r\n    private _processedText: string = null;\r\n    private _treatAsPlainText: boolean = true;\r\n\r\n    private restoreOriginalContent() {\r\n        var maxHeight = this.maxLines\r\n            ? (this._computedLineHeight * this.maxLines) + 'px'\r\n            : null;\r\n\r\n        this.renderedElement.style.maxHeight = maxHeight;\r\n        this.renderedElement.innerHTML = this._originalInnerHtml;\r\n    }\r\n\r\n    private truncateIfSupported(maxHeight: number): boolean {\r\n        // For now, only truncate TextBlocks that contain just a single\r\n        // paragraph -- since the maxLines calculation doesn't take into\r\n        // account Markdown lists\r\n        var children = this.renderedElement.children;\r\n        var isTextOnly = !children.length;\r\n\r\n        var truncationSupported = isTextOnly || children.length == 1\r\n            && (<HTMLElement>children[0]).tagName.toLowerCase() == 'p';\r\n\r\n        if (truncationSupported) {\r\n            var element = isTextOnly\r\n                ? this.renderedElement\r\n                : <HTMLElement>children[0];\r\n\r\n            Utils.truncate(element, maxHeight, this._computedLineHeight);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected setText(value: string) {\r\n        super.setText(value);\r\n\r\n        this._processedText = null;\r\n    }\r\n\r\n    protected getRenderedDomElementType(): string {\r\n        return \"div\";\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        this._processedText = null;\r\n\r\n        if (!Utils.isNullOrEmpty(this.text)) {\r\n            let hostConfig = this.hostConfig;\r\n\r\n            let element = document.createElement(this.getRenderedDomElementType());\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\r\n            element.style.overflow = \"hidden\";\r\n\r\n            this.applyStylesTo(element);\r\n\r\n            if (this.selectAction) {\r\n                element.onclick = (e) => {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this.selectAction.execute();\r\n                }\r\n\r\n                if (hostConfig.supportsInteractivity) {\r\n                    element.tabIndex = 0\r\n                    element.setAttribute(\"role\", this.selectAction.getAriaRole());\r\n                    element.setAttribute(\"aria-label\", this.selectAction.title);\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n\r\n            if (!this._processedText) {\r\n                this._treatAsPlainText = true;\r\n\r\n                let formattedText = TextFormatters.formatText(this.lang, this.text);\r\n\r\n                if (this.useMarkdown) {\r\n                    if (AdaptiveCard.allowMarkForTextHighlighting) {\r\n                        formattedText = formattedText.replace(/<mark>/g, \"===\").replace(/<\\/mark>/g, \"/==\");\r\n                    }\r\n\r\n                    let markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\r\n\r\n                    if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {\r\n                        this._processedText = markdownProcessingResult.outputHtml;\r\n                        this._treatAsPlainText = false;\r\n\r\n                        // Only process <mark> tag if markdown processing was applied because\r\n                        // markdown processing is also responsible for sanitizing the input string\r\n                        if (AdaptiveCard.allowMarkForTextHighlighting) {\r\n                            let markStyle: string = \"\";\r\n                            let effectiveStyle = this.getEffectiveStyleDefinition();\r\n\r\n                            if (effectiveStyle.highlightBackgroundColor) {\r\n                                markStyle += \"background-color: \" + effectiveStyle.highlightBackgroundColor + \";\";\r\n                            }\r\n\r\n                            if (effectiveStyle.highlightForegroundColor) {\r\n                                markStyle += \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\r\n                            }\r\n\r\n                            if (!Utils.isNullOrEmpty(markStyle)) {\r\n                                markStyle = 'style=\"' + markStyle + '\"';\r\n                            }\r\n\r\n                            this._processedText = this._processedText.replace(/===/g, \"<mark \" + markStyle + \">\").replace(/\\/==/g, \"</mark>\");\r\n                        }\r\n                    } else {\r\n                        this._processedText = formattedText;\r\n                        this._treatAsPlainText = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._processedText = formattedText;\r\n                    this._treatAsPlainText = true;\r\n                }\r\n            }\r\n\r\n            if (this._treatAsPlainText) {\r\n                element.innerText = this._processedText;\r\n            }\r\n            else {\r\n                element.innerHTML = this._processedText;\r\n            }\r\n\r\n            if (element.firstElementChild instanceof HTMLElement) {\r\n                let firstElementChild = <HTMLElement>element.firstElementChild;\r\n                firstElementChild.style.marginTop = \"0px\";\r\n                firstElementChild.style.width = \"100%\";\r\n\r\n                if (!this.wrap) {\r\n                    firstElementChild.style.overflow = \"hidden\";\r\n                    firstElementChild.style.textOverflow = \"ellipsis\";\r\n                }\r\n            }\r\n\r\n            if (element.lastElementChild instanceof HTMLElement) {\r\n                (<HTMLElement>element.lastElementChild).style.marginBottom = \"0px\";\r\n            }\r\n\r\n            let anchors = element.getElementsByTagName(\"a\");\r\n\r\n            for (let i = 0; i < anchors.length; i++) {\r\n                let anchor = <HTMLAnchorElement>anchors[i];\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = (e) => {\r\n                    if (raiseAnchorClickedEvent(this, e.target as HTMLAnchorElement)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.wrap) {\r\n                element.style.wordWrap = \"break-word\";\r\n\r\n                if (this.maxLines > 0) {\r\n                    element.style.maxHeight = (this._computedLineHeight * this.maxLines) + \"px\";\r\n                    element.style.overflow = \"hidden\";\r\n                }\r\n            }\r\n            else {\r\n                element.style.whiteSpace = \"nowrap\";\r\n                element.style.textOverflow = \"ellipsis\";\r\n            }\r\n\r\n            if (AdaptiveCard.useAdvancedTextBlockTruncation || AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n                this._originalInnerHtml = element.innerHTML;\r\n            }\r\n\r\n            return element;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        if (maxHeight >= this._computedLineHeight) {\r\n            return this.truncateIfSupported(maxHeight);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected undoOverflowTruncation() {\r\n        this.restoreOriginalContent();\r\n\r\n        if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines) {\r\n            var maxHeight = this._computedLineHeight * this.maxLines;\r\n            this.truncateIfSupported(maxHeight);\r\n        }\r\n    }\r\n\r\n    wrap: boolean = false;\r\n    maxLines: number;\r\n    useMarkdown: boolean = true;\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"wrap\", this.wrap, false);\r\n        Utils.setNumberProperty(result, \"maxLines\", this.maxLines);\r\n\r\n        return result;\r\n    }\r\n\r\n    applyStylesTo(targetElement: HTMLElement) {\r\n        super.applyStylesTo(targetElement);\r\n\r\n        let parentContainer = this.getParentContainer();\r\n        let isRtl = parentContainer ? parentContainer.isRtl() : false;\r\n\r\n        switch (this.horizontalAlignment) {\r\n            case Enums.HorizontalAlignment.Center:\r\n                targetElement.style.textAlign = \"center\";\r\n                break;\r\n            case Enums.HorizontalAlignment.Right:\r\n                targetElement.style.textAlign = isRtl ? \"left\" : \"right\";\r\n                break;\r\n            default:\r\n                targetElement.style.textAlign = isRtl ? \"right\" : \"left\";\r\n                break;\r\n        }\r\n\r\n        let lineHeights = this.hostConfig.lineHeights;\r\n\r\n        if (lineHeights) {\r\n            switch (this.size) {\r\n                case Enums.TextSize.Small:\r\n                    this._computedLineHeight = lineHeights.small;\r\n                    break;\r\n                case Enums.TextSize.Medium:\r\n                    this._computedLineHeight = lineHeights.medium;\r\n                    break;\r\n                case Enums.TextSize.Large:\r\n                    this._computedLineHeight = lineHeights.large;\r\n                    break;\r\n                case Enums.TextSize.ExtraLarge:\r\n                    this._computedLineHeight = lineHeights.extraLarge;\r\n                    break;\r\n                default:\r\n                    this._computedLineHeight = lineHeights.default;\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            // Looks like 1.33 is the magic number to compute line-height\r\n            // from font size.\r\n            this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;\r\n        }\r\n\r\n        targetElement.style.lineHeight = this._computedLineHeight + \"px\";\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\r\n        this.maxLines = Utils.getNumberValue(json[\"maxLines\"]);\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"TextBlock\";\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = false) {\r\n        super.updateLayout(processChildren);\r\n\r\n        if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines && this.isRendered()) {\r\n            // Reset the element's innerHTML in case the available room for\r\n            // content has increased\r\n            this.restoreOriginalContent();\r\n            this.truncateIfSupported(this._computedLineHeight * this.maxLines);\r\n        }\r\n    }\r\n}\r\n\r\nclass Label extends TextBlock {\r\n    protected getRenderedDomElementType(): string {\r\n        return \"label\";\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        let renderedElement = <HTMLLabelElement>super.internalRender();\r\n\r\n        if (renderedElement && !Utils.isNullOrEmpty(this.forElementId)) {\r\n            renderedElement.htmlFor = this.forElementId;\r\n        }\r\n\r\n        return renderedElement;\r\n    }\r\n\r\n    forElementId: string;\r\n}\r\n\r\nexport class TextRun extends BaseTextBlock {\r\n    protected internalRender(): HTMLElement {\r\n        if (!Utils.isNullOrEmpty(this.text)) {\r\n            let hostConfig = this.hostConfig;\r\n\r\n            let formattedText = TextFormatters.formatText(this.lang, this.text);\r\n\r\n            let element = document.createElement(\"span\");\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\r\n\r\n            this.applyStylesTo(element);\r\n\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                let anchor = document.createElement(\"a\");\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.href = this.selectAction.getHref();\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = (e) => {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this.selectAction.execute();\r\n                }\r\n\r\n                anchor.innerText = formattedText;\r\n\r\n                element.appendChild(anchor);\r\n            }\r\n            else {\r\n                element.innerText = formattedText;\r\n            }\r\n\r\n            return element;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    italic: boolean = false;\r\n    strikethrough: boolean = false;\r\n    highlight: boolean = false;\r\n\r\n    applyStylesTo(targetElement: HTMLElement) {\r\n        super.applyStylesTo(targetElement);\r\n\r\n        if (this.italic) {\r\n            targetElement.style.fontStyle = \"italic\";\r\n        }\r\n\r\n        if (this.strikethrough) {\r\n            targetElement.style.textDecoration = \"line-through\";\r\n        }\r\n\r\n        if (this.highlight) {\r\n            let colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n\r\n            targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"italic\", this.italic, false);\r\n        Utils.setProperty(result, \"strikethrough\", this.strikethrough, false);\r\n        Utils.setProperty(result, \"highlight\", this.highlight, false);\r\n\r\n        if (this.selectAction) {\r\n            Utils.setProperty(result, \"selectAction\", this.selectAction.toJSON());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.italic = Utils.getBoolValue(json[\"italic\"], this.italic);\r\n        this.strikethrough = Utils.getBoolValue(json[\"strikethrough\"], this.strikethrough);\r\n        this.highlight = Utils.getBoolValue(json[\"highlight\"], this.highlight);\r\n        this.selectAction = createActionInstance(\r\n            this,\r\n            json[\"selectAction\"],\r\n            [ShowCardAction.JsonTypeName],\r\n            !this.isDesignMode(),\r\n            errors);\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"TextRun\";\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n\r\n    get isInline(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class RichTextBlock extends CardElement {\r\n    private _inlines: CardElement[] = [];\r\n\r\n    private internalAddInline(inline: CardElement, forceAdd: boolean = false) {\r\n        if (!inline.isInline) {\r\n            throw new Error(\"RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.\");\r\n        }\r\n\r\n        let doAdd: boolean = inline.parent == null || forceAdd;\r\n\r\n        if (!doAdd && inline.parent != this) {\r\n            throw new Error(\"RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.\");\r\n        }\r\n        else {\r\n            inline.setParent(this);\r\n\r\n            this._inlines.push(inline);\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        if (this._inlines.length > 0) {\r\n            let element = document.createElement(\"div\");\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\r\n\r\n            let parentContainer = this.getParentContainer();\r\n            let isRtl = parentContainer ? parentContainer.isRtl() : false;\r\n\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.textAlign = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.textAlign = isRtl ? \"left\" : \"right\";\r\n                    break;\r\n                default:\r\n                    element.style.textAlign = isRtl ? \"right\" : \"left\";\r\n                    break;\r\n            }\r\n\r\n            let renderedInlines: number = 0;\r\n\r\n            for (let inline of this._inlines) {\r\n                let renderedInline = inline.render();\r\n\r\n                if (renderedInline) {\r\n                    element.appendChild(renderedInline);\r\n\r\n                    renderedInlines++;\r\n                }\r\n            }\r\n\r\n            if (renderedInlines > 0) {\r\n                return element;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    asString(): string {\r\n        let result = \"\";\r\n\r\n        for (let inline of this._inlines) {\r\n            result += inline.asString();\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this._inlines = [];\r\n\r\n        if (Array.isArray(json[\"inlines\"])) {\r\n            for (let jsonInline of json[\"inlines\"]) {\r\n                let inline: CardElement;\r\n\r\n                if (typeof jsonInline === \"string\") {\r\n                    let textRun = new TextRun();\r\n                    textRun.text = jsonInline;\r\n\r\n                    inline = textRun;\r\n                }\r\n                else {\r\n                    inline = createElementInstance(\r\n                        this,\r\n                        jsonInline,\r\n                        false, // No fallback for inlines in 1.2\r\n                        errors);\r\n                }\r\n\r\n                if (inline) {\r\n                    this.internalAddInline(inline, true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        if (this._inlines.length > 0) {\r\n            let jsonInlines: any[] = [];\r\n\r\n            for (let inline of this._inlines) {\r\n                jsonInlines.push(inline.toJSON());\r\n            }\r\n\r\n            Utils.setProperty(result, \"inlines\", jsonInlines);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"RichTextBlock\";\r\n    }\r\n\r\n    getInlineCount(): number {\r\n        return this._inlines.length;\r\n    }\r\n\r\n    getInlineAt(index: number): CardElement {\r\n        if (index >= 0 && index < this._inlines.length) {\r\n            return this._inlines[index];\r\n        }\r\n        else {\r\n            throw new Error(\"RichTextBlock.getInlineAt: Index out of range (\" + index + \")\");\r\n        }\r\n    }\r\n\r\n    addInline(inline: CardElement) {\r\n        this.internalAddInline(inline);\r\n    }\r\n\r\n    removeInline(inline: CardElement): boolean {\r\n        let index = this._inlines.indexOf(inline);\r\n\r\n        if (index >= 0) {\r\n            this._inlines[index].setParent(null);\r\n            this._inlines.splice(index, 1);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class Fact extends SerializableObject {\r\n    name: string;\r\n    value: string;\r\n\r\n    constructor(name: string = undefined, value: string = undefined) {\r\n        super();\r\n\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n\r\n    parse(json: any) {\r\n        super.parse(json);\r\n\r\n        this.name = Utils.getStringValue(json[\"title\"]);\r\n        this.value = Utils.getStringValue(json[\"value\"]);\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"title\", this.name);\r\n        Utils.setProperty(result, \"value\", this.value);\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class FactSet extends CardElement {\r\n    protected get useDefaultSizing(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        let element: HTMLElement = null;\r\n        let hostConfig = this.hostConfig;\r\n\r\n        if (this.facts.length > 0) {\r\n            element = document.createElement(\"table\");\r\n            element.style.borderWidth = \"0px\";\r\n            element.style.borderSpacing = \"0px\";\r\n            element.style.borderStyle = \"none\";\r\n            element.style.borderCollapse = \"collapse\";\r\n            element.style.display = \"block\";\r\n            element.style.overflow = \"hidden\";\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\r\n\r\n            for (let i = 0; i < this.facts.length; i++) {\r\n                let trElement = document.createElement(\"tr\");\r\n\r\n                if (i > 0) {\r\n                    trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\r\n                }\r\n\r\n                // Title column\r\n                let tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\r\n\r\n                if (hostConfig.factSet.title.maxWidth) {\r\n                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\r\n                }\r\n\r\n                tdElement.style.verticalAlign = \"top\";\r\n\r\n                let textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = (Utils.isNullOrEmpty(this.facts[i].name) && this.isDesignMode()) ? \"Title\" : this.facts[i].name;\r\n                textBlock.size = hostConfig.factSet.title.size;\r\n                textBlock.color = hostConfig.factSet.title.color;\r\n                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.title.weight;\r\n                textBlock.wrap = hostConfig.factSet.title.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n\r\n                // Spacer column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.width = \"10px\";\r\n\r\n                Utils.appendChild(trElement, tdElement);\r\n\r\n                // Value column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.style.verticalAlign = \"top\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\r\n\r\n                textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = this.facts[i].value;\r\n                textBlock.size = hostConfig.factSet.value.size;\r\n                textBlock.color = hostConfig.factSet.value.color;\r\n                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.value.weight;\r\n                textBlock.wrap = hostConfig.factSet.value.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                Utils.appendChild(element, trElement);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    facts: Array<Fact> = [];\r\n\r\n    getJsonTypeName(): string {\r\n        return \"FactSet\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setArrayProperty(result, \"facts\", this.facts);\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.facts = [];\r\n\r\n\t\tlet jsonFacts = json[\"facts\"];\r\n\r\n\t\tif (Array.isArray(jsonFacts)) {\r\n\t\t\tfor (let jsonFact of jsonFacts) {\r\n\t\t\t\tlet fact = new Fact();\r\n\t\t\t\tfact.parse(jsonFact);\r\n\r\n\t\t\t\tthis.facts.push(fact);\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n}\r\n\r\nexport class Image extends CardElement {\r\n    private _selectAction: Action;\r\n\r\n    private parseDimension(name: string, value: any, errors: Array<HostConfig.IValidationError>): number {\r\n        if (value) {\r\n            if (typeof value === \"string\") {\r\n                try {\r\n                    let size = Shared.SizeAndUnit.parse(value);\r\n\r\n                    if (size.unit == Enums.SizeUnit.Pixel) {\r\n                        return size.physicalSize;\r\n                    }\r\n                }\r\n                catch {\r\n                    // Ignore error\r\n                }\r\n            }\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.InvalidPropertyValue,\r\n                    message: \"Invalid image \" + name + \": \" + value\r\n                },\r\n                errors\r\n            );\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    private applySize(element: HTMLElement) {\r\n        if (this.pixelWidth || this.pixelHeight) {\r\n            if (this.pixelWidth) {\r\n                element.style.width = this.pixelWidth + \"px\";\r\n            }\r\n\r\n            if (this.pixelHeight) {\r\n                element.style.height = this.pixelHeight + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            switch (this.size) {\r\n                case Enums.Size.Stretch:\r\n                    element.style.width = \"100%\";\r\n                    break;\r\n                case Enums.Size.Auto:\r\n                    element.style.maxWidth = \"100%\";\r\n                    break;\r\n                case Enums.Size.Small:\r\n                    element.style.width = this.hostConfig.imageSizes.small + \"px\";\r\n                    break;\r\n                case Enums.Size.Large:\r\n                    element.style.width = this.hostConfig.imageSizes.large + \"px\";\r\n                    break;\r\n                case Enums.Size.Medium:\r\n                    element.style.width = this.hostConfig.imageSizes.medium + \"px\";\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected get useDefaultSizing() {\r\n        return false;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        var element: HTMLElement = null;\r\n\r\n        if (!Utils.isNullOrEmpty(this.url)) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.alignItems = \"flex-start\";\r\n\r\n            element.onkeypress = (e) => {\r\n                if (this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) { // enter or space pressed\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this.selectAction.execute();\r\n                }\r\n            }\r\n\r\n            element.onclick = (e) => {\r\n                if (this.selectAction) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this.selectAction.execute();\r\n                }\r\n            }\r\n\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n\r\n            // Cache hostConfig to avoid walking the parent hierarchy multiple times\r\n            let hostConfig = this.hostConfig;\r\n\r\n            let imageElement = document.createElement(\"img\");\r\n            imageElement.onload = (e: Event) => {\r\n                raiseImageLoadedEvent(this);\r\n            }\r\n            imageElement.onerror = (e: Event) => {\r\n                let card = this.getRootElement() as AdaptiveCard;\r\n\r\n                this.renderedElement.innerHTML = \"\";\r\n\r\n                if (card && card.designMode) {\r\n                    let errorElement = document.createElement(\"div\");\r\n                    errorElement.style.display = \"flex\";\r\n                    errorElement.style.alignItems = \"center\";\r\n                    errorElement.style.justifyContent = \"center\";\r\n                    errorElement.style.backgroundColor = \"#EEEEEE\";\r\n                    errorElement.style.color = \"black\";\r\n                    errorElement.innerText = \":-(\";\r\n                    errorElement.style.padding = \"10px\";\r\n\r\n                    this.applySize(errorElement);\r\n\r\n                    this.renderedElement.appendChild(errorElement);\r\n                }\r\n\r\n                raiseImageLoadedEvent(this);\r\n            }\r\n            imageElement.style.maxHeight = \"100%\";\r\n            imageElement.style.minWidth = \"0\";\r\n            imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\r\n\r\n            if (this.selectAction != null && hostConfig.supportsInteractivity) {\r\n                imageElement.tabIndex = 0\r\n                imageElement.setAttribute(\"role\", this.selectAction.getAriaRole());\r\n                imageElement.setAttribute(\"aria-label\", this.selectAction.title);\r\n                imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n            }\r\n\r\n            this.applySize(imageElement);\r\n\r\n            if (this.style === Enums.ImageStyle.Person) {\r\n                imageElement.style.borderRadius = \"50%\";\r\n                imageElement.style.backgroundPosition = \"50% 50%\";\r\n                imageElement.style.backgroundRepeat = \"no-repeat\";\r\n            }\r\n\r\n            if (!Utils.isNullOrEmpty(this.backgroundColor)) {\r\n                imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);\r\n            }\r\n\r\n            imageElement.src = this.url;\r\n            if (!Utils.isNullOrEmpty(this.altText)) {\r\n                imageElement.alt = this.altText;\r\n            }\r\n\r\n            element.appendChild(imageElement);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    style: Enums.ImageStyle = Enums.ImageStyle.Default;\r\n    backgroundColor: string;\r\n    url: string;\r\n    size: Enums.Size = Enums.Size.Auto;\r\n    width: Shared.SizeAndUnit;\r\n    pixelWidth?: number = null;\r\n    pixelHeight?: number = null;\r\n    altText: string = \"\";\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        if (this._selectAction) {\r\n            Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\r\n        }\r\n\r\n        Utils.setEnumProperty(Enums.ImageStyle, result, \"style\", this.style, Enums.ImageStyle.Default);\r\n        Utils.setProperty(result, \"backgroundColor\", this.backgroundColor);\r\n        Utils.setProperty(result, \"url\", this.url);\r\n        Utils.setEnumProperty(Enums.Size, result, \"size\", this.size, Enums.Size.Auto);\r\n\r\n        if (this.pixelWidth) {\r\n            Utils.setProperty(result, \"width\", this.pixelWidth + \"px\");\r\n        }\r\n\r\n        if (this.pixelHeight) {\r\n            Utils.setProperty(result, \"height\", this.pixelHeight + \"px\");\r\n        }\r\n\r\n        Utils.setProperty(result, \"altText\", this.altText);\r\n\r\n        return result;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Image\";\r\n    }\r\n\r\n    getActionById(id: string) {\r\n        var result = super.getActionById(id);\r\n\r\n        if (!result && this.selectAction) {\r\n            result = this.selectAction.getActionById(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n        this.backgroundColor = Utils.getStringValue(json[\"backgroundColor\"]);\r\n\r\n        let styleString = Utils.getStringValue(json[\"style\"]);\r\n\r\n        if (styleString && styleString.toLowerCase() === \"normal\") {\r\n            this.style = Enums.ImageStyle.Default;\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The Image.style value \\\"normal\\\" is deprecated and will be removed. Use \\\"default\\\" instead.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n        else {\r\n            this.style = Utils.getEnumValue(Enums.ImageStyle, styleString, this.style);\r\n        }\r\n\r\n        this.size = Utils.getEnumValue(Enums.Size, json[\"size\"], this.size);\r\n\t\tthis.altText = Utils.getStringValue(json[\"altText\"]);\r\n\r\n        // pixelWidth and pixelHeight are only parsed for backwards compatibility.\r\n        // Payloads should use the width and height proerties instead.\r\n        if (json[\"pixelWidth\"] && typeof json[\"pixelWidth\"] === \"number\") {\r\n            this.pixelWidth = json[\"pixelWidth\"];\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The pixelWidth property is deprecated and will be removed. Use the width property instead.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n\r\n        if (json[\"pixelHeight\"] && typeof json[\"pixelHeight\"] === \"number\") {\r\n            this.pixelHeight = json[\"pixelHeight\"];\r\n\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.Deprecated,\r\n                    message: \"The pixelHeight property is deprecated and will be removed. Use the height property instead.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n\r\n        let size = this.parseDimension(\"width\", json[\"width\"], errors);\r\n\r\n        if (size > 0) {\r\n            this.pixelWidth = size;\r\n        }\r\n\r\n        size = this.parseDimension(\"height\", json[\"height\"], errors);\r\n\r\n        if (size > 0) {\r\n            this.pixelHeight = size;\r\n        }\r\n\r\n        this.selectAction = createActionInstance(\r\n            this,\r\n            json[\"selectAction\"],\r\n            [ShowCardAction.JsonTypeName],\r\n            !this.isDesignMode(),\r\n            errors);\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        if (!Utils.isNullOrEmpty(this.url)) {\r\n            return [{ url: this.url, mimeType: \"image\" }]\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    get selectAction(): Action {\r\n        return this._selectAction;\r\n    }\r\n\r\n    set selectAction(value: Action) {\r\n        this._selectAction = value;\r\n\r\n        if (this._selectAction) {\r\n            this._selectAction.setParent(this);\r\n        }\r\n    }\r\n}\r\n\r\nexport abstract class CardElementContainer extends CardElement {\r\n    private _selectAction: Action = null;\r\n\r\n    protected isElementAllowed(element: CardElement, forbiddenElementTypes: Array<string>) {\r\n        if (!this.hostConfig.supportsInteractivity && element.isInteractive) {\r\n            return false;\r\n        }\r\n\r\n        if (forbiddenElementTypes) {\r\n            for (let forbiddenElementType of forbiddenElementTypes) {\r\n                if (element.getJsonTypeName() === forbiddenElementType) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected applyPadding() {\r\n        super.applyPadding();\r\n\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n\r\n        let physicalPadding = new Shared.SpacingDefinition();\r\n\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n\r\n        this.renderedElement.style.marginRight = \"0\";\r\n        this.renderedElement.style.marginLeft = \"0\";\r\n    }\r\n\r\n    protected getSelectAction(): Action {\r\n        return this._selectAction;\r\n    }\r\n\r\n    protected setSelectAction(value: Action) {\r\n        this._selectAction = value;\r\n\r\n        if (this._selectAction) {\r\n            this._selectAction.setParent(this);\r\n        }\r\n    }\r\n\r\n    protected get isSelectable(): boolean {\r\n        return false;\r\n    }\r\n\r\n    abstract getItemCount(): number;\r\n    abstract getItemAt(index: number): CardElement;\r\n    abstract getFirstVisibleRenderedItem(): CardElement;\r\n    abstract getLastVisibleRenderedItem(): CardElement;\r\n    abstract removeItem(item: CardElement): boolean;\r\n\r\n    allowVerticalOverflow: boolean = false;\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        if (this.isSelectable) {\r\n            this._selectAction = createActionInstance(\r\n                this,\r\n                json[\"selectAction\"],\r\n                [ShowCardAction.JsonTypeName],\r\n                !this.isDesignMode(),\r\n                errors);\r\n        }\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        if (this._selectAction && this.isSelectable) {\r\n            Utils.setProperty(result, \"selectAction\", this._selectAction.toJSON());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            let item = this.getItemAt(i);\r\n\r\n            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\r\n                context.addFailure(\r\n                    this,\r\n                    {\r\n                        error: Enums.ValidationError.InteractivityNotAllowed,\r\n                        message: \"Interactivity is not allowed.\"\r\n                    });\r\n            }\r\n\r\n            if (!this.isElementAllowed(item, this.getForbiddenElementTypes())) {\r\n                context.addFailure(\r\n                    this,\r\n                    {\r\n                        error: Enums.ValidationError.InteractivityNotAllowed,\r\n                        message: \"Elements of type \" + item.getJsonTypeName() + \" are not allowed in this container.\"\r\n                    });\r\n            }\r\n\r\n            item.internalValidateProperties(context);\r\n        }\r\n\r\n        if (this._selectAction) {\r\n            this._selectAction.internalValidateProperties(context);\r\n        }\r\n    }\r\n\r\n    render(): HTMLElement {\r\n        let element = super.render();\r\n        let hostConfig = this.hostConfig;\r\n\r\n        if (this.allowVerticalOverflow) {\r\n            element.style.overflowX = \"hidden\";\r\n            element.style.overflowY = \"auto\";\r\n        }\r\n\r\n        if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n            element.tabIndex = 0;\r\n            element.setAttribute(\"role\", this._selectAction.getAriaRole());\r\n            element.setAttribute(\"aria-label\", this._selectAction.title);\r\n\r\n            element.onclick = (e) => {\r\n                if (this._selectAction != null) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this._selectAction.execute();\r\n                }\r\n            }\r\n\r\n            element.onkeypress = (e) => {\r\n                if (this._selectAction != null && (e.keyCode == 13 || e.keyCode == 32)) {\r\n                    // Enter or space pressed\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    this._selectAction.execute();\r\n                }\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = true) {\r\n        super.updateLayout(processChildren);\r\n\r\n        if (processChildren) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                this.getItemAt(i).updateLayout();\r\n            }\r\n        }\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        var result: Array<Input> = [];\r\n\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result = result.concat(this.getItemAt(i).getAllInputs());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        let result: Array<Shared.IResourceInformation> = [];\r\n\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result = result.concat(this.getItemAt(i).getResourceInformation());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getElementById(id: string): CardElement {\r\n        let result = super.getElementById(id);\r\n\r\n        if (!result) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                result = this.getItemAt(i).getElementById(id);\r\n\r\n                if (result) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class ImageSet extends CardElementContainer {\r\n    private _images: Array<Image> = [];\r\n\r\n    protected internalRender(): HTMLElement {\r\n        let element: HTMLElement = null;\r\n\r\n        if (this._images.length > 0) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.flexWrap = \"wrap\";\r\n\r\n            for (var i = 0; i < this._images.length; i++) {\r\n                this._images[i].size = this.imageSize;\r\n\r\n                let renderedImage = this._images[i].render();\r\n\r\n                renderedImage.style.display = \"inline-flex\";\r\n                renderedImage.style.margin = \"0px\";\r\n                renderedImage.style.marginRight = \"10px\";\r\n                renderedImage.style.maxHeight = this.hostConfig.imageSet.maxImageHeight + \"px\";\r\n\r\n                Utils.appendChild(element, renderedImage);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    imageSize: Enums.Size = Enums.Size.Medium;\r\n\r\n    getItemCount(): number {\r\n        return this._images.length;\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this._images[index];\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement {\r\n        return this._images && this._images.length > 0 ? this._images[0] : null;\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement {\r\n        return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : null;\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        if (item instanceof Image) {\r\n            var itemIndex = this._images.indexOf(item);\r\n\r\n            if (itemIndex >= 0) {\r\n                this._images.splice(itemIndex, 1);\r\n\r\n                item.setParent(null);\r\n\r\n                this.updateLayout();\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"ImageSet\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setEnumProperty(Enums.Size, result, \"imageSize\", this.imageSize, Enums.Size.Medium);\r\n\r\n        if (this._images.length > 0) {\r\n            let images = [];\r\n\r\n            for (let image of this._images) {\r\n                images.push(image.toJSON());\r\n            }\r\n\r\n            Utils.setProperty(result, \"images\", images);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.imageSize = Utils.getEnumValue(Enums.Size, json[\"imageSize\"], Enums.Size.Medium);\r\n\r\n        if (json[\"images\"] != null) {\r\n            let jsonImages = json[\"images\"] as Array<any>;\r\n\r\n            this._images = [];\r\n\r\n            for (let i = 0; i < jsonImages.length; i++) {\r\n                var image = new Image();\r\n                image.parse(jsonImages[i], errors);\r\n\r\n                this.addImage(image);\r\n            }\r\n        }\r\n    }\r\n\r\n    addImage(image: Image) {\r\n        if (!image.parent) {\r\n            this._images.push(image);\r\n\r\n            image.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(\"This image already belongs to another ImageSet\");\r\n        }\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\r\n    }\r\n}\r\n\r\nexport class MediaSource extends SerializableObject {\r\n    mimeType: string;\r\n    url: string;\r\n\r\n    constructor(url: string = undefined, mimeType: string = undefined) {\r\n        super();\r\n\r\n        this.url = url;\r\n        this.mimeType = mimeType;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n\t\tthis.mimeType = Utils.getStringValue(json[\"mimeType\"]);\r\n\t\tthis.url = Utils.getStringValue(json[\"url\"]);\r\n\t}\r\n\r\n\ttoJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"mimeType\", this.mimeType);\r\n        Utils.setProperty(result, \"url\", this.url);\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class Media extends CardElement {\r\n    static readonly supportedMediaTypes = [\"audio\", \"video\"];\r\n\r\n    private _selectedMediaType: string;\r\n    private _selectedSources: Array<MediaSource>;\r\n\r\n    private getPosterUrl(): string {\r\n        return this.poster ? this.poster : this.hostConfig.media.defaultPoster;\r\n    }\r\n\r\n    private processSources() {\r\n        this._selectedSources = [];\r\n        this._selectedMediaType = undefined;\r\n\r\n        for (let source of this.sources) {\r\n            let mimeComponents = source.mimeType ? source.mimeType.split('/') : [];\r\n\r\n            if (mimeComponents.length == 2) {\r\n                if (!this._selectedMediaType) {\r\n                    let index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);\r\n\r\n                    if (index >= 0) {\r\n                        this._selectedMediaType = Media.supportedMediaTypes[index];\r\n                    }\r\n                }\r\n                if (mimeComponents[0] == this._selectedMediaType) {\r\n                    this._selectedSources.push(source);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderPoster(): HTMLElement {\r\n        const playButtonArrowWidth = 12;\r\n        const playButtonArrowHeight = 15;\r\n\r\n        let posterRootElement = document.createElement(\"div\");\r\n        posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\r\n        posterRootElement.setAttribute(\"role\", \"contentinfo\");\r\n        posterRootElement.setAttribute(\"aria-label\", this.altText ? this.altText : \"Media content\");\r\n        posterRootElement.style.position = \"relative\";\r\n        posterRootElement.style.display = \"flex\";\r\n\r\n        let posterUrl = this.getPosterUrl();\r\n\r\n        if (posterUrl) {\r\n            let posterImageElement = document.createElement(\"img\");\r\n            posterImageElement.style.width = \"100%\";\r\n            posterImageElement.style.height = \"100%\";\r\n\r\n            posterImageElement.onerror = (e: Event) => {\r\n                posterImageElement.parentNode.removeChild(posterImageElement);\r\n                posterRootElement.classList.add(\"empty\");\r\n                posterRootElement.style.minHeight = \"150px\";\r\n            }\r\n\r\n            posterImageElement.src = posterUrl;\r\n\r\n            posterRootElement.appendChild(posterImageElement);\r\n        }\r\n        else {\r\n            posterRootElement.classList.add(\"empty\");\r\n            posterRootElement.style.minHeight = \"150px\";\r\n        }\r\n\r\n        if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {\r\n            let playButtonOuterElement = document.createElement(\"div\");\r\n            playButtonOuterElement.setAttribute(\"role\", \"button\");\r\n            playButtonOuterElement.setAttribute(\"aria-label\", \"Play media\");\r\n            playButtonOuterElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton\");\r\n            playButtonOuterElement.style.display = \"flex\";\r\n            playButtonOuterElement.style.alignItems = \"center\";\r\n            playButtonOuterElement.style.justifyContent = \"center\";\r\n            playButtonOuterElement.onclick = (e) => {\r\n                if (this.hostConfig.media.allowInlinePlayback) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n\r\n                    let mediaPlayerElement = this.renderMediaPlayer();\r\n\r\n                    this.renderedElement.innerHTML = \"\";\r\n                    this.renderedElement.appendChild(mediaPlayerElement);\r\n\r\n                    mediaPlayerElement.play();\r\n                }\r\n                else {\r\n                    if (Media.onPlay) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n\r\n                        Media.onPlay(this);\r\n                    }\r\n                }\r\n            }\r\n\r\n            let playButtonInnerElement = document.createElement(\"div\");\r\n            playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\r\n            playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\r\n            playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\r\n            playButtonInnerElement.style.borderTopWidth = (playButtonArrowHeight / 2) + \"px\";\r\n            playButtonInnerElement.style.borderBottomWidth = (playButtonArrowHeight / 2) + \"px\";\r\n            playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\r\n            playButtonInnerElement.style.borderRightWidth = \"0\";\r\n            playButtonInnerElement.style.borderStyle = \"solid\";\r\n            playButtonInnerElement.style.borderTopColor = \"transparent\";\r\n            playButtonInnerElement.style.borderRightColor = \"transparent\";\r\n            playButtonInnerElement.style.borderBottomColor = \"transparent\";\r\n            playButtonInnerElement.style.transform = \"translate(\" + (playButtonArrowWidth / 10) + \"px,0px)\";\r\n\r\n            playButtonOuterElement.appendChild(playButtonInnerElement);\r\n\r\n            let playButtonContainer = document.createElement(\"div\");\r\n            playButtonContainer.style.position = \"absolute\";\r\n            playButtonContainer.style.left = \"0\";\r\n            playButtonContainer.style.top = \"0\";\r\n            playButtonContainer.style.width = \"100%\";\r\n            playButtonContainer.style.height = \"100%\";\r\n            playButtonContainer.style.display = \"flex\";\r\n            playButtonContainer.style.justifyContent = \"center\";\r\n            playButtonContainer.style.alignItems = \"center\";\r\n\r\n            playButtonContainer.appendChild(playButtonOuterElement);\r\n            posterRootElement.appendChild(playButtonContainer);\r\n        }\r\n\r\n        return posterRootElement;\r\n    }\r\n\r\n    private renderMediaPlayer(): HTMLMediaElement {\r\n        let mediaElement: HTMLMediaElement;\r\n\r\n        if (this._selectedMediaType == \"video\") {\r\n            let videoPlayer = document.createElement(\"video\");\r\n\r\n            let posterUrl = this.getPosterUrl();\r\n\r\n            if (posterUrl) {\r\n                videoPlayer.poster = posterUrl;\r\n            }\r\n\r\n            mediaElement = videoPlayer;\r\n        }\r\n        else {\r\n            mediaElement = document.createElement(\"audio\");\r\n        }\r\n\r\n        mediaElement.controls = true;\r\n        mediaElement.preload = \"none\";\r\n        mediaElement.style.width = \"100%\";\r\n\r\n        for (let source of this.sources) {\r\n            let src: HTMLSourceElement = document.createElement(\"source\");\r\n            src.src = source.url;\r\n            src.type = source.mimeType;\r\n\r\n            mediaElement.appendChild(src);\r\n        }\r\n\r\n        return mediaElement;\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        let element = <HTMLElement>document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-media\");\r\n\r\n        this.processSources();\r\n\r\n        element.appendChild(this.renderPoster());\r\n\r\n        return element;\r\n    }\r\n\r\n    static onPlay: (sender: Media) => void;\r\n\r\n    sources: Array<MediaSource> = [];\r\n    poster: string;\r\n    altText: string;\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n\t\tthis.poster = Utils.getStringValue(json[\"poster\"]);\r\n\t\tthis.altText = Utils.getStringValue(json[\"altText\"]);\r\n\r\n        this.sources = [];\r\n\r\n        if (Array.isArray(json[\"sources\"])) {\r\n            for (let jsonSource of json[\"sources\"]) {\r\n                let source = new MediaSource();\r\n                source.parse(jsonSource, errors);\r\n\r\n                this.sources.push(source);\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"poster\", this.poster);\r\n        Utils.setProperty(result, \"altText\", this.altText);\r\n\r\n        /*\r\n        if (this.sources.length > 0) {\r\n            let serializedSources = [];\r\n\r\n            for (let source of this.sources) {\r\n                serializedSources.push(source.toJSON());\r\n            }\r\n\r\n            Utils.setProperty(result, \"sources\", serializedSources);\r\n        }\r\n        */\r\n\r\n        Utils.setArrayProperty(result, \"sources\", this.sources);\r\n\r\n        return result;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Media\";\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        let result: Array<Shared.IResourceInformation> = [];\r\n\r\n        let posterUrl = this.getPosterUrl();\r\n\r\n        if (!Utils.isNullOrEmpty(posterUrl)) {\r\n            result.push({ url: posterUrl, mimeType: \"image\" });\r\n        }\r\n\r\n        for (let mediaSource of this.sources) {\r\n            if (!Utils.isNullOrEmpty(mediaSource.url)) {\r\n                result.push({ url: mediaSource.url, mimeType: mediaSource.mimeType });\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get selectedMediaType(): string {\r\n        return this._selectedMediaType;\r\n    }\r\n}\r\n\r\nexport class InputValidationOptions extends SerializableObject {\r\n    necessity: Enums.InputValidationNecessity = Enums.InputValidationNecessity.Optional;\r\n    errorMessage: string = undefined;\r\n\r\n    parse(json: any) {\r\n        super.parse(json);\r\n\r\n        this.necessity = Utils.getEnumValue(Enums.InputValidationNecessity, json[\"necessity\"], this.necessity);\r\n        this.errorMessage = Utils.getStringValue(json[\"errorMessage\"]);\r\n    }\r\n\r\n    toJSON() {\r\n        if (this.necessity != Enums.InputValidationNecessity.Optional || !Utils.isNullOrEmpty(this.errorMessage)) {\r\n            let result = super.toJSON();\r\n\r\n            Utils.setEnumProperty(Enums.InputValidationNecessity, result, \"necessity\", this.necessity, Enums.InputValidationNecessity.Optional);\r\n            Utils.setProperty(result, \"errorMessage\", this.errorMessage);\r\n\r\n            return result;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport abstract class Input extends CardElement implements Shared.IInput {\r\n    private _outerContainerElement: HTMLElement;\r\n    private _inputControlContainerElement: HTMLElement;\r\n    private _errorMessageElement: HTMLElement;\r\n    private _renderedInputControlElement: HTMLElement;\r\n    private _defaultValue: string;\r\n\r\n    protected get isNullable(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get renderedInputControlElement(): HTMLElement {\r\n        return this._renderedInputControlElement;\r\n    }\r\n\r\n    protected get inputControlContainerElement(): HTMLElement {\r\n        return this._inputControlContainerElement;\r\n    }\r\n\r\n    protected overrideInternalRender(): HTMLElement {\r\n        let hostConfig = this.hostConfig;\r\n\r\n        this._outerContainerElement = document.createElement(\"div\");\r\n        this._outerContainerElement.style.display = \"flex\";\r\n        this._outerContainerElement.style.flexDirection = \"column\";\r\n\r\n        this._inputControlContainerElement = document.createElement(\"div\");\r\n        this._inputControlContainerElement.className = hostConfig.makeCssClassName(\"ac-input-container\");\r\n        this._inputControlContainerElement.style.display = \"flex\";\r\n\r\n        this._renderedInputControlElement = this.internalRender();\r\n        this._renderedInputControlElement.style.minWidth = \"0px\";\r\n\r\n        if (AdaptiveCard.useBuiltInInputValidation && this.isNullable && this.validation.necessity == Enums.InputValidationNecessity.RequiredWithVisualCue) {\r\n            this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\r\n        }\r\n\r\n        this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\r\n\r\n        this._outerContainerElement.appendChild(this._inputControlContainerElement);\r\n\r\n        return this._outerContainerElement;\r\n    }\r\n\r\n    protected valueChanged() {\r\n        this.resetValidationFailureCue();\r\n\r\n        if (this.onValueChanged) {\r\n            this.onValueChanged(this);\r\n        }\r\n\r\n        raiseInputValueChangedEvent(this);\r\n    }\r\n\r\n    protected resetValidationFailureCue() {\r\n        if (AdaptiveCard.useBuiltInInputValidation && this.renderedElement) {\r\n            this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n\r\n            if (this._errorMessageElement) {\r\n                this._outerContainerElement.removeChild(this._errorMessageElement);\r\n\r\n                this._errorMessageElement = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected showValidationErrorMessage() {\r\n        if (this.renderedElement && AdaptiveCard.useBuiltInInputValidation && AdaptiveCard.displayInputValidationErrors && !Utils.isNullOrEmpty(this.validation.errorMessage)) {\r\n            this._errorMessageElement = document.createElement(\"span\");\r\n            this._errorMessageElement.className = this.hostConfig.makeCssClassName(\"ac-input-validation-error-message\");\r\n            this._errorMessageElement.textContent = this.validation.errorMessage;\r\n\r\n            this._outerContainerElement.appendChild(this._errorMessageElement);\r\n        }\r\n    }\r\n\r\n    protected parseInputValue(value: string): string {\r\n        return value;\r\n    }\r\n\r\n    abstract get value(): string;\r\n\r\n    onValueChanged: (sender: Input) => void;\r\n\r\n    readonly validation = new InputValidationOptions();\r\n\r\n    title: string;\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"title\", this.title);\r\n        Utils.setProperty(result, \"value\", this.renderedElement && !Utils.isNullOrEmpty(this.value) ? this.value : this.defaultValue);\r\n\r\n        if (AdaptiveCard.useBuiltInInputValidation) {\r\n            Utils.setProperty(result, \"validation\", this.validation.toJSON());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (Utils.isNullOrEmpty(this.id)) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"All inputs must have a unique Id\"\r\n                });\r\n        }\r\n    }\r\n\r\n    validateValue(): boolean {\r\n        if (AdaptiveCard.useBuiltInInputValidation) {\r\n            this.resetValidationFailureCue();\r\n\r\n            let result = this.validation.necessity != Enums.InputValidationNecessity.Optional ? !Utils.isNullOrEmpty(this.value) : true;\r\n\r\n            if (!result && this.renderedElement) {\r\n                this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n\r\n                this.showValidationErrorMessage();\r\n            }\r\n\r\n            return result;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.id = Utils.getStringValue(json[\"id\"]);\r\n        this.defaultValue = Utils.getStringValue(json[\"value\"]);\r\n\r\n        if (AdaptiveCard.useBuiltInInputValidation) {\r\n            let jsonValidation = json[\"validation\"];\r\n\r\n            if (jsonValidation) {\r\n                this.validation.parse(jsonValidation);\r\n            }\r\n        }\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        return [this];\r\n    }\r\n\r\n    get defaultValue(): string {\r\n        return this._defaultValue;\r\n    }\r\n\r\n    set defaultValue(value: string) {\r\n        this._defaultValue = this.parseInputValue(value);\r\n    }\r\n\r\n    get isInteractive(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class TextInput extends Input {\r\n    private _inlineAction: Action;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        if (this.isMultiline) {\r\n            let textareaElement = document.createElement(\"textarea\");\r\n            textareaElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\r\n            textareaElement.style.flex = \"1 1 auto\";\r\n            textareaElement.tabIndex = 0;\r\n\r\n            if (!Utils.isNullOrEmpty(this.placeholder)) {\r\n                textareaElement.placeholder = this.placeholder;\r\n                textareaElement.setAttribute(\"aria-label\", this.placeholder)\r\n            }\r\n\r\n            if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n                textareaElement.value = this.defaultValue;\r\n            }\r\n\r\n            if (this.maxLength && this.maxLength > 0) {\r\n                textareaElement.maxLength = this.maxLength;\r\n            }\r\n\r\n            textareaElement.oninput = () => { this.valueChanged(); }\r\n            textareaElement.onkeypress = (e: KeyboardEvent) => {\r\n                // Ctrl+Enter pressed\r\n                if (e.keyCode == 10 && this.inlineAction) {\r\n                    this.inlineAction.execute();\r\n                }\r\n            }\r\n\r\n            return textareaElement;\r\n        }\r\n        else {\r\n            let inputElement = document.createElement(\"input\");\r\n            inputElement.type = Enums.InputTextStyle[this.style].toLowerCase();\r\n            inputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\r\n            inputElement.style.flex = \"1 1 auto\";\r\n            inputElement.tabIndex = 0;\r\n\r\n            if (!Utils.isNullOrEmpty(this.placeholder)) {\r\n                inputElement.placeholder = this.placeholder;\r\n                inputElement.setAttribute(\"aria-label\", this.placeholder)\r\n            }\r\n\r\n            if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n                inputElement.value = this.defaultValue;\r\n            }\r\n\r\n            if (this.maxLength && this.maxLength > 0) {\r\n                inputElement.maxLength = this.maxLength;\r\n            }\r\n\r\n            inputElement.oninput = () => { this.valueChanged(); }\r\n            inputElement.onkeypress = (e: KeyboardEvent) => {\r\n                // Enter pressed\r\n                if (e.keyCode == 13 && this.inlineAction) {\r\n                    this.inlineAction.execute();\r\n                }\r\n            }\r\n\r\n            return inputElement;\r\n        }\r\n    }\r\n\r\n    protected overrideInternalRender(): HTMLElement {\r\n        let renderedInputControl = super.overrideInternalRender();\r\n\r\n        if (this.inlineAction) {\r\n            let button = document.createElement(\"button\");\r\n            button.className = this.hostConfig.makeCssClassName(\"ac-inlineActionButton\");\r\n            button.onclick = (e) => {\r\n                e.preventDefault();\r\n                e.cancelBubble = true;\r\n\r\n                this.inlineAction.execute();\r\n            };\r\n\r\n            if (!Utils.isNullOrEmpty(this.inlineAction.iconUrl)) {\r\n                button.classList.add(\"iconOnly\");\r\n\r\n                let icon = document.createElement(\"img\");\r\n                icon.style.height = \"100%\";\r\n\r\n                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\r\n                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\r\n                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\r\n                // after the image has loaded and been gicven its final size. The below trick also fixes that.\r\n                icon.style.display = \"none\";\r\n                icon.onload = () => {\r\n                    icon.style.removeProperty(\"display\");\r\n                };\r\n                icon.onerror = () => {\r\n                    button.removeChild(icon);\r\n                    button.classList.remove(\"iconOnly\");\r\n                    button.classList.add(\"textOnly\");\r\n                    button.textContent = !Utils.isNullOrEmpty(this.inlineAction.title) ? this.inlineAction.title : \"Title\";\r\n                }\r\n                icon.src = this.inlineAction.iconUrl;\r\n\r\n                button.appendChild(icon);\r\n\r\n                if (!Utils.isNullOrEmpty(this.inlineAction.title)) {\r\n                    button.title = this.inlineAction.title;\r\n                }\r\n            }\r\n            else {\r\n                button.classList.add(\"textOnly\");\r\n                button.textContent = !Utils.isNullOrEmpty(this.inlineAction.title) ? this.inlineAction.title : \"Title\";\r\n            }\r\n\r\n            button.style.marginLeft = \"8px\";\r\n\r\n            this.inputControlContainerElement.appendChild(button);\r\n        }\r\n\r\n        return renderedInputControl;\r\n    }\r\n\r\n    maxLength: number;\r\n    isMultiline: boolean = false;\r\n    placeholder: string;\r\n    style: Enums.InputTextStyle = Enums.InputTextStyle.Text;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Text\";\r\n    }\r\n\r\n    getActionById(id: string) {\r\n        let result = super.getActionById(id);\r\n\r\n        if (!result && this.inlineAction) {\r\n            result = this.inlineAction.getActionById(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"placeholder\", this.placeholder);\r\n        Utils.setNumberProperty(result, \"maxLength\", this.maxLength);\r\n        Utils.setProperty(result, \"isMultiline\", this.isMultiline, false);\r\n        Utils.setEnumProperty(Enums.InputTextStyle, result, \"style\", this.style, Enums.InputTextStyle.Text);\r\n\r\n        if (this._inlineAction) {\r\n            Utils.setProperty(result, \"inlineAction\", this._inlineAction.toJSON());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.maxLength = Utils.getNumberValue(json[\"maxLength\"]);\r\n        this.isMultiline = Utils.getBoolValue(json[\"isMultiline\"], this.isMultiline);\r\n        this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\r\n        this.style = Utils.getEnumValue(Enums.InputTextStyle, json[\"style\"], this.style);\r\n        this.inlineAction = createActionInstance(\r\n            this,\r\n            json[\"inlineAction\"],\r\n            [ShowCardAction.JsonTypeName],\r\n            !this.isDesignMode(),\r\n            errors);\r\n    }\r\n\r\n    get inlineAction(): Action {\r\n        return this._inlineAction;\r\n    }\r\n\r\n    set inlineAction(value: Action) {\r\n        this._inlineAction = value;\r\n\r\n        if (this._inlineAction) {\r\n            this._inlineAction.setParent(this);\r\n        }\r\n    }\r\n\r\n    get value(): string {\r\n        if (this.renderedInputControlElement) {\r\n            if (this.isMultiline) {\r\n                return (<HTMLTextAreaElement>this.renderedInputControlElement).value;\r\n            }\r\n            else {\r\n                return (<HTMLInputElement>this.renderedInputControlElement).value;\r\n            }\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport class ToggleInput extends Input {\r\n    private _checkboxInputElement: HTMLInputElement;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        let element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\r\n        element.style.width = \"100%\";\r\n        element.style.display = \"flex\";\r\n        element.style.alignItems = \"center\";\r\n\r\n        this._checkboxInputElement = document.createElement(\"input\");\r\n        this._checkboxInputElement.id = Utils.generateUniqueId();\r\n        this._checkboxInputElement.type = \"checkbox\";\r\n        this._checkboxInputElement.style.display = \"inline-block\";\r\n        this._checkboxInputElement.style.verticalAlign = \"middle\";\r\n        this._checkboxInputElement.style.margin = \"0\";\r\n        this._checkboxInputElement.style.flex = \"0 0 auto\";\r\n        this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\r\n        this._checkboxInputElement.tabIndex = 0;\r\n\r\n        if (this.defaultValue == this.valueOn) {\r\n            this._checkboxInputElement.checked = true;\r\n        }\r\n\r\n        this._checkboxInputElement.onchange = () => { this.valueChanged(); }\r\n\r\n        Utils.appendChild(element, this._checkboxInputElement);\r\n\r\n        if (!Utils.isNullOrEmpty(this.title) || this.isDesignMode()) {\r\n            let label = new Label();\r\n            label.setParent(this);\r\n            label.forElementId = this._checkboxInputElement.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = Utils.isNullOrEmpty(this.title) ? this.getJsonTypeName() : this.title;\r\n            label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n\r\n            let labelElement = label.render();\r\n            labelElement.style.display = \"inline-block\";\r\n            labelElement.style.flex = \"1 1 auto\";\r\n            labelElement.style.marginLeft = \"6px\";\r\n            labelElement.style.verticalAlign = \"middle\";\r\n\r\n            let spacerElement = document.createElement(\"div\");\r\n            spacerElement.style.width = \"6px\";\r\n\r\n            Utils.appendChild(element, spacerElement);\r\n            Utils.appendChild(element, labelElement);\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    protected get isNullable(): boolean {\r\n        return false;\r\n    }\r\n\r\n    valueOn: string = \"true\";\r\n    valueOff: string = \"false\";\r\n    wrap: boolean = false;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Toggle\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"valueOn\", this.valueOn, \"true\");\r\n        Utils.setProperty(result, \"valueOff\", this.valueOff, \"false\");\r\n        Utils.setProperty(result, \"wrap\", this.wrap);\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.title = Utils.getStringValue(json[\"title\"]);\r\n        this.valueOn = Utils.getStringValue(json[\"valueOn\"], this.valueOn);\r\n        this.valueOff = Utils.getStringValue(json[\"valueOff\"], this.valueOff);\r\n        this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\r\n    }\r\n\r\n    get value(): string {\r\n        if (this._checkboxInputElement) {\r\n            return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport class Choice extends SerializableObject {\r\n    title: string;\r\n    value: string;\r\n\r\n    constructor(title: string = undefined, value: string = undefined) {\r\n        super();\r\n\r\n        this.title = title;\r\n        this.value = value;\r\n    }\r\n\r\n    parse(json: any) {\r\n        super.parse(json);\r\n\r\n        this.title = Utils.getStringValue(json[\"title\"], \"\");\r\n        this.value = Utils.getStringValue(json[\"value\"], \"\");\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"title\", this.title);\r\n        Utils.setProperty(result, \"value\", this.value);\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class ChoiceSetInput extends Input {\r\n    private static uniqueCategoryCounter = 0;\r\n\r\n    private static getUniqueCategoryName(): string {\r\n        let uniqueCwtegoryName = \"__ac-category\" + ChoiceSetInput.uniqueCategoryCounter;\r\n\r\n        ChoiceSetInput.uniqueCategoryCounter++;\r\n\r\n        return uniqueCwtegoryName;\r\n    }\r\n\r\n    private _selectElement: HTMLSelectElement;\r\n    private _toggleInputs: Array<HTMLInputElement>;\r\n\r\n    // Make sure `aria-current` is applied to the currently-selected item\r\n    protected internalApplyAriaCurrent(): void {\r\n        const options = this._selectElement.options;\r\n\r\n        if (options) {\r\n            for (let i = 0; i < options.length; i++) {\r\n                if (options[i].selected) {\r\n                    options[i].setAttribute(\"aria-current\", \"true\");\r\n                }\r\n                else {\r\n                    options[i].removeAttribute(\"aria-current\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        if (!this.isMultiSelect) {\r\n            if (this.isCompact) {\r\n                // Render as a combo box\r\n                this._selectElement = document.createElement(\"select\");\r\n                this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\r\n                this._selectElement.style.width = \"100%\";\r\n\r\n                let option = document.createElement(\"option\");\r\n                option.selected = true;\r\n                option.disabled = true;\r\n                option.hidden = true;\r\n                option.value = \"\";\r\n\r\n                if (this.placeholder) {\r\n                    option.text = this.placeholder;\r\n                }\r\n\r\n                Utils.appendChild(this._selectElement, option);\r\n\r\n                for (var i = 0; i < this.choices.length; i++) {\r\n                    let option = document.createElement(\"option\");\r\n                    option.value = this.choices[i].value;\r\n                    option.text = this.choices[i].title;\r\n                    option.setAttribute(\"aria-label\", this.choices[i].title);\r\n\r\n                    if (this.choices[i].value == this.defaultValue) {\r\n                        option.selected = true;\r\n                    }\r\n\r\n                    Utils.appendChild(this._selectElement, option);\r\n                }\r\n\r\n                this._selectElement.onchange = () => {\r\n                    this.internalApplyAriaCurrent();\r\n                    this.valueChanged();\r\n                }\r\n\r\n                this.internalApplyAriaCurrent();\r\n                return this._selectElement;\r\n            }\r\n            else {\r\n                // Render as a series of radio buttons\r\n                let uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\r\n\r\n                let element = document.createElement(\"div\");\r\n                element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-expanded\");\r\n                element.style.width = \"100%\";\r\n\r\n                this._toggleInputs = [];\r\n\r\n                for (let i = 0; i < this.choices.length; i++) {\r\n                    let radioInput = document.createElement(\"input\");\r\n                    radioInput.id = Utils.generateUniqueId();\r\n                    radioInput.type = \"radio\";\r\n                    radioInput.style.margin = \"0\";\r\n                    radioInput.style.display = \"inline-block\";\r\n                    radioInput.style.verticalAlign = \"middle\";\r\n                    radioInput.name = Utils.isNullOrEmpty(this.id) ? uniqueCategoryName : this.id;\r\n                    radioInput.value = this.choices[i].value;\r\n                    radioInput.style.flex = \"0 0 auto\";\r\n                    radioInput.setAttribute(\"aria-label\", this.choices[i].title);\r\n\r\n                    if (this.choices[i].value == this.defaultValue) {\r\n                        radioInput.checked = true;\r\n                    }\r\n\r\n                    radioInput.onchange = () => { this.valueChanged(); }\r\n\r\n                    this._toggleInputs.push(radioInput);\r\n\r\n                    let label = new Label();\r\n                    label.setParent(this);\r\n                    label.forElementId = radioInput.id;\r\n                    label.hostConfig = this.hostConfig;\r\n                    label.text = Utils.isNullOrEmpty(this.choices[i].title) ? \"Choice \" + i : this.choices[i].title;\r\n                    label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\r\n                    label.wrap = this.wrap;\r\n\r\n                    let labelElement = label.render();\r\n                    labelElement.style.display = \"inline-block\";\r\n                    labelElement.style.flex = \"1 1 auto\";\r\n                    labelElement.style.marginLeft = \"6px\";\r\n                    labelElement.style.verticalAlign = \"middle\";\r\n\r\n                    let spacerElement = document.createElement(\"div\");\r\n                    spacerElement.style.width = \"6px\";\r\n\r\n                    let compoundInput = document.createElement(\"div\");\r\n                    compoundInput.style.display = \"flex\";\r\n                    compoundInput.style.alignItems = \"center\";\r\n\r\n                    Utils.appendChild(compoundInput, radioInput);\r\n                    Utils.appendChild(compoundInput, spacerElement);\r\n                    Utils.appendChild(compoundInput, labelElement);\r\n\r\n                    Utils.appendChild(element, compoundInput);\r\n                }\r\n\r\n                return element;\r\n            }\r\n        }\r\n        else {\r\n            // Render as a list of toggle inputs\r\n            let defaultValues = this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : null;\r\n\r\n            let element = document.createElement(\"div\");\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-choiceSetInput-multiSelect\");\r\n            element.style.width = \"100%\";\r\n\r\n            this._toggleInputs = [];\r\n\r\n            for (let i = 0; i < this.choices.length; i++) {\r\n                let checkboxInput = document.createElement(\"input\");\r\n                checkboxInput.id = Utils.generateUniqueId();\r\n                checkboxInput.type = \"checkbox\";\r\n                checkboxInput.style.margin = \"0\";\r\n                checkboxInput.style.display = \"inline-block\";\r\n                checkboxInput.style.verticalAlign = \"middle\";\r\n                checkboxInput.value = this.choices[i].value;\r\n                checkboxInput.style.flex = \"0 0 auto\";\r\n                checkboxInput.setAttribute(\"aria-label\", this.choices[i].title);\r\n\r\n                if (defaultValues) {\r\n                    if (defaultValues.indexOf(this.choices[i].value) >= 0) {\r\n                        checkboxInput.checked = true;\r\n                    }\r\n                }\r\n\r\n                checkboxInput.onchange = () => { this.valueChanged(); }\r\n\r\n                this._toggleInputs.push(checkboxInput);\r\n\r\n                let label = new Label();\r\n                label.setParent(this);\r\n                label.forElementId = checkboxInput.id;\r\n                label.hostConfig = this.hostConfig;\r\n                label.text = Utils.isNullOrEmpty(this.choices[i].title) ? \"Choice \" + i : this.choices[i].title;\r\n                label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;\r\n                label.wrap = this.wrap;\r\n\r\n                let labelElement = label.render();\r\n                labelElement.style.display = \"inline-block\";\r\n                labelElement.style.flex = \"1 1 auto\";\r\n                labelElement.style.marginLeft = \"6px\";\r\n                labelElement.style.verticalAlign = \"middle\";\r\n\r\n                let spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n\r\n                let compoundInput = document.createElement(\"div\");\r\n                compoundInput.style.display = \"flex\";\r\n                compoundInput.style.alignItems = \"center\";\r\n\r\n                Utils.appendChild(compoundInput, checkboxInput);\r\n                Utils.appendChild(compoundInput, spacerElement);\r\n                Utils.appendChild(compoundInput, labelElement);\r\n\r\n                Utils.appendChild(element, compoundInput);\r\n            }\r\n\r\n            return element;\r\n        }\r\n    }\r\n\r\n    choices: Array<Choice> = [];\r\n    isCompact: boolean = false;\r\n    isMultiSelect: boolean = false;\r\n    placeholder: string;\r\n    wrap: boolean = false;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.ChoiceSet\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"placeholder\", this.placeholder);\r\n\r\n        /*\r\n        let choices = [];\r\n\r\n        if (this.choices) {\r\n            for (let choice of this.choices) {\r\n                choices.push(choice.toJSON());\r\n            }\r\n        }\r\n\r\n        Utils.setProperty(result, \"choices\", choices);\r\n        */\r\n\r\n        Utils.setArrayProperty(result, \"choices\", this.choices);\r\n\r\n        Utils.setProperty(result, \"style\", this.isCompact ? null : \"expanded\");\r\n        Utils.setProperty(result, \"isMultiSelect\", this.isMultiSelect, false);\r\n        Utils.setProperty(result, \"wrap\", this.wrap, false);\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this.choices.length == 0) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.CollectionCantBeEmpty,\r\n                    message: \"An Input.ChoiceSet must have at least one choice defined.\"\r\n                });\r\n        }\r\n\r\n        for (let choice of this.choices) {\r\n            if (!choice.title || !choice.value) {\r\n                context.addFailure(\r\n                    this,\r\n                    {\r\n                        error: Enums.ValidationError.PropertyCantBeNull,\r\n                        message: \"All choices in an Input.ChoiceSet must have their title and value properties set.\"\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.isCompact = !(json[\"style\"] === \"expanded\");\r\n        this.isMultiSelect = Utils.getBoolValue(json[\"isMultiSelect\"], this.isMultiSelect);\r\n        this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\r\n\r\n        this.choices = [];\r\n\r\n        if (Array.isArray(json[\"choices\"])) {\r\n            for (let jsonChoice of json[\"choices\"]) {\r\n                let choice = new Choice();\r\n                choice.parse(jsonChoice);\r\n\r\n                this.choices.push(choice);\r\n            }\r\n        }\r\n\r\n        this.wrap = Utils.getBoolValue(json[\"wrap\"], this.wrap);\r\n    }\r\n\r\n    get value(): string {\r\n        if (!this.isMultiSelect) {\r\n            if (this.isCompact) {\r\n                if (this._selectElement) {\r\n                    return this._selectElement.selectedIndex > 0 ? this._selectElement.value : null;\r\n                }\r\n\r\n                return null;\r\n            }\r\n            else {\r\n                if (!this._toggleInputs || this._toggleInputs.length == 0) {\r\n                    return null;\r\n                }\r\n\r\n                for (var i = 0; i < this._toggleInputs.length; i++) {\r\n                    if (this._toggleInputs[i].checked) {\r\n                        return this._toggleInputs[i].value;\r\n                    }\r\n                }\r\n\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            if (!this._toggleInputs || this._toggleInputs.length == 0) {\r\n                return null;\r\n            }\r\n\r\n            var result: string = \"\";\r\n\r\n            for (var i = 0; i < this._toggleInputs.length; i++) {\r\n                if (this._toggleInputs[i].checked) {\r\n                    if (result != \"\") {\r\n                        result += this.hostConfig.choiceSetInputValueSeparator;\r\n                    }\r\n\r\n                    result += this._toggleInputs[i].value;\r\n                }\r\n            }\r\n\r\n            return result == \"\" ? null : result;\r\n        }\r\n    }\r\n}\r\n\r\nexport class NumberInput extends Input {\r\n    private _numberInputElement: HTMLInputElement;\r\n    private _min: number;\r\n    private _max: number;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        this._numberInputElement = document.createElement(\"input\");\r\n        this._numberInputElement.setAttribute(\"type\", \"number\");\r\n\r\n        if (this.min) {\r\n            this._numberInputElement.setAttribute(\"min\", this.min.toString());\r\n        }\r\n\r\n        if (this.max) {\r\n            this._numberInputElement.setAttribute(\"max\", this.max.toString());\r\n        }\r\n\r\n        this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\r\n        this._numberInputElement.style.width = \"100%\";\r\n        this._numberInputElement.tabIndex = 0;\r\n\r\n        if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n            this._numberInputElement.value = this.defaultValue;\r\n        }\r\n\r\n        if (!Utils.isNullOrEmpty(this.placeholder)) {\r\n            this._numberInputElement.placeholder = this.placeholder;\r\n            this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n\r\n        this._numberInputElement.oninput = () => { this.valueChanged(); }\r\n\r\n        return this._numberInputElement;\r\n    }\r\n\r\n    placeholder: string;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Number\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"placeholder\", this.placeholder);\r\n        Utils.setNumberProperty(result, \"min\", this.min);\r\n        Utils.setNumberProperty(result, \"max\", this.max);\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.placeholder = Utils.getStringValue(json[\"placeholder\"]);\r\n        this.min = Utils.getNumberValue(json[\"min\"]);\r\n        this.max = Utils.getNumberValue(json[\"max\"]);\r\n    }\r\n\r\n    get min(): number {\r\n        return this._min;\r\n    }\r\n\r\n    set min(value: number) {\r\n        this._min = value;\r\n    }\r\n\r\n    get max(): number {\r\n        return this._max;\r\n    }\r\n\r\n    set max(value: number) {\r\n        this._max = value;\r\n    }\r\n\r\n    get value(): string {\r\n        return this._numberInputElement ? this._numberInputElement.value : undefined;\r\n    }\r\n\r\n    get valueAsNumber(): number {\r\n        return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\r\n    }\r\n}\r\n\r\nexport class DateInput extends Input {\r\n    private _dateInputElement: HTMLInputElement;\r\n    private _min: string;\r\n    private _max: string;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        this._dateInputElement = document.createElement(\"input\");\r\n        this._dateInputElement.setAttribute(\"type\", \"date\");\r\n        this._dateInputElement.setAttribute(\"min\", this.min);\r\n        this._dateInputElement.setAttribute(\"max\", this.max);\r\n        this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\r\n        this._dateInputElement.style.width = \"100%\";\r\n\r\n        this._dateInputElement.oninput = () => { this.valueChanged(); }\r\n\r\n        if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n            this._dateInputElement.value = this.defaultValue;\r\n        }\r\n\r\n        return this._dateInputElement;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Date\";\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"min\", this.min);\r\n        Utils.setProperty(result, \"max\", this.max);\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.min = Utils.getStringValue(json[\"min\"]);\r\n        this.max = Utils.getStringValue(json[\"max\"]);\r\n    }\r\n\r\n    get min(): string {\r\n        return this._min;\r\n    }\r\n\r\n    set min(value: string) {\r\n        this._min = this.parseInputValue(value);\r\n    }\r\n\r\n    get max(): string {\r\n        return this._max;\r\n    }\r\n\r\n    set max(value: string) {\r\n        this._max = this.parseInputValue(value);\r\n    }\r\n\r\n    get value(): string {\r\n        return this._dateInputElement ? this._dateInputElement.value : null;\r\n    }\r\n}\r\n\r\nexport class TimeInput extends Input {\r\n    private _timeInputElement: HTMLInputElement;\r\n    private _min: string;\r\n    private _max: string;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        this._timeInputElement = document.createElement(\"input\");\r\n        this._timeInputElement.setAttribute(\"type\", \"time\");\r\n        this._timeInputElement.setAttribute(\"min\", this.min);\r\n        this._timeInputElement.setAttribute(\"max\", this.max);\r\n        this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\r\n        this._timeInputElement.style.width = \"100%\";\r\n        this._timeInputElement.oninput = () => { this.valueChanged(); }\r\n\r\n        if (!Utils.isNullOrEmpty(this.defaultValue)) {\r\n            this._timeInputElement.value = this.defaultValue;\r\n        }\r\n\r\n        return this._timeInputElement;\r\n    }\r\n\r\n    protected parseInputValue(value: string): string {\r\n        if (/^[0-9]{2}:[0-9]{2}$/.test(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Input.Time\";\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"min\", this.min);\r\n        Utils.setProperty(result, \"max\", this.max);\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.min = Utils.getStringValue(json[\"min\"]);\r\n        this.max = Utils.getStringValue(json[\"max\"]);\r\n    }\r\n\r\n    get min(): string {\r\n        return this._min;\r\n    }\r\n\r\n    set min(value: string) {\r\n        this._min = this.parseInputValue(value);\r\n    }\r\n\r\n    get max(): string {\r\n        return this._max;\r\n    }\r\n\r\n    set max(value: string) {\r\n        this._max = this.parseInputValue(value);\r\n    }\r\n\r\n    get value(): string {\r\n        return this._timeInputElement ? this._timeInputElement.value : null;\r\n    }\r\n}\r\n\r\nenum ActionButtonState {\r\n    Normal,\r\n    Expanded,\r\n    Subdued\r\n}\r\n\r\nclass ActionButton {\r\n    private _parentContainerStyle: string;\r\n    private _state: ActionButtonState = ActionButtonState.Normal;\r\n\r\n    private updateCssStyle() {\r\n        let hostConfig = this.action.parent.hostConfig;\r\n\r\n        this.action.renderedElement.className = hostConfig.makeCssClassName(\"ac-pushButton\");\r\n\r\n        if (!Utils.isNullOrEmpty(this._parentContainerStyle)) {\r\n            this.action.renderedElement.classList.add(\"style-\" + this._parentContainerStyle);\r\n        }\r\n\r\n        if (this.action instanceof ShowCardAction) {\r\n            this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expandable\"));\r\n        }\r\n\r\n        this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"expanded\"));\r\n        this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"subdued\"));\r\n\r\n        switch (this._state) {\r\n            case ActionButtonState.Expanded:\r\n                this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\r\n                break;\r\n            case ActionButtonState.Subdued:\r\n                this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\r\n                break;\r\n        }\r\n\r\n        if (!Utils.isNullOrEmpty(this.action.style)) {\r\n            if (this.action.style === Enums.ActionStyle.Positive) {\r\n                this.action.renderedElement.classList.add(...hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\r\n            }\r\n            else {\r\n                this.action.renderedElement.classList.add(...hostConfig.makeCssClassNames(\"style-\" + this.action.style.toLowerCase()));\r\n             }\r\n        }\r\n    }\r\n\r\n    readonly action: Action;\r\n\r\n    constructor(action: Action, parentContainerStyle: string) {\r\n        this.action = action;\r\n        this._parentContainerStyle = parentContainerStyle;\r\n    }\r\n\r\n    onClick: (actionButton: ActionButton) => void = null;\r\n\r\n    render() {\r\n        this.action.render();\r\n        this.action.renderedElement.onclick = (e) => {\r\n            e.preventDefault();\r\n            e.cancelBubble = true;\r\n\r\n            this.click();\r\n        };\r\n\r\n        this.updateCssStyle();\r\n    }\r\n\r\n    click() {\r\n        if (this.onClick != null) {\r\n            this.onClick(this);\r\n        }\r\n    }\r\n\r\n    get state(): ActionButtonState {\r\n        return this._state;\r\n    }\r\n\r\n    set state(value: ActionButtonState) {\r\n        this._state = value;\r\n\r\n        this.updateCssStyle();\r\n    }\r\n}\r\n\r\nexport abstract class Action extends CardObject {\r\n    private _shouldFallback: boolean = false;\r\n    private _parent: CardElement = null;\r\n    private _actionCollection: ActionCollection = null; // hold the reference to its action collection\r\n    private _renderedElement: HTMLElement = null;\r\n\r\n    private setCollection(actionCollection: ActionCollection) {\r\n        this._actionCollection = actionCollection;\r\n    }\r\n\r\n    protected addCssClasses(element: HTMLElement) {\r\n        // Do nothing in base implementation\r\n    }\r\n\r\n    protected internalGetReferencedInputs(allInputs: Array<Input>): Shared.Dictionary<Input> {\r\n        return {};\r\n    }\r\n\r\n    protected internalPrepareForExecution(inputs: Shared.Dictionary<Input>) {\r\n        // Do nothing in base implementation\r\n    }\r\n\r\n    protected internalValidateInputs(referencedInputs: Shared.Dictionary<Input>): Array<Input> {\r\n        let result: Input[] = [];\r\n\r\n        if (AdaptiveCard.useBuiltInInputValidation && !this.ignoreInputValidation) {\r\n            for (let key of Object.keys(referencedInputs)) {\r\n                let input = referencedInputs[key];\r\n\r\n                if (!input.validateValue()) {\r\n                    result.push(input);\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    abstract getJsonTypeName(): string;\r\n\r\n    readonly requires = new HostConfig.HostCapabilities();\r\n\r\n    title: string;\r\n    iconUrl: string;\r\n    style: string = Enums.ActionStyle.Default;\r\n\r\n    onExecute: (sender: Action) => void;\r\n\r\n    getAriaRole(): string {\r\n        return \"button\";\r\n    }\r\n\r\n    getHref(): string {\r\n        return \"\";\r\n    }\r\n\r\n    toJSON(): any {\r\n\t\tlet result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"type\", this.getJsonTypeName());\r\n        Utils.setProperty(result, \"title\", this.title);\r\n        Utils.setProperty(result, \"iconUrl\", this.iconUrl);\r\n        Utils.setProperty(result, \"style\", this.style, Enums.ActionStyle.Default);\r\n\r\n        return result;\r\n    }\r\n\r\n    render(baseCssClass: string = \"ac-pushButton\") {\r\n        // Cache hostConfig for perf\r\n        let hostConfig = this.parent.hostConfig;\r\n\r\n        let buttonElement = document.createElement(\"button\");\r\n\r\n        this.addCssClasses(buttonElement);\r\n\r\n        buttonElement.setAttribute(\"aria-label\", this.title);\r\n        buttonElement.type = \"button\";\r\n        buttonElement.style.display = \"flex\";\r\n        buttonElement.style.alignItems = \"center\";\r\n        buttonElement.style.justifyContent = \"center\";\r\n\r\n        buttonElement.setAttribute(\"role\", this.getAriaRole());\r\n\r\n        let hasTitle = !Utils.isNullOrEmpty(this.title);\r\n\r\n        let titleElement = document.createElement(\"div\");\r\n        titleElement.style.overflow = \"hidden\";\r\n        titleElement.style.textOverflow = \"ellipsis\";\r\n\r\n        if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {\r\n            titleElement.style.whiteSpace = \"nowrap\";\r\n        }\r\n\r\n        if (hasTitle) {\r\n            titleElement.innerText = this.title;\r\n        }\r\n\r\n        if (Utils.isNullOrEmpty(this.iconUrl)) {\r\n            buttonElement.classList.add(\"noIcon\");\r\n\r\n            buttonElement.appendChild(titleElement);\r\n        }\r\n        else {\r\n            let iconElement = document.createElement(\"img\");\r\n            iconElement.src = this.iconUrl;\r\n            iconElement.style.width = hostConfig.actions.iconSize + \"px\";\r\n            iconElement.style.height = hostConfig.actions.iconSize + \"px\";\r\n            iconElement.style.flex = \"0 0 auto\";\r\n\r\n            if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {\r\n                buttonElement.classList.add(\"iconAbove\");\r\n                buttonElement.style.flexDirection = \"column\";\r\n\r\n                if (hasTitle) {\r\n                    iconElement.style.marginBottom = \"4px\";\r\n                }\r\n            }\r\n            else {\r\n                buttonElement.classList.add(\"iconLeft\");\r\n\r\n                if (hasTitle) {\r\n                    iconElement.style.marginRight = \"4px\";\r\n                }\r\n            }\r\n\r\n            buttonElement.appendChild(iconElement);\r\n            buttonElement.appendChild(titleElement);\r\n        }\r\n\r\n        this._renderedElement = buttonElement;\r\n    }\r\n\r\n    setParent(value: CardElement) {\r\n        this._parent = value;\r\n    }\r\n\r\n    execute() {\r\n        if (this.onExecute) {\r\n            this.onExecute(this);\r\n        }\r\n\r\n        raiseExecuteActionEvent(this);\r\n    }\r\n\r\n    prepareForExecution(): boolean {\r\n        let referencedInputs = this.getReferencedInputs();\r\n\r\n        if (this.internalValidateInputs(referencedInputs).length > 0) {\r\n            return false;\r\n        }\r\n\r\n        this.internalPrepareForExecution(referencedInputs);\r\n\r\n        return true;\r\n    };\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n\t\tsuper.parse(json, errors);\r\n\r\n        raiseParseActionEvent(this, json, errors);\r\n\r\n        this.requires.parse(json[\"requires\"], errors);\r\n\r\n        if (!json[\"title\"] && json[\"title\"] !== \"\") {\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"Actions should always have a title.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n\r\n        this.title = Utils.getStringValue(json[\"title\"]);\r\n        this.iconUrl = Utils.getStringValue(json[\"iconUrl\"]);\r\n        this.style = Utils.getStringValue(json[\"style\"], this.style);\r\n    }\r\n\r\n    remove(): boolean {\r\n        if (this._actionCollection) {\r\n            return this._actionCollection.removeAction(this);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        return [];\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        if (!Utils.isNullOrEmpty(this.iconUrl)) {\r\n            return [{ url: this.iconUrl, mimeType: \"image\" }]\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        if (this.id == id) {\r\n            return this;\r\n        }\r\n    }\r\n\r\n    getReferencedInputs(): Shared.Dictionary<Input> {\r\n        return this.internalGetReferencedInputs(this.parent.getRootElement().getAllInputs());\r\n    }\r\n\r\n    validateInputs() {\r\n        return this.internalValidateInputs(this.getReferencedInputs());\r\n    }\r\n\r\n    shouldFallback(): boolean {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.parent.hostConfig.hostCapabilities);\r\n    }\r\n\r\n    get isPrimary(): boolean {\r\n        return this.style == Enums.ActionStyle.Positive;\r\n    }\r\n\r\n    set isPrimary(value: boolean) {\r\n        if (value) {\r\n            this.style = Enums.ActionStyle.Positive;\r\n        }\r\n        else {\r\n            if (this.style == Enums.ActionStyle.Positive) {\r\n                this.style = Enums.ActionStyle.Default;\r\n            }\r\n        }\r\n    }\r\n\r\n    get ignoreInputValidation(): boolean {\r\n        return true;\r\n    }\r\n\r\n    get parent(): CardElement {\r\n        return this._parent;\r\n    }\r\n\r\n    get renderedElement(): HTMLElement {\r\n        return this._renderedElement;\r\n    }\r\n}\r\n\r\nexport class SubmitAction extends Action {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.Submit\" = \"Action.Submit\";\r\n\r\n    private _isPrepared: boolean = false;\r\n    private _originalData: Object;\r\n    private _processedData: Object;\r\n    private _ignoreInputValidation: boolean = false;\r\n\r\n    protected internalGetReferencedInputs(allInputs: Array<Input>): Shared.Dictionary<Input> {\r\n        let result: Shared.Dictionary<Input> = {};\r\n\r\n        for (let input of allInputs) {\r\n            result[input.id] = input;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected internalPrepareForExecution(inputs: Shared.Dictionary<Input>) {\r\n        if (this._originalData) {\r\n            this._processedData = JSON.parse(JSON.stringify(this._originalData));\r\n        }\r\n        else {\r\n            this._processedData = {};\r\n        }\r\n\r\n        for (let key of Object.keys(inputs)) {\r\n            let input = inputs[key];\r\n\r\n            if (input.value != null) {\r\n                this._processedData[input.id] = input.value;\r\n            }\r\n        }\r\n\r\n        this._isPrepared = true;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return SubmitAction.JsonTypeName;\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\r\n        Utils.setProperty(result, \"data\", this._originalData);\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\r\n        this.data = json[\"data\"];\r\n    }\r\n\r\n    get ignoreInputValidation(): boolean {\r\n        return this._ignoreInputValidation;\r\n    }\r\n\r\n    set ignoreInputValidation(value: boolean) {\r\n        this._ignoreInputValidation = value;\r\n    }\r\n\r\n    get data(): Object {\r\n        return this._isPrepared ? this._processedData : this._originalData;\r\n    }\r\n\r\n    set data(value: Object) {\r\n        this._originalData = value;\r\n        this._isPrepared = false;\r\n    }\r\n}\r\n\r\nexport class OpenUrlAction extends Action {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.OpenUrl\" = \"Action.OpenUrl\";\r\n\r\n    url: string;\r\n\r\n    getJsonTypeName(): string {\r\n        return OpenUrlAction.JsonTypeName;\r\n    }\r\n\r\n    getAriaRole(): string {\r\n        return \"link\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"url\", this.url);\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (Utils.isNullOrEmpty(this.url)) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"An Action.OpenUrl must have its url property set.\"\r\n                });\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n    }\r\n\r\n    getHref(): string {\r\n        return this.url;\r\n    }\r\n}\r\n\r\nexport class ToggleVisibilityAction extends Action {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.ToggleVisibility\" = \"Action.ToggleVisibility\";\r\n\r\n    targetElements = {}\r\n\r\n    getJsonTypeName(): string {\r\n        return ToggleVisibilityAction.JsonTypeName;\r\n    }\r\n\r\n    execute() {\r\n        for (let elementId of Object.keys(this.targetElements)) {\r\n            let targetElement = this.parent.getRootElement().getElementById(elementId);\r\n\r\n            if (targetElement) {\r\n                if (typeof this.targetElements[elementId] === \"boolean\") {\r\n                    targetElement.isVisible = this.targetElements[elementId];\r\n                }\r\n                else {\r\n                    targetElement.isVisible = !targetElement.isVisible;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(json: any) {\r\n        super.parse(json);\r\n\r\n        this.targetElements = {};\r\n\r\n        let jsonTargetElements = json[\"targetElements\"];\r\n\r\n        if (jsonTargetElements && Array.isArray(jsonTargetElements)) {\r\n            for (let item of jsonTargetElements) {\r\n                if (typeof item === \"string\") {\r\n                    this.targetElements[item] = undefined;\r\n                }\r\n                else if (typeof item === \"object\") {\r\n                    let jsonElementId = item[\"elementId\"];\r\n\r\n                    if (jsonElementId && typeof jsonElementId === \"string\") {\r\n                        this.targetElements[jsonElementId] = Utils.getBoolValue(item[\"isVisible\"], undefined);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        let result = super.toJSON();\r\n\r\n        let targetElements: any[] = [];\r\n\r\n        for (let id of Object.keys(this.targetElements)) {\r\n            if (typeof this.targetElements[id] === \"boolean\") {\r\n                targetElements.push(\r\n                    {\r\n                        elementId: id,\r\n                        isVisible: this.targetElements[id]\r\n                    }\r\n                );\r\n            }\r\n            else {\r\n                targetElements.push(id);\r\n            }\r\n        }\r\n\r\n        result[\"targetElements\"] = targetElements;\r\n\r\n        return result;\r\n    }\r\n\r\n    addTargetElement(elementId: string, isVisible: boolean = undefined) {\r\n        this.targetElements[elementId] = isVisible;\r\n    }\r\n\r\n    removeTargetElement(elementId) {\r\n        delete this.targetElements[elementId];\r\n    }\r\n}\r\n\r\nexport class HttpHeader extends SerializableObject {\r\n    private _value = new Shared.StringWithSubstitutions();\r\n\r\n    name: string;\r\n\r\n    constructor(name: string = \"\", value: string = \"\") {\r\n        super();\r\n\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n\r\n    parse(json: any) {\r\n        super.parse(json);\r\n\r\n        this.name = Utils.getStringValue(json[\"name\"]);\r\n        this.value = Utils.getStringValue(json[\"value\"]);\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"name\", this.name);\r\n        Utils.setProperty(result, \"value\", this._value.getOriginal());\r\n\r\n        return result;\r\n    }\r\n\r\n    getReferencedInputs(inputs: Array<Input>, referencedInputs: Shared.Dictionary<Input>) {\r\n        this._value.getReferencedInputs(inputs, referencedInputs);\r\n    }\r\n\r\n    prepareForExecution(inputs: Shared.Dictionary<Input>) {\r\n        this._value.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\r\n    }\r\n\r\n    get value(): string {\r\n        return this._value.get();\r\n    }\r\n\r\n    set value(newValue: string) {\r\n        this._value.set(newValue);\r\n    }\r\n}\r\n\r\nexport class HttpAction extends Action {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.Http\" = \"Action.Http\";\r\n\r\n    private _url = new Shared.StringWithSubstitutions();\r\n    private _body = new Shared.StringWithSubstitutions();\r\n    private _headers: Array<HttpHeader> = [];\r\n    private _ignoreInputValidation: boolean = false;\r\n\r\n    protected internalGetReferencedInputs(allInputs: Array<Input>): Shared.Dictionary<Input> {\r\n        let result: Shared.Dictionary<Input> = {};\r\n\r\n        this._url.getReferencedInputs(allInputs, result);\r\n\r\n        for (let header of this._headers) {\r\n            header.getReferencedInputs(allInputs, result);\r\n        }\r\n\r\n        this._body.getReferencedInputs(allInputs, result);\r\n\r\n        return result;\r\n    }\r\n\r\n    protected internalPrepareForExecution(inputs: Shared.Dictionary<Input>) {\r\n        this._url.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);\r\n\r\n        let contentType = Shared.ContentTypes.applicationJson;\r\n\r\n        for (let header of this._headers) {\r\n            header.prepareForExecution(inputs);\r\n\r\n            if (header.name && header.name.toLowerCase() == \"content-type\") {\r\n                contentType = header.value;\r\n            }\r\n        }\r\n\r\n        this._body.substituteInputValues(inputs, contentType);\r\n    };\r\n\r\n    method: string;\r\n\r\n    getJsonTypeName(): string {\r\n        return HttpAction.JsonTypeName;\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"method\", this.method);\r\n        Utils.setProperty(result, \"url\", this._url.getOriginal());\r\n        Utils.setProperty(result, \"body\", this._body.getOriginal());\r\n        Utils.setProperty(result, \"ignoreInputValidation\", this.ignoreInputValidation, false);\r\n        Utils.setArrayProperty(result, \"headers\", this.headers);\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (Utils.isNullOrEmpty(this.url)) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"An Action.Http must have its url property set.\"\r\n                });\r\n        }\r\n\r\n        if (this.headers.length > 0) {\r\n            for (let header of this.headers) {\r\n                if (!header.name) {\r\n                    context.addFailure(\r\n                        this,\r\n                        {\r\n                            error: Enums.ValidationError.PropertyCantBeNull,\r\n                            message: \"All headers of an Action.Http must have their name and value properties set.\"\r\n                        });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n        this.method = Utils.getStringValue(json[\"method\"]);\r\n        this.body = Utils.getStringValue(json[\"body\"]);\r\n        this._ignoreInputValidation = Utils.getBoolValue(json[\"ignoreInputValidation\"], this._ignoreInputValidation);\r\n\r\n        this._headers = [];\r\n\r\n        if (Array.isArray(json[\"headers\"])) {\r\n            for (let jsonHeader of json[\"headers\"]) {\r\n                let httpHeader = new HttpHeader();\r\n                httpHeader.parse(jsonHeader);\r\n\r\n                this.headers.push(httpHeader);\r\n            }\r\n        }\r\n    }\r\n\r\n    get ignoreInputValidation(): boolean {\r\n        return this._ignoreInputValidation;\r\n    }\r\n\r\n    set ignoreInputValidation(value: boolean) {\r\n        this._ignoreInputValidation = value;\r\n    }\r\n\r\n    get url(): string {\r\n        return this._url.get();\r\n    }\r\n\r\n    set url(value: string) {\r\n        this._url.set(value);\r\n    }\r\n\r\n    get body(): string {\r\n        return this._body.get();\r\n    }\r\n\r\n    set body(value: string) {\r\n        this._body.set(value);\r\n    }\r\n\r\n    get headers(): Array<HttpHeader> {\r\n        return this._headers ? this._headers : [];\r\n    }\r\n\r\n    set headers(value: Array<HttpHeader>) {\r\n        this._headers = value;\r\n    }\r\n}\r\n\r\nexport class ShowCardAction extends Action {\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    static readonly JsonTypeName: \"Action.ShowCard\" = \"Action.ShowCard\";\r\n\r\n    protected addCssClasses(element: HTMLElement) {\r\n        super.addCssClasses(element);\r\n\r\n        element.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\r\n    }\r\n\r\n    readonly card: AdaptiveCard = new InlineAdaptiveCard();\r\n\r\n    getJsonTypeName(): string {\r\n        return ShowCardAction.JsonTypeName;\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        if (this.card) {\r\n            Utils.setProperty(result, \"card\", this.card.toJSON());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        this.card.internalValidateProperties(context);\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        let jsonCard = json[\"card\"];\r\n\r\n        if (jsonCard) {\r\n            this.card.parse(jsonCard, errors);\r\n        }\r\n        else {\r\n            raiseParseError(\r\n                {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"An Action.ShowCard must have its \\\"card\\\" property set to a valid AdaptiveCard object.\"\r\n                },\r\n                errors\r\n            );\r\n        }\r\n    }\r\n\r\n    setParent(value: CardElement) {\r\n        super.setParent(value);\r\n\r\n        this.card.setParent(value);\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        return this.card.getAllInputs();\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        return super.getResourceInformation().concat(this.card.getResourceInformation());\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        var result = super.getActionById(id);\r\n\r\n        if (!result) {\r\n            result = this.card.getActionById(id);\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nclass ActionCollection {\r\n    private _owner: CardElement;\r\n    private _actionCardContainer: HTMLDivElement;\r\n    private _expandedAction: ShowCardAction = null;\r\n    private _renderedActionCount: number = 0;\r\n    private _actionCard: HTMLElement = null;\r\n\r\n    private refreshContainer() {\r\n        this._actionCardContainer.innerHTML = \"\";\r\n\r\n        if (this._actionCard === null) {\r\n            this._actionCardContainer.style.marginTop = \"0px\";\r\n\r\n            return;\r\n        }\r\n\r\n        this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\" : \"0px\";\r\n\r\n        let padding = this._owner.getEffectivePadding();\r\n\r\n        this._owner.getImmediateSurroundingPadding(padding);\r\n\r\n        let physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n\r\n        if (this._actionCard !== null) {\r\n            this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\r\n            this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\r\n\r\n            this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n            this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n\r\n            if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {\r\n                this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n                this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\r\n            }\r\n\r\n            Utils.appendChild(this._actionCardContainer, this._actionCard);\r\n        }\r\n    }\r\n\r\n    private layoutChanged() {\r\n        this._owner.getRootElement().updateLayout();\r\n    }\r\n\r\n    private hideActionCard() {\r\n        var previouslyExpandedAction = this._expandedAction;\r\n\r\n        this._expandedAction = null;\r\n        this._actionCard = null;\r\n\r\n        this.refreshContainer();\r\n\r\n        if (previouslyExpandedAction) {\r\n            this.layoutChanged();\r\n\r\n            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\r\n        }\r\n    }\r\n\r\n    private showActionCard(action: ShowCardAction, suppressStyle: boolean = false, raiseEvent: boolean = true) {\r\n        if (action.card == null) {\r\n            return;\r\n        }\r\n\r\n        (<InlineAdaptiveCard>action.card).suppressStyle = suppressStyle;\r\n\r\n        var renderedCard = action.card.renderedElement ? action.card.renderedElement : action.card.render();\r\n\r\n        this._actionCard = renderedCard;\r\n        this._expandedAction = action;\r\n\r\n        this.refreshContainer();\r\n\r\n        if (raiseEvent) {\r\n            this.layoutChanged();\r\n\r\n            raiseInlineCardExpandedEvent(action, true);\r\n        }\r\n    }\r\n\r\n    private collapseExpandedAction() {\r\n        for (var i = 0; i < this.buttons.length; i++) {\r\n            this.buttons[i].state = ActionButtonState.Normal;\r\n        }\r\n\r\n        this.hideActionCard();\r\n    }\r\n\r\n    private expandShowCardAction(action: ShowCardAction, raiseEvent: boolean) {\r\n        for (var i = 0; i < this.buttons.length; i++) {\r\n            if (this.buttons[i].action !== action) {\r\n                this.buttons[i].state = ActionButtonState.Subdued;\r\n            }\r\n            else {\r\n                this.buttons[i].state = ActionButtonState.Expanded;\r\n            }\r\n        }\r\n\r\n        this.showActionCard(\r\n            action,\r\n            !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()),\r\n            raiseEvent);\r\n    }\r\n\r\n    private actionClicked(actionButton: ActionButton) {\r\n        if (!(actionButton.action instanceof ShowCardAction)) {\r\n            for (var i = 0; i < this.buttons.length; i++) {\r\n                this.buttons[i].state = ActionButtonState.Normal;\r\n            }\r\n\r\n            this.hideActionCard();\r\n\r\n            actionButton.action.execute();\r\n        }\r\n        else {\r\n            if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\r\n                actionButton.action.execute();\r\n            }\r\n            else if (actionButton.action === this._expandedAction) {\r\n                this.collapseExpandedAction();\r\n            }\r\n            else {\r\n                this.expandShowCardAction(actionButton.action, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    private getParentContainer(): Container {\r\n        if (this._owner instanceof Container) {\r\n            return this._owner;\r\n        }\r\n        else {\r\n            return this._owner.getParentContainer();\r\n        }\r\n    }\r\n\r\n    private findActionButton(action: Action): ActionButton {\r\n        for (let actionButton of this.buttons) {\r\n            if (actionButton.action == action) {\r\n                return actionButton;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    items: Array<Action> = [];\r\n    buttons: Array<ActionButton> = [];\r\n\r\n    constructor(owner: CardElement) {\r\n        this._owner = owner;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        this.clear();\r\n\r\n        if (json && json instanceof Array) {\r\n            for (let jsonAction of json) {\r\n                let action = createActionInstance(\r\n                    this._owner,\r\n                    jsonAction,\r\n                    [],\r\n                    !this._owner.isDesignMode(),\r\n                    errors);\r\n\r\n                if (action) {\r\n                    this.addAction(action);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    toJSON(): any {\r\n        if (this.items.length > 0) {\r\n            let result = [];\r\n\r\n            for (let action of this.items) {\r\n                result.push(action.toJSON());\r\n            }\r\n\r\n            return result;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        var result: Action = null;\r\n\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            result = this.items[i].getActionById(id);\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    validateProperties(context: ValidationResults) {\r\n        if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {\r\n            context.addFailure(\r\n                this._owner,\r\n                {\r\n                    error: Enums.ValidationError.TooManyActions,\r\n                    message: \"A maximum of \" + this._owner.hostConfig.actions.maxActions + \" actions are allowed.\"\r\n                });\r\n        }\r\n\r\n        if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\r\n            context.addFailure(\r\n                this._owner,\r\n                {\r\n                    error: Enums.ValidationError.InteractivityNotAllowed,\r\n                    message: \"Interactivity is not allowed.\"\r\n                });\r\n        }\r\n\r\n        for (let item of this.items) {\r\n            if (!isActionAllowed(item, this._owner.getForbiddenActionTypes())) {\r\n                context.addFailure(\r\n                    this._owner,\r\n                    {\r\n                        error: Enums.ValidationError.ActionTypeNotAllowed,\r\n                        message: \"Actions of type \" + item.getJsonTypeName() + \" are not allowe.\"\r\n                    });\r\n            }\r\n\r\n            item.internalValidateProperties(context);\r\n        }\r\n    }\r\n\r\n    render(orientation: Enums.Orientation, isDesignMode: boolean): HTMLElement {\r\n        // Cache hostConfig for better perf\r\n        let hostConfig = this._owner.hostConfig;\r\n\r\n        if (!hostConfig.supportsInteractivity) {\r\n            return null;\r\n        }\r\n\r\n        let element = document.createElement(\"div\");\r\n        let maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;\r\n        let forbiddenActionTypes = this._owner.getForbiddenActionTypes();\r\n\r\n        this._actionCardContainer = document.createElement(\"div\");\r\n        this._renderedActionCount = 0;\r\n\r\n        if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && isActionAllowed(this.items[0], forbiddenActionTypes)) {\r\n            this.showActionCard(<ShowCardAction>this.items[0], true);\r\n            this._renderedActionCount = 1;\r\n        }\r\n        else {\r\n            let buttonStrip = document.createElement(\"div\");\r\n            buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\r\n            buttonStrip.style.display = \"flex\";\r\n\r\n            if (orientation == Enums.Orientation.Horizontal) {\r\n                buttonStrip.style.flexDirection = \"row\";\r\n\r\n                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                buttonStrip.style.flexDirection = \"column\";\r\n\r\n                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Stretch:\r\n                            buttonStrip.style.alignItems = \"stretch\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            let parentContainerStyle = this.getParentContainer().getEffectiveStyle();\r\n\r\n            for (let i = 0; i < this.items.length; i++) {\r\n                if (isActionAllowed(this.items[i], forbiddenActionTypes)) {\r\n                    let actionButton: ActionButton = this.findActionButton(this.items[i]);\r\n\r\n                    if (!actionButton) {\r\n                        actionButton = new ActionButton(this.items[i], parentContainerStyle);\r\n                        actionButton.onClick = (ab) => { this.actionClicked(ab); };\r\n\r\n                        this.buttons.push(actionButton);\r\n                    }\r\n\r\n                    actionButton.render();\r\n\r\n                    if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {\r\n                        actionButton.action.renderedElement.style.flex = \"0 1 100%\";\r\n                    }\r\n                    else {\r\n                        actionButton.action.renderedElement.style.flex = \"0 1 auto\";\r\n                    }\r\n\r\n                    buttonStrip.appendChild(actionButton.action.renderedElement);\r\n\r\n                    this._renderedActionCount++;\r\n\r\n                    if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {\r\n                        break;\r\n                    }\r\n                    else if (hostConfig.actions.buttonSpacing > 0) {\r\n                        var spacer = document.createElement(\"div\");\r\n\r\n                        if (orientation === Enums.Orientation.Horizontal) {\r\n                            spacer.style.flex = \"0 0 auto\";\r\n                            spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n                        else {\r\n                            spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n\r\n                        Utils.appendChild(buttonStrip, spacer);\r\n                    }\r\n                }\r\n            }\r\n\r\n            let buttonStripContainer = document.createElement(\"div\");\r\n            buttonStripContainer.style.overflow = \"hidden\";\r\n            buttonStripContainer.appendChild(buttonStrip);\r\n\r\n            Utils.appendChild(element, buttonStripContainer);\r\n        }\r\n\r\n        Utils.appendChild(element, this._actionCardContainer);\r\n\r\n        for (let i = 0; i < this.buttons.length; i++) {\r\n            if (this.buttons[i].state == ActionButtonState.Expanded) {\r\n                this.expandShowCardAction(<ShowCardAction>this.buttons[i].action, false);\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        return this._renderedActionCount > 0 ? element : null;\r\n    }\r\n\r\n    addAction(action: Action) {\r\n        if (!action) {\r\n            throw new Error(\"The action parameter cannot be null.\");\r\n        }\r\n\r\n        if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {\r\n            this.items.push(action);\r\n\r\n            if (!action.parent) {\r\n                action.setParent(this._owner);\r\n            }\r\n\r\n            invokeSetCollection(action, this);\r\n        }\r\n        else {\r\n            throw new Error(\"The action already belongs to another element.\");\r\n        }\r\n    }\r\n\r\n    removeAction(action: Action): boolean {\r\n        if (this.expandedAction && this._expandedAction == action) {\r\n            this.collapseExpandedAction();\r\n        }\r\n\r\n        var actionIndex = this.items.indexOf(action);\r\n\r\n        if (actionIndex >= 0) {\r\n            this.items.splice(actionIndex, 1);\r\n\r\n            action.setParent(null);\r\n\r\n            invokeSetCollection(action, null);\r\n\r\n            for (let i = 0; i < this.buttons.length; i++) {\r\n                if (this.buttons[i].action == action) {\r\n                    this.buttons.splice(i, 1);\r\n\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    clear() {\r\n        this.items = [];\r\n        this.buttons = [];\r\n\r\n        this._expandedAction = null;\r\n        this._renderedActionCount = 0;\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        var result: Array<Input> = [];\r\n\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            var action = this.items[i];\r\n\r\n            result = result.concat(action.getAllInputs());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        let result: Array<Shared.IResourceInformation> = [];\r\n\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            result = result.concat(this.items[i].getResourceInformation());\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get renderedActionCount(): number {\r\n        return this._renderedActionCount;\r\n    }\r\n\r\n    get expandedAction(): ShowCardAction {\r\n        return this._expandedAction;\r\n    }\r\n}\r\n\r\nexport class ActionSet extends CardElement {\r\n    private _actionCollection: ActionCollection;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        return this._actionCollection.render(this.orientation ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());\r\n    }\r\n\r\n    orientation?: Enums.Orientation = null;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._actionCollection = new ActionCollection(this);\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setEnumProperty(Enums.Orientation, result, \"orientation\", this.orientation);\r\n        Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\r\n\r\n        return result;\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        if (this._actionCollection.renderedActionCount == 0) {\r\n            return super.isBleedingAtBottom();\r\n        }\r\n        else {\r\n            if (this._actionCollection.items.length == 1) {\r\n                return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction != null;\r\n            }\r\n        }\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"ActionSet\";\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return this._actionCollection.items.length;\r\n    }\r\n\r\n    getActionAt(index: number): Action {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.items[index];\r\n        }\r\n        else {\r\n            super.getActionAt(index);\r\n        }\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        this._actionCollection.validateProperties(context);\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        var jsonOrientation = json[\"orientation\"];\r\n\r\n        if (jsonOrientation) {\r\n            this.orientation = Utils.getEnumValue(Enums.Orientation, jsonOrientation, Enums.Orientation.Horizontal);\r\n        }\r\n\r\n        this._actionCollection.parse(json[\"actions\"], errors);\r\n    }\r\n\r\n    addAction(action: Action) {\r\n        this._actionCollection.addAction(action);\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        return this._actionCollection.getAllInputs();\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        return this._actionCollection.getResourceInformation();\r\n    }\r\n\r\n    get isInteractive(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport abstract class StylableCardElementContainer extends CardElementContainer {\r\n    private _style?: string = null;\r\n    private _bleed: boolean = false;\r\n\r\n    protected applyBackground() {\r\n        let styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\r\n\r\n        if (!Utils.isNullOrEmpty(styleDefinition.backgroundColor)) {\r\n            this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\r\n        }\r\n    }\r\n\r\n    protected applyPadding() {\r\n        super.applyPadding();\r\n\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n\r\n        let physicalPadding = new Shared.SpacingDefinition();\r\n\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n\r\n        if (this.isBleeding()) {\r\n            // Bleed into the first parent that does have padding\r\n            let padding = new Shared.PaddingDefinition();\r\n\r\n            this.getImmediateSurroundingPadding(padding);\r\n\r\n            let surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n\r\n            this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n\r\n            if (!this.isDesignMode()) {\r\n                this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\r\n                this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\r\n            }\r\n\r\n            if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {\r\n                this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            this.renderedElement.style.marginRight = \"0\";\r\n            this.renderedElement.style.marginLeft = \"0\";\r\n            this.renderedElement.style.marginTop = \"0\";\r\n            this.renderedElement.style.marginBottom = \"0\";\r\n\r\n            if (this.separatorElement) {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    }\r\n\r\n    protected getHasBackground(): boolean {\r\n        let currentElement: CardElement = this.parent;\r\n\r\n        while (currentElement) {\r\n            let currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;\r\n\r\n            if (currentElement instanceof StylableCardElementContainer) {\r\n                if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            currentElement = currentElement.parent;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    protected getDefaultPadding(): Shared.PaddingDefinition {\r\n        return this.getHasBackground() ?\r\n            new Shared.PaddingDefinition(\r\n                Enums.Spacing.Padding,\r\n                Enums.Spacing.Padding,\r\n                Enums.Spacing.Padding,\r\n                Enums.Spacing.Padding) : super.getDefaultPadding();\r\n    }\r\n\r\n    protected getHasExpandedAction(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected getBleed(): boolean {\r\n        return this._bleed;\r\n    }\r\n\r\n    protected setBleed(value: boolean) {\r\n        this._bleed = value;\r\n    }\r\n\r\n    protected get renderedActionCount(): number {\r\n        return 0;\r\n    }\r\n\r\n    protected get hasExplicitStyle(): boolean {\r\n        return this._style != null;\r\n    }\r\n\r\n    protected get allowCustomStyle(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get supportsMinHeight(): boolean {\r\n        return true;\r\n    }\r\n\r\n    isBleeding(): boolean {\r\n\t\treturn (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"style\", this.style);\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this._style) {\r\n            let styleDefinition = this.hostConfig.containerStyles.getStyleByName(this._style);\r\n\r\n            if (!styleDefinition) {\r\n                context.addFailure(\r\n                    this,\r\n                    {\r\n                        error: Enums.ValidationError.InvalidPropertyValue,\r\n                        message: \"Unknown container style: \" + this._style\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this._style = Utils.getStringValue(json[\"style\"]);\r\n    }\r\n\r\n    render(): HTMLElement {\r\n        let renderedElement = super.render();\r\n\r\n        if (renderedElement && this.getHasBackground()) {\r\n            this.applyBackground();\r\n        }\r\n\r\n        return renderedElement;\r\n    }\r\n\r\n    getEffectiveStyle(): string {\r\n        let effectiveStyle = this.style;\r\n\r\n        return effectiveStyle ? effectiveStyle : super.getEffectiveStyle();\r\n    }\r\n\r\n    get style(): string {\r\n        if (this.allowCustomStyle) {\r\n            if (this._style && this.hostConfig.containerStyles.getStyleByName(this._style)) {\r\n                return this._style;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    set style(value: string) {\r\n        this._style = value;\r\n    }\r\n}\r\n\r\nexport class BackgroundImage extends SerializableObject {\r\n    private static readonly defaultFillMode = Enums.FillMode.Cover;\r\n    private static readonly defaultHorizontalAlignment = Enums.HorizontalAlignment.Left;\r\n    private static readonly defaultVerticalAlignment = Enums.VerticalAlignment.Top;\r\n\r\n    url: string;\r\n    fillMode: Enums.FillMode = BackgroundImage.defaultFillMode;\r\n    horizontalAlignment: Enums.HorizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\r\n    verticalAlignment: Enums.VerticalAlignment = BackgroundImage.defaultVerticalAlignment;\r\n\r\n    reset() {\r\n        this.url = undefined;\r\n        this.fillMode = BackgroundImage.defaultFillMode;\r\n        this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;\r\n        this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.url = Utils.getStringValue(json[\"url\"]);\r\n        this.fillMode = Utils.getEnumValue(Enums.FillMode, json[\"fillMode\"], this.fillMode);\r\n        this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json[\"horizontalAlignment\"], this.horizontalAlignment);\r\n        this.verticalAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalAlignment\"], this.verticalAlignment);\r\n    }\r\n\r\n    toJSON(): any {\r\n        if (!this.isValid()) {\r\n            return null;\r\n        }\r\n\r\n        if (this.fillMode == BackgroundImage.defaultFillMode &&\r\n            this.horizontalAlignment == BackgroundImage.defaultHorizontalAlignment &&\r\n            this.verticalAlignment == BackgroundImage.defaultVerticalAlignment) {\r\n\r\n            return this.url;\r\n        }\r\n        else {\r\n            let result = super.toJSON();\r\n\r\n            Utils.setProperty(result, \"url\", this.url);\r\n            Utils.setEnumProperty(Enums.FillMode, result, \"fillMode\", this.fillMode, BackgroundImage.defaultFillMode);\r\n            Utils.setEnumProperty(Enums.HorizontalAlignment, result, \"horizontalAlignment\", this.horizontalAlignment, BackgroundImage.defaultHorizontalAlignment);\r\n            Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalAlignment\", this.verticalAlignment, BackgroundImage.defaultVerticalAlignment);\r\n\r\n            return result;\r\n        }\r\n    }\r\n\r\n    apply(element: HTMLElement) {\r\n        if (this.url) {\r\n            element.style.backgroundImage = \"url('\" + this.url + \"')\";\r\n\r\n            switch (this.fillMode) {\r\n                case Enums.FillMode.Repeat:\r\n                    element.style.backgroundRepeat = \"repeat\";\r\n                    break;\r\n                case Enums.FillMode.RepeatHorizontally:\r\n                    element.style.backgroundRepeat = \"repeat-x\";\r\n                    break;\r\n                case Enums.FillMode.RepeatVertically:\r\n                    element.style.backgroundRepeat = \"repeat-y\";\r\n                    break;\r\n                case Enums.FillMode.Cover:\r\n                default:\r\n                    element.style.backgroundRepeat = \"no-repeat\";\r\n                    element.style.backgroundSize = \"cover\";\r\n                    break;\r\n            }\r\n\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.backgroundPositionX = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.backgroundPositionX = \"right\";\r\n                    break;\r\n            }\r\n\r\n            switch (this.verticalAlignment) {\r\n                case Enums.VerticalAlignment.Center:\r\n                    element.style.backgroundPositionY = \"center\";\r\n                    break;\r\n                case Enums.VerticalAlignment.Bottom:\r\n                    element.style.backgroundPositionY = \"bottom\";\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return !Utils.isNullOrEmpty(this.url);\r\n    }\r\n}\r\n\r\nexport class Container extends StylableCardElementContainer {\r\n    private _items: Array<CardElement> = [];\r\n    private _renderedItems: Array<CardElement> = [];\r\n\r\n    private insertItemAt(\r\n        item: CardElement,\r\n        index: number,\r\n        forceInsert: boolean) {\r\n        if (!item.parent || forceInsert) {\r\n            if (item.isStandalone) {\r\n                if (index < 0 || index >= this._items.length) {\r\n                    this._items.push(item);\r\n                }\r\n                else {\r\n                    this._items.splice(index, 0, item);\r\n                }\r\n\r\n                item.setParent(this);\r\n            }\r\n            else {\r\n                throw new Error(\"Elements of type \" + item.getJsonTypeName() + \" cannot be used as standalone elements.\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"The element already belongs to another container.\")\r\n        }\r\n    }\r\n\r\n    protected supportsExcplitiHeight(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected getItemsCollectionPropertyName(): string {\r\n        return \"items\";\r\n    }\r\n\r\n    protected applyBackground() {\r\n        if (this.backgroundImage.isValid()) {\r\n            this.backgroundImage.apply(this.renderedElement);\r\n        }\r\n\r\n        super.applyBackground();\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        this._renderedItems = [];\r\n\r\n        // Cache hostConfig to avoid walking the parent hierarchy several times\r\n        let hostConfig = this.hostConfig;\r\n\r\n        var element = document.createElement(\"div\");\r\n\r\n        if (this.rtl != null && this.rtl) {\r\n            element.dir = \"rtl\";\r\n        }\r\n\r\n        element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\r\n        element.style.display = \"flex\";\r\n        element.style.flexDirection = \"column\";\r\n\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n            // Forces the container to be at least as tall as its content.\r\n            //\r\n            // Fixes a quirk in Chrome where, for nested flex elements, the\r\n            // inner element's height would never exceed the outer element's\r\n            // height. This caused overflow truncation to break -- containers\r\n            // would always be measured as not overflowing, since their heights\r\n            // were constrained by their parents as opposed to truly reflecting\r\n            // the height of their content.\r\n            //\r\n            // See the \"Browser Rendering Notes\" section of this answer:\r\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\r\n            element.style.minHeight = '-webkit-min-content';\r\n        }\r\n\r\n        switch (this.verticalContentAlignment) {\r\n            case Enums.VerticalAlignment.Center:\r\n                element.style.justifyContent = \"center\";\r\n                break;\r\n            case Enums.VerticalAlignment.Bottom:\r\n                element.style.justifyContent = \"flex-end\";\r\n                break;\r\n            default:\r\n                element.style.justifyContent = \"flex-start\";\r\n                break;\r\n        }\r\n\r\n        if (this._items.length > 0) {\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                var renderedElement = this.isElementAllowed(this._items[i], this.getForbiddenElementTypes()) ? this._items[i].render() : null;\r\n\r\n                if (renderedElement) {\r\n                    if (this._renderedItems.length > 0 && this._items[i].separatorElement) {\r\n                        this._items[i].separatorElement.style.flex = \"0 0 auto\";\r\n\r\n                        Utils.appendChild(element, this._items[i].separatorElement);\r\n                    }\r\n\r\n                    Utils.appendChild(element, renderedElement);\r\n\r\n                    this._renderedItems.push(this._items[i]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.isDesignMode()) {\r\n                var placeholderElement = this.createPlaceholderElement();\r\n                placeholderElement.style.width = \"100%\";\r\n                placeholderElement.style.height = \"100%\";\r\n\r\n                element.appendChild(placeholderElement);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        // Add 1 to account for rounding differences between browsers\r\n        var boundary = this.renderedElement.offsetTop + maxHeight + 1;\r\n\r\n        var handleElement = (cardElement: CardElement) => {\r\n            let elt = cardElement.renderedElement;\r\n\r\n            if (elt) {\r\n                switch (Utils.getFitStatus(elt, boundary)) {\r\n                    case Enums.ContainerFitStatus.FullyInContainer:\r\n                        let sizeChanged = cardElement['resetOverflow']();\r\n                        // If the element's size changed after resetting content,\r\n                        // we have to check if it still fits fully in the card\r\n                        if (sizeChanged) {\r\n                            handleElement(cardElement);\r\n                        }\r\n                        break;\r\n                    case Enums.ContainerFitStatus.Overflowing:\r\n                        let maxHeight = boundary - elt.offsetTop;\r\n                        cardElement['handleOverflow'](maxHeight);\r\n                        break;\r\n                    case Enums.ContainerFitStatus.FullyOutOfContainer:\r\n                        cardElement['handleOverflow'](0);\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n\r\n        for (let item of this._items) {\r\n            handleElement(item);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected undoOverflowTruncation() {\r\n        for (let item of this._items) {\r\n            item['resetOverflow']();\r\n        }\r\n    }\r\n\r\n    protected getHasBackground(): boolean {\r\n        return this.backgroundImage.isValid() || super.getHasBackground();\r\n    }\r\n\r\n    protected get isSelectable(): boolean {\r\n        return true;\r\n    }\r\n\r\n    readonly backgroundImage: BackgroundImage = new BackgroundImage();\r\n\r\n    verticalContentAlignment: Enums.VerticalAlignment = Enums.VerticalAlignment.Top;\r\n    rtl?: boolean = null;\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"backgroundImage\", this.backgroundImage.toJSON());\r\n\r\n        Utils.setEnumProperty(Enums.VerticalAlignment, result, \"verticalContentAlignment\", this.verticalContentAlignment, Enums.VerticalAlignment.Top);\r\n\r\n        if (this._items.length > 0) {\r\n            let elements = [];\r\n\r\n            for (let element of this._items) {\r\n                elements.push(element.toJSON());\r\n            }\r\n\r\n            Utils.setProperty(result, this.getItemsCollectionPropertyName(), elements);\r\n        }\r\n\r\n        Utils.setProperty(result, \"bleed\", this.bleed, false);\r\n\r\n        return result;\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._items.length;\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this._items[index];\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (let item of this._renderedItems) {\r\n                if (item.isVisible) {\r\n                    return item;\r\n                }\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (let i = this._renderedItems.length - 1; i >= 0; i--) {\r\n                if (this._renderedItems[i].isVisible) {\r\n                    return this._renderedItems[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Container\";\r\n    }\r\n\r\n    isFirstElement(element: CardElement): boolean {\r\n        let designMode = this.isDesignMode();\r\n\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] == element;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isLastElement(element: CardElement): boolean {\r\n        let designMode = this.isDesignMode();\r\n\r\n        for (var i = this._items.length - 1; i >= 0; i--) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] == element;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isRtl(): boolean {\r\n        if (this.rtl != null) {\r\n            return this.rtl;\r\n        }\r\n        else {\r\n            let parentContainer = this.getParentContainer();\r\n\r\n            return parentContainer ? parentContainer.isRtl() : false;\r\n        }\r\n    }\r\n\r\n    isBleedingAtTop(): boolean {\r\n        let firstRenderedItem = this.getFirstVisibleRenderedItem();\r\n\r\n        return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        let lastRenderedItem = this.getLastVisibleRenderedItem();\r\n\r\n        return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this.setShouldFallback(false);\r\n\r\n        this._items = [];\r\n        this._renderedItems = [];\r\n\r\n        this.backgroundImage.reset();\r\n\r\n        let jsonBackgroundImage = json[\"backgroundImage\"];\r\n\r\n        if (jsonBackgroundImage) {\r\n            if (typeof jsonBackgroundImage === \"string\") {\r\n                this.backgroundImage.url = jsonBackgroundImage;\r\n                this.backgroundImage.fillMode = Enums.FillMode.Cover;\r\n            }\r\n            else if (typeof jsonBackgroundImage === \"object\") {\r\n                this.backgroundImage.parse(jsonBackgroundImage, errors);\r\n            }\r\n        }\r\n\r\n        this.verticalContentAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json[\"verticalContentAlignment\"], this.verticalContentAlignment);\r\n\r\n        if (json[this.getItemsCollectionPropertyName()] != null) {\r\n            let items = json[this.getItemsCollectionPropertyName()] as Array<any>;\r\n\r\n            this.clear();\r\n\r\n            for (let i = 0; i < items.length; i++) {\r\n                let element = createElementInstance(\r\n                    this,\r\n                    items[i],\r\n                    !this.isDesignMode(),\r\n                    errors);\r\n\r\n                if (element) {\r\n                    this.insertItemAt(element, -1, true);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return this._items.indexOf(cardElement);\r\n    }\r\n\r\n    addItem(item: CardElement) {\r\n        this.insertItemAt(item, -1, false);\r\n    }\r\n\r\n    insertItemBefore(item: CardElement, insertBefore: CardElement) {\r\n        this.insertItemAt(item, this._items.indexOf(insertBefore), false);\r\n    }\r\n\r\n    insertItemAfter(item: CardElement, insertAfter: CardElement) {\r\n        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        var itemIndex = this._items.indexOf(item);\r\n\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n\r\n            item.setParent(null);\r\n\r\n            this.updateLayout();\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    clear() {\r\n        this._items = [];\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        let result = super.getResourceInformation();\r\n\r\n        if (this.backgroundImage.isValid()) {\r\n            result.push({ url: this.backgroundImage.url, mimeType: \"image\" });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        var result: Action = super.getActionById(id);\r\n\r\n        if (!result) {\r\n            if (this.selectAction) {\r\n                result = this.selectAction.getActionById(id);\r\n            }\r\n\r\n            if (!result) {\r\n                for (var i = 0; i < this._items.length; i++) {\r\n                    result = this._items[i].getActionById(id);\r\n\r\n                    if (result) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get padding(): Shared.PaddingDefinition {\r\n        return this.getPadding();\r\n    }\r\n\r\n    set padding(value: Shared.PaddingDefinition) {\r\n        this.setPadding(value);\r\n    }\r\n\r\n    get selectAction(): Action {\r\n        return this.getSelectAction();\r\n    }\r\n\r\n    set selectAction(value: Action) {\r\n        this.setSelectAction(value);\r\n    }\r\n\r\n    get bleed(): boolean {\r\n        return this.getBleed();\r\n    }\r\n\r\n    set bleed(value: boolean) {\r\n        this.setBleed(value);\r\n    }\r\n}\r\n\r\nexport type ColumnWidth = Shared.SizeAndUnit | \"auto\" | \"stretch\";\r\n\r\nexport class Column extends Container {\r\n    private _computedWeight: number = 0;\r\n\r\n    protected adjustRenderedElementSize(renderedElement: HTMLElement) {\r\n        const minDesignTimeColumnHeight = 20;\r\n\r\n        if (this.isDesignMode()) {\r\n            renderedElement.style.minWidth = \"20px\";\r\n            renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\r\n        }\r\n        else {\r\n            renderedElement.style.minWidth = \"0\";\r\n\r\n            if (this.minPixelHeight) {\r\n                renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n            }\r\n        }\r\n\r\n        if (this.width === \"auto\") {\r\n            renderedElement.style.flex = \"0 1 auto\";\r\n        }\r\n        else if (this.width === \"stretch\") {\r\n            renderedElement.style.flex = \"1 1 50px\";\r\n        }\r\n        else {\r\n            let sizeAndUnit = <Shared.SizeAndUnit>this.width;\r\n\r\n            if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {\r\n                renderedElement.style.flex = \"0 0 auto\";\r\n                renderedElement.style.width = sizeAndUnit.physicalSize + \"px\";\r\n            }\r\n            else {\r\n                renderedElement.style.flex = \"1 1 \" + (this._computedWeight > 0 ? this._computedWeight : sizeAndUnit.physicalSize) + \"%\";\r\n            }\r\n        }\r\n    }\r\n\r\n    protected get separatorOrientation(): Enums.Orientation {\r\n        return Enums.Orientation.Vertical;\r\n    }\r\n\r\n    width: ColumnWidth = \"stretch\";\r\n\r\n    constructor(width: ColumnWidth = \"stretch\") {\r\n        super();\r\n\r\n        this.width = width;\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"Column\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        if (this.width instanceof Shared.SizeAndUnit) {\r\n            if (this.width.unit == Enums.SizeUnit.Pixel) {\r\n                Utils.setProperty(result, \"width\", this.width.physicalSize + \"px\");\r\n            }\r\n            else {\r\n                Utils.setNumberProperty(result, \"width\", this.width.physicalSize);\r\n            }\r\n        }\r\n        else {\r\n            Utils.setProperty(result, \"width\", this.width);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        var jsonWidth = json[\"width\"];\r\n\r\n        if (jsonWidth === undefined) {\r\n            jsonWidth = json[\"size\"];\r\n\r\n            if (jsonWidth !== undefined) {\r\n                raiseParseError(\r\n                    {\r\n                        error: Enums.ValidationError.Deprecated,\r\n                        message: \"The \\\"Column.size\\\" property is deprecated and will be removed. Use the \\\"Column.width\\\" property instead.\"\r\n                    },\r\n                    errors\r\n                );\r\n            }\r\n        }\r\n\r\n        if (jsonWidth) {\r\n            var invalidWidth = false;\r\n\r\n            try {\r\n                this.width = Shared.SizeAndUnit.parse(jsonWidth);\r\n            }\r\n            catch (e) {\r\n                if (typeof jsonWidth === \"string\" && (jsonWidth === \"auto\" || jsonWidth === \"stretch\")) {\r\n                    this.width = jsonWidth;\r\n                }\r\n                else {\r\n                    invalidWidth = true;\r\n                }\r\n            }\r\n\r\n            if (invalidWidth) {\r\n                raiseParseError(\r\n                    {\r\n                        error: Enums.ValidationError.InvalidPropertyValue,\r\n                        message: \"Invalid column width:\" + jsonWidth + \" - defaulting to \\\"auto\\\"\"\r\n                    },\r\n                    errors\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        if (this.parent && this.parent instanceof ColumnSet) {\r\n            return this.separatorElement && !this.parent.isLeftMostElement(this);\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class ColumnSet extends StylableCardElementContainer {\r\n    private _columns: Array<Column> = [];\r\n    private _renderedColumns: Array<Column>;\r\n\r\n    private createColumnInstance(json: any, errors: Array<HostConfig.IValidationError>): Column {\r\n        return createCardObjectInstance<Column>(\r\n            this,\r\n            json,\r\n            [], // Forbidden types not supported for elements for now\r\n            !this.isDesignMode(),\r\n            (typeName: string) => {\r\n                return !typeName || typeName === \"Column\" ? new Column() : null;\r\n            },\r\n            (typeName: string, errorType: InstanceCreationErrorType) => {\r\n                if (errorType == InstanceCreationErrorType.UnknownType) {\r\n                    return {\r\n                        error: Enums.ValidationError.UnknownElementType,\r\n                        message: \"Unknown element type: \" + typeName + \". Fallback will be used if present.\"\r\n                    }\r\n                }\r\n                else {\r\n                    return {\r\n                        error: Enums.ValidationError.ElementTypeNotAllowed,\r\n                        message: \"Element type \" + typeName + \" isn't allowed in a ColumnSet.\"\r\n                    }\r\n                }\r\n            },\r\n            errors);\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        this._renderedColumns = [];\r\n\r\n        if (this._columns.length > 0) {\r\n            // Cache hostConfig to avoid walking the parent hierarchy several times\r\n            let hostConfig = this.hostConfig;\r\n\r\n            let element = document.createElement(\"div\");\r\n            element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\r\n            element.style.display = \"flex\";\r\n\r\n            if (AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n                // See comment in Container.internalRender()\r\n                element.style.minHeight = '-webkit-min-content';\r\n            }\r\n\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n\r\n            let totalWeight: number = 0;\r\n\r\n            for (let column of this._columns) {\r\n                if (column.width instanceof Shared.SizeAndUnit && (column.width.unit == Enums.SizeUnit.Weight)) {\r\n                    totalWeight += column.width.physicalSize;\r\n                }\r\n            }\r\n\r\n            for (let column of this._columns) {\r\n                if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {\r\n                    let computedWeight = 100 / totalWeight * column.width.physicalSize;\r\n\r\n                    // Best way to emulate \"internal\" access I know of\r\n                    column[\"_computedWeight\"] = computedWeight;\r\n                }\r\n\r\n                let renderedColumn = column.render();\r\n\r\n                if (renderedColumn) {\r\n                    if (this._renderedColumns.length > 0 && column.separatorElement) {\r\n                        column.separatorElement.style.flex = \"0 0 auto\";\r\n\r\n                        Utils.appendChild(element, column.separatorElement);\r\n                    }\r\n\r\n                    Utils.appendChild(element, renderedColumn);\r\n\r\n                    this._renderedColumns.push(column);\r\n                }\r\n            }\r\n\r\n            return this._renderedColumns.length > 0 ? element : null;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    protected truncateOverflow(maxHeight: number): boolean {\r\n        for (let column of this._columns) {\r\n            column['handleOverflow'](maxHeight);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected undoOverflowTruncation() {\r\n        for (let column of this._columns) {\r\n            column['resetOverflow']();\r\n        }\r\n    }\r\n\r\n    protected get isSelectable(): boolean {\r\n        return true;\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        if (this._columns.length > 0) {\r\n            let columns = [];\r\n\r\n            for (let column of this._columns) {\r\n                columns.push(column.toJSON());\r\n            }\r\n\r\n            Utils.setProperty(result, \"columns\", columns);\r\n        }\r\n\r\n        Utils.setProperty(result, \"bleed\", this.bleed, false);\r\n\r\n        return result;\r\n    }\r\n\r\n    isFirstElement(element: CardElement): boolean {\r\n        for (var i = 0; i < this._columns.length; i++) {\r\n            if (this._columns[i].isVisible) {\r\n                return this._columns[i] == element;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isBleedingAtTop(): boolean {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (let column of this._columns) {\r\n                if (column.isBleedingAtTop()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (let column of this._columns) {\r\n                if (column.isBleedingAtBottom()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getCount(): number {\r\n        return this._columns.length;\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this.getCount();\r\n    }\r\n\r\n    getFirstVisibleRenderedItem(): CardElement {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[0];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getLastVisibleRenderedItem(): CardElement {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[this._renderedColumns.length - 1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getColumnAt(index: number): Column {\r\n        return this._columns[index];\r\n    }\r\n\r\n    getItemAt(index: number): CardElement {\r\n        return this.getColumnAt(index);\r\n    }\r\n\r\n    getJsonTypeName(): string {\r\n        return \"ColumnSet\";\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        if (json[\"columns\"] != null) {\r\n            let jsonColumns = json[\"columns\"] as Array<any>;\r\n\r\n            this._columns = [];\r\n\r\n            for (let i = 0; i < jsonColumns.length; i++) {\r\n                let column = this.createColumnInstance(jsonColumns[i], errors);\r\n\r\n                if (column) {\r\n                    this._columns.push(column);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.bleed = Utils.getBoolValue(json[\"bleed\"], this.bleed);\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        let weightedColumns: number = 0;\r\n        let stretchedColumns: number = 0;\r\n\r\n        for (let column of this._columns) {\r\n            if (typeof column.width === \"number\") {\r\n                weightedColumns++;\r\n            }\r\n            else if (column.width === \"stretch\") {\r\n                stretchedColumns++;\r\n            }\r\n        }\r\n\r\n        if (weightedColumns > 0 && stretchedColumns > 0) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.Hint,\r\n                    message: \"It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.\"\r\n                });\r\n        }\r\n    }\r\n\r\n    addColumn(column: Column) {\r\n        if (!column.parent) {\r\n            this._columns.push(column);\r\n\r\n            column.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(\"This column already belongs to another ColumnSet.\");\r\n        }\r\n    }\r\n\r\n    removeItem(item: CardElement): boolean {\r\n        if (item instanceof Column) {\r\n            var itemIndex = this._columns.indexOf(item);\r\n\r\n            if (itemIndex >= 0) {\r\n                this._columns.splice(itemIndex, 1);\r\n\r\n                item.setParent(null);\r\n\r\n                this.updateLayout();\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    indexOf(cardElement: CardElement): number {\r\n        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\r\n    }\r\n\r\n    isLeftMostElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) == 0;\r\n    }\r\n\r\n    isRightMostElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) == this._columns.length - 1;\r\n    }\r\n\r\n    isTopElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) >= 0;\r\n    }\r\n\r\n    isBottomElement(element: CardElement): boolean {\r\n        return this._columns.indexOf(<Column>element) >= 0;\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        var result: Action = null;\r\n\r\n        for (var i = 0; i < this._columns.length; i++) {\r\n            result = this._columns[i].getActionById(id);\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get bleed(): boolean {\r\n        return this.getBleed();\r\n    }\r\n\r\n    set bleed(value: boolean) {\r\n        this.setBleed(value);\r\n    }\r\n\r\n    get padding(): Shared.PaddingDefinition {\r\n        return this.getPadding();\r\n    }\r\n\r\n    set padding(value: Shared.PaddingDefinition) {\r\n        this.setPadding(value);\r\n    }\r\n\r\n    get selectAction(): Action {\r\n        return this.getSelectAction();\r\n    }\r\n\r\n    set selectAction(value: Action) {\r\n        this.setSelectAction(value);\r\n    }\r\n}\r\n\r\nfunction raiseImageLoadedEvent(image: Image) {\r\n    let card = image.getRootElement() as AdaptiveCard;\r\n    let onImageLoadedHandler = (card && card.onImageLoaded) ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\r\n\r\n    if (onImageLoadedHandler) {\r\n        onImageLoadedHandler(image);\r\n    }\r\n}\r\n\r\nfunction raiseAnchorClickedEvent(element: CardElement, anchor: HTMLAnchorElement): boolean {\r\n    let card = element.getRootElement() as AdaptiveCard;\r\n    let onAnchorClickedHandler = (card && card.onAnchorClicked) ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\r\n\r\n    return onAnchorClickedHandler != null ? onAnchorClickedHandler(element, anchor) : false;\r\n}\r\n\r\nfunction raiseExecuteActionEvent(action: Action) {\r\n    let card = action.parent.getRootElement() as AdaptiveCard;\r\n    let onExecuteActionHandler = (card && card.onExecuteAction) ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\r\n\r\n    if (onExecuteActionHandler) {\r\n        if (action.prepareForExecution()) {\r\n            onExecuteActionHandler(action);\r\n        }\r\n    }\r\n}\r\n\r\nfunction raiseInlineCardExpandedEvent(action: ShowCardAction, isExpanded: boolean) {\r\n    let card = action.parent.getRootElement() as AdaptiveCard;\r\n    let onInlineCardExpandedHandler = (card && card.onInlineCardExpanded) ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;\r\n\r\n    if (onInlineCardExpandedHandler) {\r\n        onInlineCardExpandedHandler(action, isExpanded);\r\n    }\r\n}\r\n\r\nfunction raiseInputValueChangedEvent(input: Input) {\r\n    let card = input.getRootElement() as AdaptiveCard;\r\n    let onInputValueChangedHandler = (card && card.onInputValueChanged) ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;\r\n\r\n    if (onInputValueChangedHandler) {\r\n        onInputValueChangedHandler(input);\r\n    }\r\n}\r\n\r\nfunction raiseElementVisibilityChangedEvent(element: CardElement, shouldUpdateLayout: boolean = true) {\r\n    let rootElement = element.getRootElement();\r\n\r\n    if (shouldUpdateLayout) {\r\n        rootElement.updateLayout();\r\n    }\r\n\r\n    let card = rootElement as AdaptiveCard;\r\n    let onElementVisibilityChangedHandler = (card && card.onElementVisibilityChanged) ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;\r\n\r\n    if (onElementVisibilityChangedHandler != null) {\r\n        onElementVisibilityChangedHandler(element);\r\n    }\r\n}\r\n\r\nfunction raiseParseElementEvent(element: CardElement, json: any, errors?: Array<HostConfig.IValidationError>) {\r\n    let card = element.getRootElement() as AdaptiveCard;\r\n    let onParseElementHandler = (card && card.onParseElement) ? card.onParseElement : AdaptiveCard.onParseElement;\r\n\r\n    if (onParseElementHandler != null) {\r\n        onParseElementHandler(element, json, errors);\r\n    }\r\n}\r\n\r\nfunction raiseParseActionEvent(action: Action, json: any, errors?: Array<HostConfig.IValidationError>) {\r\n    let card = action.parent ? action.parent.getRootElement() as AdaptiveCard : null;\r\n    let onParseActionHandler = (card && card.onParseAction) ? card.onParseAction : AdaptiveCard.onParseAction;\r\n\r\n    if (onParseActionHandler != null) {\r\n        onParseActionHandler(action, json, errors);\r\n    }\r\n}\r\n\r\nfunction raiseParseError(error: HostConfig.IValidationError, errors: Array<HostConfig.IValidationError>) {\r\n    if (errors) {\r\n        errors.push(error);\r\n    }\r\n\r\n    if (AdaptiveCard.onParseError != null) {\r\n        AdaptiveCard.onParseError(error);\r\n    }\r\n}\r\n\r\nexport interface ITypeRegistration<T> {\r\n    typeName: string,\r\n    createInstance: () => T;\r\n}\r\n\r\nexport abstract class ContainerWithActions extends Container {\r\n    private _actionCollection: ActionCollection;\r\n\r\n    protected internalRender(): HTMLElement {\r\n        var element = super.internalRender();\r\n\r\n        var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);\r\n\r\n        if (renderedActions) {\r\n            Utils.appendChild(\r\n                element,\r\n                Utils.renderSeparation(\r\n                    this.hostConfig,\r\n                    {\r\n                        spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing),\r\n                        lineThickness: null,\r\n                        lineColor: null\r\n                    },\r\n                    Enums.Orientation.Horizontal));\r\n            Utils.appendChild(element, renderedActions);\r\n        }\r\n\r\n        if (this.renderIfEmpty) {\r\n            return element;\r\n        }\r\n        else {\r\n            return element.children.length > 0 ? element : null;\r\n        }\r\n    }\r\n\r\n    protected getHasExpandedAction(): boolean {\r\n        if (this.renderedActionCount == 0) {\r\n            return false;\r\n        }\r\n        else if (this.renderedActionCount == 1) {\r\n            return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n        }\r\n        else {\r\n            return this._actionCollection.expandedAction != null;\r\n        }\r\n    }\r\n\r\n    protected get renderedActionCount(): number {\r\n        return this._actionCollection.renderedActionCount;\r\n    }\r\n\r\n    protected get renderIfEmpty(): boolean {\r\n        return false;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._actionCollection = new ActionCollection(this);\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"actions\", this._actionCollection.toJSON());\r\n\r\n        return result;\r\n    }\r\n\r\n    getActionCount(): number {\r\n        return this._actionCollection.items.length;\r\n    }\r\n\r\n    getActionAt(index: number): Action {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.items[index];\r\n        }\r\n        else {\r\n            super.getActionAt(index);\r\n        }\r\n    }\r\n\r\n    getActionById(id: string): Action {\r\n        var result: Action = this._actionCollection.getActionById(id);\r\n\r\n        return result ? result : super.getActionById(id);\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        super.parse(json, errors);\r\n\r\n        this._actionCollection.parse(json[\"actions\"], errors);\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this._actionCollection) {\r\n            this._actionCollection.validateProperties(context);\r\n        }\r\n    }\r\n\r\n    isLastElement(element: CardElement): boolean {\r\n        return super.isLastElement(element) && this._actionCollection.items.length == 0;\r\n    }\r\n\r\n    addAction(action: Action) {\r\n        this._actionCollection.addAction(action);\r\n    }\r\n\r\n    clear() {\r\n        super.clear();\r\n\r\n        this._actionCollection.clear();\r\n    }\r\n\r\n    getAllInputs(): Array<Input> {\r\n        return super.getAllInputs().concat(this._actionCollection.getAllInputs());\r\n    }\r\n\r\n    getResourceInformation(): Array<Shared.IResourceInformation> {\r\n        return super.getResourceInformation().concat(this._actionCollection.getResourceInformation());\r\n    }\r\n\r\n    isBleedingAtBottom(): boolean {\r\n        if (this._actionCollection.renderedActionCount == 0) {\r\n            return super.isBleedingAtBottom();\r\n        }\r\n        else {\r\n            if (this._actionCollection.items.length == 1) {\r\n                return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction != null;\r\n            }\r\n        }\r\n    }\r\n\r\n    get isStandalone(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport abstract class TypeRegistry<T> {\r\n    private _items: Array<ITypeRegistration<T>> = [];\r\n\r\n    private findTypeRegistration(typeName: string): ITypeRegistration<T> {\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            if (this._items[i].typeName === typeName) {\r\n                return this._items[i];\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    constructor() {\r\n        this.reset();\r\n    }\r\n\r\n    clear() {\r\n        this._items = [];\r\n    }\r\n\r\n    abstract reset();\r\n\r\n    registerType(typeName: string, createInstance: () => T) {\r\n        var registrationInfo = this.findTypeRegistration(typeName);\r\n\r\n        if (registrationInfo != null) {\r\n            registrationInfo.createInstance = createInstance;\r\n        }\r\n        else {\r\n            registrationInfo = {\r\n                typeName: typeName,\r\n                createInstance: createInstance\r\n            }\r\n\r\n            this._items.push(registrationInfo);\r\n        }\r\n    }\r\n\r\n    unregisterType(typeName: string) {\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            if (this._items[i].typeName === typeName) {\r\n                this._items.splice(i, 1);\r\n\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    createInstance(typeName: string): T {\r\n        var registrationInfo = this.findTypeRegistration(typeName);\r\n\r\n        return registrationInfo ? registrationInfo.createInstance() : null;\r\n    }\r\n\r\n    getItemCount(): number {\r\n        return this._items.length;\r\n    }\r\n\r\n    getItemAt(index: number): ITypeRegistration<T> {\r\n        return this._items[index];\r\n    }\r\n}\r\n\r\nexport class ElementTypeRegistry extends TypeRegistry<CardElement> {\r\n    reset() {\r\n        this.clear();\r\n\r\n        this.registerType(\"Container\", () => { return new Container(); });\r\n        this.registerType(\"TextBlock\", () => { return new TextBlock(); });\r\n        this.registerType(\"RichTextBlock\", () => { return new RichTextBlock(); });\r\n        this.registerType(\"TextRun\", () => { return new TextRun(); });\r\n        this.registerType(\"Image\", () => { return new Image(); });\r\n        this.registerType(\"ImageSet\", () => { return new ImageSet(); });\r\n        this.registerType(\"Media\", () => { return new Media(); });\r\n        this.registerType(\"FactSet\", () => { return new FactSet(); });\r\n        this.registerType(\"ColumnSet\", () => { return new ColumnSet(); });\r\n        this.registerType(\"ActionSet\", () => { return new ActionSet(); });\r\n        this.registerType(\"Input.Text\", () => { return new TextInput(); });\r\n        this.registerType(\"Input.Date\", () => { return new DateInput(); });\r\n        this.registerType(\"Input.Time\", () => { return new TimeInput(); });\r\n        this.registerType(\"Input.Number\", () => { return new NumberInput(); });\r\n        this.registerType(\"Input.ChoiceSet\", () => { return new ChoiceSetInput(); });\r\n        this.registerType(\"Input.Toggle\", () => { return new ToggleInput(); });\r\n    }\r\n}\r\n\r\nexport class ActionTypeRegistry extends TypeRegistry<Action> {\r\n    reset() {\r\n        this.clear();\r\n\r\n        this.registerType(OpenUrlAction.JsonTypeName, () => { return new OpenUrlAction(); });\r\n        this.registerType(SubmitAction.JsonTypeName, () => { return new SubmitAction(); });\r\n        this.registerType(ShowCardAction.JsonTypeName, () => { return new ShowCardAction(); });\r\n        this.registerType(ToggleVisibilityAction.JsonTypeName, () => { return new ToggleVisibilityAction(); });\r\n    }\r\n}\r\n\r\nexport interface IMarkdownProcessingResult {\r\n    didProcess: boolean;\r\n    outputHtml?: any;\r\n}\r\n\r\nexport class AdaptiveCard extends ContainerWithActions {\r\n    private static currentVersion: HostConfig.Version = new HostConfig.Version(1, 2);\r\n\r\n    static useAdvancedTextBlockTruncation: boolean = true;\r\n    static useAdvancedCardBottomTruncation: boolean = false;\r\n    static useMarkdownInRadioButtonAndCheckbox: boolean = true;\r\n    static allowMarkForTextHighlighting: boolean = false;\r\n    static alwaysBleedSeparators: boolean = false;\r\n    static enableFullJsonRoundTrip: boolean = false;\r\n    static useBuiltInInputValidation: boolean = true;\r\n    static displayInputValidationErrors: boolean = true;\r\n\r\n    static readonly elementTypeRegistry = new ElementTypeRegistry();\r\n    static readonly actionTypeRegistry = new ActionTypeRegistry();\r\n\r\n    static onAnchorClicked: (element: CardElement, anchor: HTMLAnchorElement) => boolean = null;\r\n    static onExecuteAction: (action: Action) => void = null;\r\n    static onElementVisibilityChanged: (element: CardElement) => void = null;\r\n    static onImageLoaded: (image: Image) => void = null;\r\n    static onInlineCardExpanded: (action: ShowCardAction, isExpanded: boolean) => void = null;\r\n    static onInputValueChanged: (input: Input) => void = null;\r\n    static onParseElement: (element: CardElement, json: any, errors?: Array<HostConfig.IValidationError>) => void = null;\r\n    static onParseAction: (element: Action, json: any, errors?: Array<HostConfig.IValidationError>) => void = null;\r\n    static onParseError: (error: HostConfig.IValidationError) => void = null;\r\n    static onProcessMarkdown: (text: string, result: IMarkdownProcessingResult) => void = null;\r\n\r\n    static get processMarkdown(): (text: string) => string {\r\n        throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\")\r\n    }\r\n\r\n    static set processMarkdown(value: (text: string) => string) {\r\n        throw new Error(\"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\")\r\n    }\r\n\r\n    static applyMarkdown(text: string): IMarkdownProcessingResult {\r\n        let result: IMarkdownProcessingResult = {\r\n            didProcess: false\r\n        };\r\n\r\n        if (AdaptiveCard.onProcessMarkdown) {\r\n            AdaptiveCard.onProcessMarkdown(text, result);\r\n        }\r\n        else if (window[\"markdownit\"]) {\r\n            // Check for markdownit\r\n            result.outputHtml = window[\"markdownit\"]().render(text);\r\n            result.didProcess = true;\r\n        }\r\n        else {\r\n            console.warn(\"Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown\")\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _cardTypeName?: string = \"AdaptiveCard\";\r\n    private _fallbackCard: AdaptiveCard = null;\r\n\r\n    private isVersionSupported(): boolean {\r\n        if (this.bypassVersionCheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            let unsupportedVersion: boolean =\r\n                !this.version ||\r\n                !this.version.isValid ||\r\n                (AdaptiveCard.currentVersion.major < this.version.major) ||\r\n                (AdaptiveCard.currentVersion.major == this.version.major && AdaptiveCard.currentVersion.minor < this.version.minor);\r\n\r\n            return !unsupportedVersion;\r\n        }\r\n    }\r\n\r\n    protected getItemsCollectionPropertyName(): string {\r\n        return \"body\";\r\n    }\r\n\r\n    protected internalRender(): HTMLElement {\r\n        var renderedElement = super.internalRender();\r\n\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation) {\r\n            // Unlike containers, the root card element should be allowed to\r\n            // be shorter than its content (otherwise the overflow truncation\r\n            // logic would never get triggered)\r\n            renderedElement.style.minHeight = null;\r\n        }\r\n\r\n        return renderedElement;\r\n    }\r\n\r\n    protected getHasBackground(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected getDefaultPadding(): Shared.PaddingDefinition {\r\n        return new Shared.PaddingDefinition(\r\n            Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding);\r\n    }\r\n\r\n    protected get renderIfEmpty(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get bypassVersionCheck(): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected get allowCustomStyle() {\r\n        return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\r\n    }\r\n\r\n    protected get hasBackground(): boolean {\r\n        return true;\r\n    }\r\n\r\n    onAnchorClicked: (element: CardElement, anchor: HTMLAnchorElement) => boolean = null;\r\n    onExecuteAction: (action: Action) => void = null;\r\n    onElementVisibilityChanged: (element: CardElement) => void = null;\r\n    onImageLoaded: (image: Image) => void = null;\r\n    onInlineCardExpanded: (action: ShowCardAction, isExpanded: boolean) => void = null;\r\n    onInputValueChanged: (input: Input) => void = null;\r\n    onParseElement: (element: CardElement, json: any, errors?: Array<HostConfig.IValidationError>) => void = null;\r\n    onParseAction: (element: Action, json: any, errors?: Array<HostConfig.IValidationError>) => void = null;\r\n\r\n    version?: HostConfig.Version = new HostConfig.Version(1, 0);\r\n    fallbackText: string;\r\n    speak: string;\r\n    designMode: boolean = false;\r\n\r\n    getJsonTypeName(): string {\r\n        return \"AdaptiveCard\";\r\n    }\r\n\r\n    toJSON(): any {\r\n        let result = super.toJSON();\r\n\r\n        Utils.setProperty(result, \"$schema\", \"http://adaptivecards.io/schemas/adaptive-card.json\");\r\n\r\n        if (!this.bypassVersionCheck && this.version) {\r\n            Utils.setProperty(result, \"version\", this.version.toString());\r\n        }\r\n\r\n        Utils.setProperty(result, \"fallbackText\", this.fallbackText);\r\n        Utils.setProperty(result, \"lang\", this.lang);\r\n        Utils.setProperty(result, \"speak\", this.speak);\r\n\r\n        return result;\r\n    }\r\n\r\n    internalValidateProperties(context: ValidationResults) {\r\n        super.internalValidateProperties(context);\r\n\r\n        if (this._cardTypeName != \"AdaptiveCard\") {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.MissingCardType,\r\n                    message: \"Invalid or missing card type. Make sure the card's type property is set to \\\"AdaptiveCard\\\".\"\r\n                });\r\n        }\r\n\r\n        if (!this.bypassVersionCheck && !this.version) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.PropertyCantBeNull,\r\n                    message: \"The version property must be specified.\"\r\n                });\r\n        }\r\n        else if (!this.isVersionSupported()) {\r\n            context.addFailure(\r\n                this,\r\n                {\r\n                    error: Enums.ValidationError.UnsupportedCardVersion,\r\n                    message: \"The specified card version (\" + this.version + \") is not supported. The maximum supported card version is \" + AdaptiveCard.currentVersion\r\n                });\r\n        }\r\n    }\r\n\r\n    parse(json: any, errors?: Array<HostConfig.IValidationError>) {\r\n        this._fallbackCard = null;\r\n\r\n        this._cardTypeName = Utils.getStringValue(json[\"type\"]);\r\n        this.speak = Utils.getStringValue(json[\"speak\"]);\r\n\r\n\t\tvar langId = Utils.getStringValue(json[\"lang\"]);\r\n\r\n        if (langId && typeof langId === \"string\") {\r\n            try {\r\n                this.lang = langId;\r\n            }\r\n            catch (e) {\r\n                raiseParseError(\r\n                    {\r\n                        error: Enums.ValidationError.InvalidPropertyValue,\r\n                        message: e.message\r\n                    },\r\n                    errors\r\n                );\r\n            }\r\n        }\r\n\r\n        this.version = HostConfig.Version.parse(json[\"version\"], errors);\r\n\r\n        this.fallbackText = Utils.getStringValue(json[\"fallbackText\"]);\r\n\r\n        let fallbackElement = createElementInstance(\r\n            null,\r\n            json[\"fallback\"],\r\n            !this.isDesignMode(),\r\n            errors);\r\n\r\n        if (fallbackElement) {\r\n            this._fallbackCard = new AdaptiveCard();\r\n            this._fallbackCard.addItem(fallbackElement);\r\n        }\r\n\r\n        super.parse(json, errors);\r\n    }\r\n\r\n    render(target?: HTMLElement): HTMLElement {\r\n        let renderedCard: HTMLElement;\r\n\r\n        if (this.shouldFallback() && this._fallbackCard) {\r\n            this._fallbackCard.hostConfig = this.hostConfig;\r\n\r\n            renderedCard = this._fallbackCard.render();\r\n        }\r\n        else {\r\n            renderedCard = super.render();\r\n\r\n            if (renderedCard) {\r\n                renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\"));\r\n\r\n                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\r\n                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\r\n                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\r\n                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\r\n                // by default.\r\n                if (Shared.GlobalSettings.setTabIndexAtCardRoot) {\r\n                    renderedCard.tabIndex = 0;\r\n                }\r\n\r\n                if (!Utils.isNullOrEmpty(this.speak)) {\r\n                    renderedCard.setAttribute(\"aria-label\", this.speak);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (target) {\r\n            target.appendChild(renderedCard);\r\n\r\n            this.updateLayout();\r\n        }\r\n\r\n        return renderedCard;\r\n    }\r\n\r\n    updateLayout(processChildren: boolean = true) {\r\n        super.updateLayout(processChildren);\r\n\r\n        if (AdaptiveCard.useAdvancedCardBottomTruncation && this.isRendered()) {\r\n            var card = this.renderedElement;\r\n            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\r\n\r\n            this['handleOverflow'](card.offsetHeight - padding);\r\n        }\r\n    }\r\n\r\n    shouldFallback(): boolean {\r\n        return super.shouldFallback() || !this.isVersionSupported();\r\n    }\r\n\r\n    get hasVisibleSeparator(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nclass InlineAdaptiveCard extends AdaptiveCard {\r\n    protected getDefaultPadding(): Shared.PaddingDefinition {\r\n        return new Shared.PaddingDefinition(\r\n            this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding,\r\n            this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding,\r\n            Enums.Spacing.Padding);\r\n    }\r\n\r\n    protected get bypassVersionCheck(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected get defaultStyle(): string {\r\n        if (this.suppressStyle) {\r\n            return Enums.ContainerStyle.Default;\r\n        }\r\n        else {\r\n            return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;\r\n        }\r\n    }\r\n\r\n    suppressStyle: boolean = false;\r\n\r\n    render(target?: HTMLElement) {\r\n        var renderedCard = super.render(target);\r\n        renderedCard.setAttribute(\"aria-live\", \"polite\");\r\n        renderedCard.removeAttribute(\"tabindex\");\r\n\r\n        return renderedCard;\r\n    }\r\n\r\n    getForbiddenActionTypes(): Array<any> {\r\n        return [ShowCardAction];\r\n    }\r\n}\r\n\r\nconst defaultHostConfig: HostConfig.HostConfig = new HostConfig.HostConfig(\r\n    {\r\n        supportsInteractivity: true,\r\n        spacing: {\r\n            small: 10,\r\n            default: 20,\r\n            medium: 30,\r\n            large: 40,\r\n            extraLarge: 50,\r\n            padding: 20\r\n        },\r\n        separator: {\r\n            lineThickness: 1,\r\n            lineColor: \"#EEEEEE\"\r\n        },\r\n        fontTypes: {\r\n            default: {\r\n                fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\r\n                fontSizes: {\r\n                    small: 12,\r\n                    default: 14,\r\n                    medium: 17,\r\n                    large: 21,\r\n                    extraLarge: 26\r\n                },\r\n                fontWeights: {\r\n                    lighter: 200,\r\n                    default: 400,\r\n                    bolder: 600\r\n                }\r\n            },\r\n            monospace: {\r\n                fontFamily: \"'Courier New', Courier, monospace\",\r\n                fontSizes: {\r\n                    small: 12,\r\n                    default: 14,\r\n                    medium: 17,\r\n                    large: 21,\r\n                    extraLarge: 26\r\n                },\r\n                fontWeights: {\r\n                    lighter: 200,\r\n                    default: 400,\r\n                    bolder: 600\r\n                }\r\n            }\r\n        },\r\n        imageSizes: {\r\n            small: 40,\r\n            medium: 80,\r\n            large: 160\r\n        },\r\n        containerStyles: {\r\n            default: {\r\n                backgroundColor: \"#FFFFFF\",\r\n                foregroundColors: {\r\n                    default: {\r\n                        default: \"#333333\",\r\n                        subtle: \"#EE333333\"\r\n                    },\r\n                    dark: {\r\n                        default: \"#000000\",\r\n                        subtle: \"#66000000\"\r\n                    },\r\n                    light: {\r\n                        default: \"#FFFFFF\",\r\n                        subtle: \"#33000000\"\r\n                    },\r\n                    accent: {\r\n                        default: \"#2E89FC\",\r\n                        subtle: \"#882E89FC\"\r\n                    },\r\n                    attention: {\r\n                        default: \"#cc3300\",\r\n                        subtle: \"#DDcc3300\"\r\n                    },\r\n                    good: {\r\n                        default: \"#54a254\",\r\n                        subtle: \"#DD54a254\"\r\n                    },\r\n                    warning: {\r\n                        default: \"#e69500\",\r\n                        subtle: \"#DDe69500\"\r\n                    }\r\n                }\r\n            },\r\n            emphasis: {\r\n                backgroundColor: \"#08000000\",\r\n                foregroundColors: {\r\n                    default: {\r\n                        default: \"#333333\",\r\n                        subtle: \"#EE333333\"\r\n                    },\r\n                    dark: {\r\n                        default: \"#000000\",\r\n                        subtle: \"#66000000\"\r\n                    },\r\n                    light: {\r\n                        default: \"#FFFFFF\",\r\n                        subtle: \"#33000000\"\r\n                    },\r\n                    accent: {\r\n                        default: \"#2E89FC\",\r\n                        subtle: \"#882E89FC\"\r\n                    },\r\n                    attention: {\r\n                        default: \"#cc3300\",\r\n                        subtle: \"#DDcc3300\"\r\n                    },\r\n                    good: {\r\n                        default: \"#54a254\",\r\n                        subtle: \"#DD54a254\"\r\n                    },\r\n                    warning: {\r\n                        default: \"#e69500\",\r\n                        subtle: \"#DDe69500\"\r\n                    }\r\n                }\r\n            },\r\n            accent: {\r\n                backgroundColor: \"#C7DEF9\",\r\n                foregroundColors: {\r\n                    default: {\r\n                        default: \"#333333\",\r\n                        subtle: \"#EE333333\"\r\n                    },\r\n                    dark: {\r\n                        default: \"#000000\",\r\n                        subtle: \"#66000000\"\r\n                    },\r\n                    light: {\r\n                        default: \"#FFFFFF\",\r\n                        subtle: \"#33000000\"\r\n                    },\r\n                    accent: {\r\n                        default: \"#2E89FC\",\r\n                        subtle: \"#882E89FC\"\r\n                    },\r\n                    attention: {\r\n                        default: \"#cc3300\",\r\n                        subtle: \"#DDcc3300\"\r\n                    },\r\n                    good: {\r\n                        default: \"#54a254\",\r\n                        subtle: \"#DD54a254\"\r\n                    },\r\n                    warning: {\r\n                        default: \"#e69500\",\r\n                        subtle: \"#DDe69500\"\r\n                    }\r\n                }\r\n            },\r\n            good: {\r\n                backgroundColor: \"#CCFFCC\",\r\n                foregroundColors: {\r\n                    default: {\r\n                        default: \"#333333\",\r\n                        subtle: \"#EE333333\"\r\n                    },\r\n                    dark: {\r\n                        default: \"#000000\",\r\n                        subtle: \"#66000000\"\r\n                    },\r\n                    light: {\r\n                        default: \"#FFFFFF\",\r\n                        subtle: \"#33000000\"\r\n                    },\r\n                    accent: {\r\n                        default: \"#2E89FC\",\r\n                        subtle: \"#882E89FC\"\r\n                    },\r\n                    attention: {\r\n                        default: \"#cc3300\",\r\n                        subtle: \"#DDcc3300\"\r\n                    },\r\n                    good: {\r\n                        default: \"#54a254\",\r\n                        subtle: \"#DD54a254\"\r\n                    },\r\n                    warning: {\r\n                        default: \"#e69500\",\r\n                        subtle: \"#DDe69500\"\r\n                    }\r\n                }\r\n            },\r\n            attention: {\r\n                backgroundColor: \"#FFC5B2\",\r\n                foregroundColors: {\r\n                    default: {\r\n                        default: \"#333333\",\r\n                        subtle: \"#EE333333\"\r\n                    },\r\n                    dark: {\r\n                        default: \"#000000\",\r\n                        subtle: \"#66000000\"\r\n                    },\r\n                    light: {\r\n                        default: \"#FFFFFF\",\r\n                        subtle: \"#33000000\"\r\n                    },\r\n                    accent: {\r\n                        default: \"#2E89FC\",\r\n                        subtle: \"#882E89FC\"\r\n                    },\r\n                    attention: {\r\n                        default: \"#cc3300\",\r\n                        subtle: \"#DDcc3300\"\r\n                    },\r\n                    good: {\r\n                        default: \"#54a254\",\r\n                        subtle: \"#DD54a254\"\r\n                    },\r\n                    warning: {\r\n                        default: \"#e69500\",\r\n                        subtle: \"#DDe69500\"\r\n                    }\r\n                }\r\n            },\r\n            warning: {\r\n                backgroundColor: \"#FFE2B2\",\r\n                foregroundColors: {\r\n                    default: {\r\n                        default: \"#333333\",\r\n                        subtle: \"#EE333333\"\r\n                    },\r\n                    dark: {\r\n                        default: \"#000000\",\r\n                        subtle: \"#66000000\"\r\n                    },\r\n                    light: {\r\n                        default: \"#FFFFFF\",\r\n                        subtle: \"#33000000\"\r\n                    },\r\n                    accent: {\r\n                        default: \"#2E89FC\",\r\n                        subtle: \"#882E89FC\"\r\n                    },\r\n                    attention: {\r\n                        default: \"#cc3300\",\r\n                        subtle: \"#DDcc3300\"\r\n                    },\r\n                    good: {\r\n                        default: \"#54a254\",\r\n                        subtle: \"#DD54a254\"\r\n                    },\r\n                    warning: {\r\n                        default: \"#e69500\",\r\n                        subtle: \"#DDe69500\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        actions: {\r\n            maxActions: 5,\r\n            spacing: Enums.Spacing.Default,\r\n            buttonSpacing: 10,\r\n            showCard: {\r\n                actionMode: Enums.ShowCardActionMode.Inline,\r\n                inlineTopMargin: 16\r\n            },\r\n            actionsOrientation: Enums.Orientation.Horizontal,\r\n            actionAlignment: Enums.ActionAlignment.Left\r\n        },\r\n        adaptiveCard: {\r\n            allowCustomStyle: false\r\n        },\r\n        imageSet: {\r\n            imageSize: Enums.Size.Medium,\r\n            maxImageHeight: 100\r\n        },\r\n        factSet: {\r\n            title: {\r\n                color: Enums.TextColor.Default,\r\n                size: Enums.TextSize.Default,\r\n                isSubtle: false,\r\n                weight: Enums.TextWeight.Bolder,\r\n                wrap: true,\r\n                maxWidth: 150,\r\n            },\r\n            value: {\r\n                color: Enums.TextColor.Default,\r\n                size: Enums.TextSize.Default,\r\n                isSubtle: false,\r\n                weight: Enums.TextWeight.Default,\r\n                wrap: true,\r\n            },\r\n            spacing: 10\r\n        }\r\n    });\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}